(function(f){if(typeof exports==="object"&&typeof module!=="undefined"){module.exports=f()}else if(typeof define==="function"&&define.amd){define([],f)}else{var g;if(typeof window!=="undefined"){g=window}else if(typeof global!=="undefined"){g=global}else if(typeof self!=="undefined"){g=self}else{g=this}g.holesIn=f()}})(function(){var define,module,exports;return function e(t,n,r){function s(o,u){if(!n[o]){if(!t[o]){var a=typeof require=="function"&&require;if(!u&&a)return a(o,!0);if(i)return i(o,!0);var f=new Error("Cannot find module '"+o+"'");throw f.code="MODULE_NOT_FOUND",f}var l=n[o]={exports:{}};t[o][0].call(l.exports,function(e){var n=t[o][1][e];return s(n?n:e)},l,l.exports,e,t,n,r)}return n[o].exports}var i=typeof require=="function"&&require;for(var o=0;o<r.length;o++)s(r[o]);return s}({1:[function(require,module,exports){"use strict";var cdt2d=require("cdt2d");var lodash=require("lodash");var cdt2dHelper={computeTriangulation:function computeTriangulation(points,options){var cdtPoints=cdt2dHelper.clipperTocdt2d(points);var cdtEdges=cdt2dHelper.pathsToEdges(points);if(!options)options={exterior:false,interior:true};var triangles=cdt2d(cdtPoints,cdtEdges,options);return{points:cdtPoints,triangles:triangles}},concatTriangulations:function concatTriangulations(triangulations){var points=[];var triangles=[];var offset=0;if(triangulations.length==1)return triangulations;for(var i in triangulations){if(!triangulations[i].points||!triangulations[i].triangles)continue;points=points.concat(triangulations[i].points);triangles=triangles.concat(lodash.forEach(triangulations[i].triangles,function(val){return val+offset}));offset+=triangulations[i].points.length}return{points:points,triangles:triangles}},pathsToEdges:function pathsToEdges(paths){var res=[];var offset=0;for(var i=0;i<paths.length;i++){res=res.concat(cdt2dHelper.pathToEdges(paths[i],offset));offset+=paths[i].length}return res},pathToEdges:function pathToEdges(path,offset){var res=[];for(var i=0;i<path.length-1;i++){res.push([offset+i,offset+i+1])}res.push([offset+path.length-1,offset]);return res},clipperTocdt2d:function clipperTocdt2d(points){var res=[];for(var i in points){for(var j in points[i]){res.push(cdt2dHelper.clipperPointTocdt2dPoint(points[i][j]))}}return res},clipperPointTocdt2dPoint:function clipperPointTocdt2dPoint(point){return[point.X,point.Y]},drawTriangles:function drawTriangles(ctx,pointsAndTriangles,translation){for(var i in pointsAndTriangles.triangles){cdt2dHelper.drawTriangle(ctx,pointsAndTriangles.points,pointsAndTriangles.triangles[i],translation)}},drawTriangle:function drawTriangle(ctx,points,triangle,translation){if(!translation)translation={X:0,Y:0};ctx.beginPath();ctx.moveTo(points[triangle[0]][0]+translation.X,points[triangle[0]][1]+translation.Y);ctx.lineTo(points[triangle[1]][0]+translation.X,points[triangle[1]][1]+translation.Y);ctx.lineTo(points[triangle[2]][0]+translation.X,points[triangle[2]][1]+translation.Y);ctx.lineTo(points[triangle[0]][0]+translation.X,points[triangle[0]][1]+translation.Y);ctx.stroke()}};module.exports=cdt2dHelper},{cdt2d:7,lodash:13}],2:[function(require,module,exports){"use strict";var clipperLib=require("clipper-lib");var pathHelper=require("./path-helper.js");var geomHelper=require("./geom-helper.js");var cdt2dHelper=require("./cdt2d-helper.js");var extruder={getGeometry:function getGeometry(outerShape,holes,depthsHoles){var pathsByDepth=extruder.getPathsByDepth(holes,depthsHoles);var topoPathsByDepth=extruder.getTopoPathByDepth(pathsByDepth,outerShape);var horizontalGeom=extruder.getInnerHorizontalGeom(topoPathsByDepth);var verticalGeom=extruder.getInnerVerticalGeom(pathsByDepth,horizontalGeom.offset);var totalGeom=geomHelper.concatGeometries([horizontalGeom,verticalGeom],false);var faces=totalGeom.faces;var points=totalGeom.points;var normals=totalGeom.normals;var uvs=[];return{faces:faces,points:points,normals:normals,uvs:uvs}},getInnerVerticalGeom:function getInnerVerticalGeom(pathsByDepth){var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;Object.keys(pathsByDepth.paths).forEach(function(i){pathHelper.setDirectionPaths(pathsByDepth.paths[i],1)});var geom=[];var _loop=function _loop(indexDepth){var pathsAtDepth=pathsByDepth.paths[indexDepth];Object.values(pathsAtDepth).forEach(function(path){Object.keys(path).forEach(function(indexPtDwn){var ptDwn=path[indexPtDwn];var nPtDwn=path[(+indexPtDwn+1)%path.length];var currgeom=geomHelper.getOneInnerVerticalGeom(ptDwn,nPtDwn,+indexDepth,pathsByDepth,+offset);if(!currgeom)return;geom.push(currgeom);offset=currgeom.offset})})};for(var indexDepth=pathsByDepth.depths.length-1;indexDepth>=0;indexDepth--){_loop(indexDepth)}return geomHelper.concatGeometries(geom,false)},getInnerHorizontalGeom:function getInnerHorizontalGeom(topoPathsByDepth){var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var trianglesByDepth=[];for(var i in topoPathsByDepth){var totaltopo=topoPathsByDepth[i].pos.concat(topoPathsByDepth[i].neg);trianglesByDepth.push(cdt2dHelper.computeTriangulation(totaltopo));trianglesByDepth[i].depth=topoPathsByDepth[i].depth}return geomHelper.getInnerHorizontalGeom(trianglesByDepth,+offset)},getTopoPathByDepth:function getTopoPathByDepth(pathsByDepth,outerShape){var paths=pathsByDepth.paths;var topoByDepth=[];topoByDepth.push({pos:[outerShape],neg:paths[0],depth:0});for(var i=1;i<pathsByDepth.depths.length-1;i++){var xor=pathHelper.getXorOfPaths(paths[i],paths[i+1]);var posxor=xor.filter(pathHelper.isPositivePath);var negxor=xor.filter(pathHelper.isNegativePath);pathHelper.setDirectionPaths(negxor,1);topoByDepth.push({pos:posxor,neg:negxor,depth:pathsByDepth.depths[i]})}pathHelper.setDirectionPaths(paths[paths.length-1],1);topoByDepth.push({pos:paths[paths.length-1],neg:[],depth:pathsByDepth.depths[pathsByDepth.depths.length-1]});return topoByDepth},getPathsByDepth:function getPathsByDepth(initialPaths,depths){var sorted=extruder.sortPathByDepth(initialPaths,depths);depths=new Set(depths);depths=Array.from(depths);depths.sort(function(a,b){return a-b});var res=[];if(depths[0]!=0){depths=[0].concat(depths)}for(var i in depths){var pathsAtThisDepth=extruder.getPathAtDepth(sorted,depths[i]);res.push(pathsAtThisDepth)}return{paths:res,depths:depths}},getPathAtDepth:function getPathAtDepth(pathAndDepth,depth){var res=[];var pathAtDepth=pathAndDepth.filter(function(s){return s.depth>=depth});for(var i in pathAtDepth){res.push(pathAtDepth[i].path)}return pathHelper.simplifyPaths(res)},sortPathByDepth:function sortPathByDepth(initialPaths,depths){var pathAndDepth=[];for(var i in initialPaths){pathAndDepth.push({path:initialPaths[i],depth:depths[i]})}pathAndDepth.sort(function(a,b){return a.depth-b.depth});return pathAndDepth}};module.exports=extruder},{"./cdt2d-helper.js":1,"./geom-helper.js":3,"./path-helper.js":5,"clipper-lib":12}],3:[function(require,module,exports){"use strict";function _toConsumableArray(arr){if(Array.isArray(arr)){for(var i=0,arr2=Array(arr.length);i<arr.length;i++){arr2[i]=arr[i]}return arr2}else{return Array.from(arr)}}var pathHelper=require("./path-helper.js");var geomHelper={concatGeometries:function concatGeometries(geoms,considerOffset){var res=geoms[0];for(var i=1;i<geoms.length;i++){res=geomHelper.concatGeometry(res,geoms[i],considerOffset)}return res},concatGeometry:function concatGeometry(geom1,geom2,considerOffset){var _geom1$points,_geom1$normals;if(considerOffset){var _geom1$faces;(_geom1$faces=geom1.faces).push.apply(_geom1$faces,_toConsumableArray(geom2.faces.map(function(f){return f+ +geom1.offset})));geom1.offset+=geom2.offset}else{var _geom1$faces2;(_geom1$faces2=geom1.faces).push.apply(_geom1$faces2,_toConsumableArray(geom2.faces));geom1.offset+=geom2.offset}(_geom1$points=geom1.points).push.apply(_geom1$points,_toConsumableArray(geom2.points));(_geom1$normals=geom1.normals).push.apply(_geom1$normals,_toConsumableArray(geom2.normals));return geom1},getOuterGeom:function getOuterGeom(pathOuter,depths,options){},getOneInnerVerticalGeom:function getOneInnerVerticalGeom(ptDwn,nPtDwn,indexDepthDwn,pathsByDepth){var offset=arguments.length>4&&arguments[4]!==undefined?arguments[4]:0;var match=geomHelper.getMatchDepths(ptDwn,nPtDwn,+indexDepthDwn,pathsByDepth);if(!match){return}var res=geomHelper.getPtsNormsIndx2d(ptDwn,nPtDwn,+match.depthUp,+match.depthDwn,+offset);return res},getHorizontalInnerGeom:function getHorizontalInnerGeom(trianglesByDepth){var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var faces=[];var points=[];var normals=[];Object.keys(trianglesByDepth).forEach(function(i){var currPoint=[];Object.values(trianglesByDepth[i].points).forEach(function(point){currPoint.push(point[0]);currPoint.push(point[1]);currPoint.push(trianglesByDepth[i].depth)});points.push.apply(points,currPoint);Object.values(trianglesByDepth[i].triangles).forEach(function(triangle){faces.push.apply(faces,_toConsumableArray(triangle.map(function(index){return index+offset})))});offset+=trianglesByDepth[i].points.length;var normal=geomHelper.getNormalToPlan(currPoint.slice(0,3),currPoint.slice(3,6),currPoint.slice(6,9));Object.values(trianglesByDepth[i].points).forEach(function(point){normals.push.apply(normals,_toConsumableArray(normal))})});return{points:points,faces:faces,normals:normals,offset:offset}},getMatchDepths:function getMatchDepths(ptDwn,nPtDwn,indexDepth,pathsByDepth){var depthUp=pathsByDepth.depths[indexDepth-1];var depthDwn=pathsByDepth.depths[indexDepth];for(var i=indexDepth-1;i>=0;i--){var pathsAtDepth=pathsByDepth.paths[i];for(var j=0;j<pathsAtDepth.length;j++){var pathUp=pathsAtDepth[j];var match1=pathHelper.getPointMatch(pathUp,ptDwn);var match2=pathHelper.getPointMatch(pathUp,nPtDwn);if(!match1||!match2){continue}if(pathUp[match1.index].visited){return}depthUp=pathsByDepth.depths[i];depthDwn=pathsByDepth.depths[indexDepth];pathsByDepth.paths[i][j][match1.index].visited=true}}return{depthUp:depthUp,depthDwn:depthDwn}},getPtsNormsIndx2d:function getPtsNormsIndx2d(point2d1,point2d2,depthUp,depthDwn,offset){var point1=geomHelper.getPoint3(point2d1,depthUp);var point2=geomHelper.getPoint3(point2d1,depthDwn);var point3=geomHelper.getPoint3(point2d2,depthDwn);var point4=geomHelper.getPoint3(point2d2,depthUp);return geomHelper.getPtsNormsIndx3d([point1,point2,point3,point4],+offset)},getPtsNormsIndx3d:function getPtsNormsIndx3d(points3d,offset){var normal=geomHelper.getNormalToPlan(points3d[0],points3d[1],points3d[2],offset);var resNorm=[];resNorm.push.apply(resNorm,_toConsumableArray(normal));resNorm.push.apply(resNorm,_toConsumableArray(normal));resNorm.push.apply(resNorm,_toConsumableArray(normal));resNorm.push.apply(resNorm,_toConsumableArray(normal));var resPoints=[];resPoints.push.apply(resPoints,_toConsumableArray(points3d[0]));resPoints.push.apply(resPoints,_toConsumableArray(points3d[1]));resPoints.push.apply(resPoints,_toConsumableArray(points3d[2]));resPoints.push.apply(resPoints,_toConsumableArray(points3d[3]));var resFaces=[0,2,1,0,3,2].map(function(elt){return elt+offset});return{points:resPoints,normals:resNorm,faces:resFaces,offset:offset+4}},getInnerHorizontalGeom:function getInnerHorizontalGeom(trianglesByDepth){var offset=arguments.length>1&&arguments[1]!==undefined?arguments[1]:0;var faces=[];var points=[];var normals=[];Object.keys(trianglesByDepth).forEach(function(i){var currPoint=[];Object.values(trianglesByDepth[i].points).forEach(function(point){currPoint.push(point[0]);currPoint.push(point[1]);currPoint.push(trianglesByDepth[i].depth)});points.push.apply(points,currPoint);Object.values(trianglesByDepth[i].triangles).forEach(function(triangle){faces.push.apply(faces,_toConsumableArray(triangle.map(function(index){return index+offset})))});offset+=trianglesByDepth[i].points.length;var normal=geomHelper.getNormalToPlan(currPoint.slice(0,3),currPoint.slice(3,6),currPoint.slice(6,9));Object.values(trianglesByDepth[i].points).forEach(function(point){normals.push.apply(normals,_toConsumableArray(normal))})});return{points:points,faces:faces,normals:normals,offset:offset}},getNormalToPlan:function getNormalToPlan(point1,point2,point4){var vec1=geomHelper.pointsToVec(point1,point2);var vec2=geomHelper.pointsToVec(point1,point4);return geomHelper.normalizeVec(geomHelper.cross(vec1,vec2))},pointsToVec:function pointsToVec(point1,point2){return[point2[0]-point1[0],point2[1]-point1[1],point2[2]-point1[2]]},getPoint3:function getPoint3(point2,depth){return[point2.X,point2.Y,depth]},cross:function cross(vec1,vec2){return[vec1[1]*vec2[2]-vec1[2]*vec2[1],vec1[2]*vec2[0]-vec1[0]*vec2[2],vec1[0]*vec2[1]-vec1[1]*vec2[0]]},normalizeVec:function normalizeVec(vec){var norm=Math.sqrt(vec[0]*vec[0]+vec[1]*vec[1]+vec[2]*vec[2]);return[vec[0]/norm,vec[1]/norm,vec[2]/norm]}};module.exports=geomHelper},{"./path-helper.js":5}],4:[function(require,module,exports){"use strict";var extruder=require("./extruder.js");var zepathlib={getGeometry:extruder.getGeometry};module.exports=zepathlib},{"./extruder.js":2}],5:[function(require,module,exports){"use strict";var clipperLib=require("clipper-lib");var pathHelper={getXorOfPaths:function getXorOfPaths(pathsSubj,pathsClip){var options={subjectFillType:clipperLib.PolyFillType.pftNonZero,clipFillType:clipperLib.PolyFillType.pftNonZero,clipType:clipperLib.ClipType.ctXor};return pathHelper.executeClipper(pathsSubj,pathsClip,options)},simplifyPaths:function simplifyPaths(paths){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{fillType:clipperLib.PolyFillType.pftNonZero};return clipperLib.Clipper.SimplifyPolygons(paths,options.fillType)},executeClipper:function executeClipper(pathsSubj,pathsClip){var options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{clipType:ClipperLib.ClipType.ctUnion,subjectFill:lipperLib.PolyFillType.pftNonZero,clipFill:lipperLib.PolyFillType.pftNonZero};if(!pathsSubj&&!pathsClip){return}pathHelper.setDirectionPaths(pathsSubj,-1);if(pathsClip){pathHelper.setDirectionPaths(pathsClip,-1)}var cpr=new clipperLib.Clipper;cpr.AddPaths(pathsSubj,clipperLib.PolyType.ptSubject,true);if(pathsClip)cpr.AddPaths(pathsClip,clipperLib.PolyType.ptClip,true);var res=new clipperLib.Paths;cpr.Execute(options.clipType,res,options.subjectFill,options.clipFill);return res},setDirectionPaths:function setDirectionPaths(paths,direction){for(var i in paths){pathHelper.setDirectionPath(paths[i],direction)}},setDirectionPath:function setDirectionPath(path,direction){if(clipperLib.JS.AreaOfPolygon(path)*direction<0){path.reverse()}},isPositivePath:function isPositivePath(path){return pathHelper.getDirectionPath(path)>0},isNegativePath:function isNegativePath(path){return pathHelper.getDirectionPath(path)<0},getDirectionPaths:function getDirectionPaths(paths){return paths.map(pathHelper.getDirectionPath)},getDirectionPath:function getDirectionPath(path){return clipperLib.JS.AreaOfPolygon(path)>0?1:-1},getPointMatch:function getPointMatch(path,point){var offsetPath=arguments.length>2&&arguments[2]!==undefined?arguments[2]:0;for(var i=offsetPath;i<path.length;i++){if(pathHelper.isEqual(path[i],point)){return{index:i}}}},isEqual:function isEqual(point1,point2){return point1.X===point2.X&&point1.Y===point2.Y}};module.exports=pathHelper},{"clipper-lib":12}],6:[function(require,module,exports){"use strict";function compileSearch(funcName,predicate,reversed,extraArgs,earlyOut){var code=["function ",funcName,"(a,l,h,",extraArgs.join(","),"){",earlyOut?"":"var i=",reversed?"l-1":"h+1",";while(l<=h){var m=(l+h)>>>1,x=a[m]"];if(earlyOut){if(predicate.indexOf("c")<0){code.push(";if(x===y){return m}else if(x<=y){")}else{code.push(";var p=c(x,y);if(p===0){return m}else if(p<=0){")}}else{code.push(";if(",predicate,"){i=m;")}if(reversed){code.push("l=m+1}else{h=m-1}")}else{code.push("h=m-1}else{l=m+1}")}code.push("}");if(earlyOut){code.push("return -1};")}else{code.push("return i};")}return code.join("")}function compileBoundsSearch(predicate,reversed,suffix,earlyOut){var result=new Function([compileSearch("A","x"+predicate+"y",reversed,["y"],earlyOut),compileSearch("P","c(x,y)"+predicate+"0",reversed,["y","c"],earlyOut),"function dispatchBsearch",suffix,"(a,y,c,l,h){if(typeof(c)==='function'){return P(a,(l===void 0)?0:l|0,(h===void 0)?a.length-1:h|0,y,c)}else{return A(a,(c===void 0)?0:c|0,(l===void 0)?a.length-1:l|0,y)}}return dispatchBsearch",suffix].join(""));return result()}module.exports={ge:compileBoundsSearch(">=",false,"GE"),gt:compileBoundsSearch(">",false,"GT"),lt:compileBoundsSearch("<",true,"LT"),le:compileBoundsSearch("<=",true,"LE"),eq:compileBoundsSearch("-",true,"EQ",true)}},{}],7:[function(require,module,exports){"use strict";var monotoneTriangulate=require("./lib/monotone");var makeIndex=require("./lib/triangulation");var delaunayFlip=require("./lib/delaunay");var filterTriangulation=require("./lib/filter");module.exports=cdt2d;function canonicalizeEdge(e){return[Math.min(e[0],e[1]),Math.max(e[0],e[1])]}function compareEdge(a,b){return a[0]-b[0]||a[1]-b[1]}function canonicalizeEdges(edges){return edges.map(canonicalizeEdge).sort(compareEdge)}function getDefault(options,property,dflt){if(property in options){return options[property]}return dflt}function cdt2d(points,edges,options){if(!Array.isArray(edges)){options=edges||{};edges=[]}else{options=options||{};edges=edges||[]}var delaunay=!!getDefault(options,"delaunay",true);var interior=!!getDefault(options,"interior",true);var exterior=!!getDefault(options,"exterior",true);var infinity=!!getDefault(options,"infinity",false);if(!interior&&!exterior||points.length===0){return[]}var cells=monotoneTriangulate(points,edges);if(delaunay||interior!==exterior||infinity){var triangulation=makeIndex(points.length,canonicalizeEdges(edges));for(var i=0;i<cells.length;++i){var f=cells[i];triangulation.addTriangle(f[0],f[1],f[2])}if(delaunay){delaunayFlip(points,triangulation)}if(!exterior){return filterTriangulation(triangulation,-1)}else if(!interior){return filterTriangulation(triangulation,1,infinity)}else if(infinity){return filterTriangulation(triangulation,0,infinity)}else{return triangulation.cells()}}else{return cells}}},{"./lib/delaunay":8,"./lib/filter":9,"./lib/monotone":10,"./lib/triangulation":11}],8:[function(require,module,exports){"use strict";var inCircle=require("robust-in-sphere")[4];var bsearch=require("binary-search-bounds");module.exports=delaunayRefine;function testFlip(points,triangulation,stack,a,b,x){var y=triangulation.opposite(a,b);if(y<0){return}if(b<a){var tmp=a;a=b;b=tmp;tmp=x;x=y;y=tmp}if(triangulation.isConstraint(a,b)){return}if(inCircle(points[a],points[b],points[x],points[y])<0){stack.push(a,b)}}function delaunayRefine(points,triangulation){var stack=[];var numPoints=points.length;var stars=triangulation.stars;for(var a=0;a<numPoints;++a){var star=stars[a];for(var j=1;j<star.length;j+=2){var b=star[j];if(b<a){continue}if(triangulation.isConstraint(a,b)){continue}var x=star[j-1],y=-1;for(var k=1;k<star.length;k+=2){if(star[k-1]===b){y=star[k];break}}if(y<0){continue}if(inCircle(points[a],points[b],points[x],points[y])<0){stack.push(a,b)}}}while(stack.length>0){var b=stack.pop();var a=stack.pop();var x=-1,y=-1;var star=stars[a];for(var i=1;i<star.length;i+=2){var s=star[i-1];var t=star[i];if(s===b){y=t}else if(t===b){x=s}}if(x<0||y<0){continue}if(inCircle(points[a],points[b],points[x],points[y])>=0){continue}triangulation.flip(a,b);testFlip(points,triangulation,stack,x,a,y);testFlip(points,triangulation,stack,a,y,x);testFlip(points,triangulation,stack,y,b,x);testFlip(points,triangulation,stack,b,x,y)}}},{"binary-search-bounds":6,"robust-in-sphere":14}],9:[function(require,module,exports){"use strict";var bsearch=require("binary-search-bounds");module.exports=classifyFaces;function FaceIndex(cells,neighbor,constraint,flags,active,next,boundary){this.cells=cells;this.neighbor=neighbor;this.flags=flags;this.constraint=constraint;this.active=active;this.next=next;this.boundary=boundary}var proto=FaceIndex.prototype;function compareCell(a,b){return a[0]-b[0]||a[1]-b[1]||a[2]-b[2]}proto.locate=function(){var key=[0,0,0];return function(a,b,c){var x=a,y=b,z=c;if(b<c){if(b<a){x=b;y=c;z=a}}else if(c<a){x=c;y=a;z=b}if(x<0){return-1}key[0]=x;key[1]=y;key[2]=z;return bsearch.eq(this.cells,key,compareCell)}}();function indexCells(triangulation,infinity){var cells=triangulation.cells();var nc=cells.length;for(var i=0;i<nc;++i){var c=cells[i];var x=c[0],y=c[1],z=c[2];if(y<z){if(y<x){c[0]=y;c[1]=z;c[2]=x}}else if(z<x){c[0]=z;c[1]=x;c[2]=y}}cells.sort(compareCell);var flags=new Array(nc);for(var i=0;i<flags.length;++i){flags[i]=0}var active=[];var next=[];var neighbor=new Array(3*nc);var constraint=new Array(3*nc);var boundary=null;if(infinity){boundary=[]}var index=new FaceIndex(cells,neighbor,constraint,flags,active,next,boundary);for(var i=0;i<nc;++i){var c=cells[i];for(var j=0;j<3;++j){var x=c[j],y=c[(j+1)%3];var a=neighbor[3*i+j]=index.locate(y,x,triangulation.opposite(y,x));var b=constraint[3*i+j]=triangulation.isConstraint(x,y);if(a<0){if(b){next.push(i)}else{active.push(i);flags[i]=1}if(infinity){boundary.push([y,x,-1])}}}}return index}function filterCells(cells,flags,target){var ptr=0;for(var i=0;i<cells.length;++i){if(flags[i]===target){cells[ptr++]=cells[i]}}cells.length=ptr;return cells}function classifyFaces(triangulation,target,infinity){var index=indexCells(triangulation,infinity);if(target===0){if(infinity){return index.cells.concat(index.boundary)}else{return index.cells}}var side=1;var active=index.active;var next=index.next;var flags=index.flags;var cells=index.cells;var constraint=index.constraint;var neighbor=index.neighbor;while(active.length>0||next.length>0){while(active.length>0){var t=active.pop();if(flags[t]===-side){continue}flags[t]=side;var c=cells[t];for(var j=0;j<3;++j){var f=neighbor[3*t+j];if(f>=0&&flags[f]===0){if(constraint[3*t+j]){next.push(f)}else{active.push(f);flags[f]=side}}}}var tmp=next;next=active;active=tmp;next.length=0;side=-side}var result=filterCells(cells,flags,target);if(infinity){return result.concat(index.boundary)}return result}},{"binary-search-bounds":6}],10:[function(require,module,exports){"use strict";var bsearch=require("binary-search-bounds");var orient=require("robust-orientation")[3];var EVENT_POINT=0;var EVENT_END=1;var EVENT_START=2;module.exports=monotoneTriangulate;function PartialHull(a,b,idx,lowerIds,upperIds){this.a=a;this.b=b;this.idx=idx;this.lowerIds=lowerIds;this.upperIds=upperIds}function Event(a,b,type,idx){this.a=a;this.b=b;this.type=type;this.idx=idx}function compareEvent(a,b){var d=a.a[0]-b.a[0]||a.a[1]-b.a[1]||a.type-b.type;if(d){return d}if(a.type!==EVENT_POINT){d=orient(a.a,a.b,b.b);if(d){return d}}return a.idx-b.idx}function testPoint(hull,p){return orient(hull.a,hull.b,p)}function addPoint(cells,hulls,points,p,idx){var lo=bsearch.lt(hulls,p,testPoint);var hi=bsearch.gt(hulls,p,testPoint);for(var i=lo;i<hi;++i){var hull=hulls[i];var lowerIds=hull.lowerIds;var m=lowerIds.length;while(m>1&&orient(points[lowerIds[m-2]],points[lowerIds[m-1]],p)>0){cells.push([lowerIds[m-1],lowerIds[m-2],idx]);m-=1}lowerIds.length=m;lowerIds.push(idx);var upperIds=hull.upperIds;var m=upperIds.length;while(m>1&&orient(points[upperIds[m-2]],points[upperIds[m-1]],p)<0){cells.push([upperIds[m-2],upperIds[m-1],idx]);m-=1}upperIds.length=m;upperIds.push(idx)}}function findSplit(hull,edge){var d;if(hull.a[0]<edge.a[0]){d=orient(hull.a,hull.b,edge.a)}else{d=orient(edge.b,edge.a,hull.a)}if(d){return d}if(edge.b[0]<hull.b[0]){d=orient(hull.a,hull.b,edge.b)}else{d=orient(edge.b,edge.a,hull.b)}return d||hull.idx-edge.idx}function splitHulls(hulls,points,event){var splitIdx=bsearch.le(hulls,event,findSplit);var hull=hulls[splitIdx];var upperIds=hull.upperIds;var x=upperIds[upperIds.length-1];hull.upperIds=[x];hulls.splice(splitIdx+1,0,new PartialHull(event.a,event.b,event.idx,[x],upperIds))}function mergeHulls(hulls,points,event){var tmp=event.a;event.a=event.b;event.b=tmp;var mergeIdx=bsearch.eq(hulls,event,findSplit);var upper=hulls[mergeIdx];var lower=hulls[mergeIdx-1];lower.upperIds=upper.upperIds;hulls.splice(mergeIdx,1)}function monotoneTriangulate(points,edges){var numPoints=points.length;var numEdges=edges.length;var events=[];for(var i=0;i<numPoints;++i){events.push(new Event(points[i],null,EVENT_POINT,i))}for(var i=0;i<numEdges;++i){var e=edges[i];var a=points[e[0]];var b=points[e[1]];if(a[0]<b[0]){events.push(new Event(a,b,EVENT_START,i),new Event(b,a,EVENT_END,i))}else if(a[0]>b[0]){events.push(new Event(b,a,EVENT_START,i),new Event(a,b,EVENT_END,i))}}events.sort(compareEvent);var minX=events[0].a[0]-(1+Math.abs(events[0].a[0]))*Math.pow(2,-52);var hull=[new PartialHull([minX,1],[minX,0],-1,[],[],[],[])];var cells=[];for(var i=0,numEvents=events.length;i<numEvents;++i){var event=events[i];var type=event.type;if(type===EVENT_POINT){addPoint(cells,hull,points,event.a,event.idx)}else if(type===EVENT_START){splitHulls(hull,points,event)}else{mergeHulls(hull,points,event)}}return cells}},{"binary-search-bounds":6,"robust-orientation":15}],11:[function(require,module,exports){"use strict";var bsearch=require("binary-search-bounds");module.exports=createTriangulation;function Triangulation(stars,edges){this.stars=stars;this.edges=edges}var proto=Triangulation.prototype;function removePair(list,j,k){for(var i=1,n=list.length;i<n;i+=2){if(list[i-1]===j&&list[i]===k){list[i-1]=list[n-2];list[i]=list[n-1];list.length=n-2;return}}}proto.isConstraint=function(){var e=[0,0];function compareLex(a,b){return a[0]-b[0]||a[1]-b[1]}return function(i,j){e[0]=Math.min(i,j);e[1]=Math.max(i,j);return bsearch.eq(this.edges,e,compareLex)>=0}}();proto.removeTriangle=function(i,j,k){var stars=this.stars;removePair(stars[i],j,k);removePair(stars[j],k,i);removePair(stars[k],i,j)};proto.addTriangle=function(i,j,k){var stars=this.stars;stars[i].push(j,k);stars[j].push(k,i);stars[k].push(i,j)};proto.opposite=function(j,i){var list=this.stars[i];for(var k=1,n=list.length;k<n;k+=2){if(list[k]===j){return list[k-1]}}return-1};proto.flip=function(i,j){var a=this.opposite(i,j);var b=this.opposite(j,i);this.removeTriangle(i,j,a);this.removeTriangle(j,i,b);this.addTriangle(i,b,a);this.addTriangle(j,a,b)};proto.edges=function(){var stars=this.stars;var result=[];for(var i=0,n=stars.length;i<n;++i){var list=stars[i];for(var j=0,m=list.length;j<m;j+=2){result.push([list[j],list[j+1]])}}return result};proto.cells=function(){var stars=this.stars;var result=[];for(var i=0,n=stars.length;i<n;++i){var list=stars[i];for(var j=0,m=list.length;j<m;j+=2){var s=list[j];var t=list[j+1];if(i<Math.min(s,t)){result.push([i,s,t])}}}return result};function createTriangulation(numVerts,edges){var stars=new Array(numVerts);for(var i=0;i<numVerts;++i){stars[i]=[]}return new Triangulation(stars,edges)}},{"binary-search-bounds":6}],12:[function(require,module,exports){(function(){"use strict";var use_int32=false;var use_xyz=false;var use_lines=true;var ClipperLib={};var isNode=false;if(typeof module!=="undefined"&&module.exports){module.exports=ClipperLib;isNode=true}else{if(typeof define==="function"&&define.amd){define(ClipperLib)}if(typeof document!=="undefined")window.ClipperLib=ClipperLib;else self["ClipperLib"]=ClipperLib}var navigator_appName;if(!isNode){var nav=navigator.userAgent.toString().toLowerCase();navigator_appName=navigator.appName}else{var nav="chrome";navigator_appName="Netscape"}var browser={};if(nav.indexOf("chrome")!=-1&&nav.indexOf("chromium")==-1)browser.chrome=1;else browser.chrome=0;if(nav.indexOf("chromium")!=-1)browser.chromium=1;else browser.chromium=0;if(nav.indexOf("safari")!=-1&&nav.indexOf("chrome")==-1&&nav.indexOf("chromium")==-1)browser.safari=1;else browser.safari=0;if(nav.indexOf("firefox")!=-1)browser.firefox=1;else browser.firefox=0;if(nav.indexOf("firefox/17")!=-1)browser.firefox17=1;else browser.firefox17=0;if(nav.indexOf("firefox/15")!=-1)browser.firefox15=1;else browser.firefox15=0;if(nav.indexOf("firefox/3")!=-1)browser.firefox3=1;else browser.firefox3=0;if(nav.indexOf("opera")!=-1)browser.opera=1;else browser.opera=0;if(nav.indexOf("msie 10")!=-1)browser.msie10=1;else browser.msie10=0;if(nav.indexOf("msie 9")!=-1)browser.msie9=1;else browser.msie9=0;if(nav.indexOf("msie 8")!=-1)browser.msie8=1;else browser.msie8=0;if(nav.indexOf("msie 7")!=-1)browser.msie7=1;else browser.msie7=0;if(nav.indexOf("msie ")!=-1)browser.msie=1;else browser.msie=0;ClipperLib.biginteger_used=null;var dbits;var canary=0xdeadbeefcafe;var j_lm=(canary&16777215)==15715070;function BigInteger(a,b,c){ClipperLib.biginteger_used=1;if(a!=null)if("number"==typeof a&&"undefined"==typeof b)this.fromInt(a);else if("number"==typeof a)this.fromNumber(a,b,c);else if(b==null&&"string"!=typeof a)this.fromString(a,256);else this.fromString(a,b)}function nbi(){return new BigInteger(null,undefined,undefined)}function am1(i,x,w,j,c,n){while(--n>=0){var v=x*this[i++]+w[j]+c;c=Math.floor(v/67108864);w[j++]=v&67108863}return c}function am2(i,x,w,j,c,n){var xl=x&32767,xh=x>>15;while(--n>=0){var l=this[i]&32767;var h=this[i++]>>15;var m=xh*l+h*xl;l=xl*l+((m&32767)<<15)+w[j]+(c&1073741823);c=(l>>>30)+(m>>>15)+xh*h+(c>>>30);w[j++]=l&1073741823}return c}function am3(i,x,w,j,c,n){var xl=x&16383,xh=x>>14;while(--n>=0){var l=this[i]&16383;var h=this[i++]>>14;var m=xh*l+h*xl;l=xl*l+((m&16383)<<14)+w[j]+c;c=(l>>28)+(m>>14)+xh*h;w[j++]=l&268435455}return c}if(j_lm&&navigator_appName=="Microsoft Internet Explorer"){BigInteger.prototype.am=am2;dbits=30}else if(j_lm&&navigator_appName!="Netscape"){BigInteger.prototype.am=am1;dbits=26}else{BigInteger.prototype.am=am3;dbits=28}BigInteger.prototype.DB=dbits;BigInteger.prototype.DM=(1<<dbits)-1;BigInteger.prototype.DV=1<<dbits;var BI_FP=52;BigInteger.prototype.FV=Math.pow(2,BI_FP);BigInteger.prototype.F1=BI_FP-dbits;BigInteger.prototype.F2=2*dbits-BI_FP;var BI_RM="0123456789abcdefghijklmnopqrstuvwxyz";var BI_RC=new Array;var rr,vv;rr="0".charCodeAt(0);for(vv=0;vv<=9;++vv)BI_RC[rr++]=vv;rr="a".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;rr="A".charCodeAt(0);for(vv=10;vv<36;++vv)BI_RC[rr++]=vv;function int2char(n){return BI_RM.charAt(n)}function intAt(s,i){var c=BI_RC[s.charCodeAt(i)];return c==null?-1:c}function bnpCopyTo(r){for(var i=this.t-1;i>=0;--i)r[i]=this[i];r.t=this.t;r.s=this.s}function bnpFromInt(x){this.t=1;this.s=x<0?-1:0;if(x>0)this[0]=x;else if(x<-1)this[0]=x+this.DV;else this.t=0}function nbv(i){var r=nbi();r.fromInt(i);return r}function bnpFromString(s,b){var k;if(b==16)k=4;else if(b==8)k=3;else if(b==256)k=8;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else{this.fromRadix(s,b);return}this.t=0;this.s=0;var i=s.length,mi=false,sh=0;while(--i>=0){var x=k==8?s[i]&255:intAt(s,i);if(x<0){if(s.charAt(i)=="-")mi=true;continue}mi=false;if(sh==0)this[this.t++]=x;else if(sh+k>this.DB){this[this.t-1]|=(x&(1<<this.DB-sh)-1)<<sh;this[this.t++]=x>>this.DB-sh}else this[this.t-1]|=x<<sh;sh+=k;if(sh>=this.DB)sh-=this.DB}if(k==8&&(s[0]&128)!=0){this.s=-1;if(sh>0)this[this.t-1]|=(1<<this.DB-sh)-1<<sh}this.clamp();if(mi)BigInteger.ZERO.subTo(this,this)}function bnpClamp(){var c=this.s&this.DM;while(this.t>0&&this[this.t-1]==c)--this.t}function bnToString(b){if(this.s<0)return"-"+this.negate().toString(b);var k;if(b==16)k=4;else if(b==8)k=3;else if(b==2)k=1;else if(b==32)k=5;else if(b==4)k=2;else return this.toRadix(b);var km=(1<<k)-1,d,m=false,r="",i=this.t;var p=this.DB-i*this.DB%k;if(i-->0){if(p<this.DB&&(d=this[i]>>p)>0){m=true;r=int2char(d)}while(i>=0){if(p<k){d=(this[i]&(1<<p)-1)<<k-p;d|=this[--i]>>(p+=this.DB-k)}else{d=this[i]>>(p-=k)&km;if(p<=0){p+=this.DB;--i}}if(d>0)m=true;if(m)r+=int2char(d)}}return m?r:"0"}function bnNegate(){var r=nbi();BigInteger.ZERO.subTo(this,r);return r}function bnAbs(){return this.s<0?this.negate():this}function bnCompareTo(a){var r=this.s-a.s;if(r!=0)return r;var i=this.t;r=i-a.t;if(r!=0)return this.s<0?-r:r;while(--i>=0)if((r=this[i]-a[i])!=0)return r;return 0}function nbits(x){var r=1,t;if((t=x>>>16)!=0){x=t;r+=16}if((t=x>>8)!=0){x=t;r+=8}if((t=x>>4)!=0){
x=t;r+=4}if((t=x>>2)!=0){x=t;r+=2}if((t=x>>1)!=0){x=t;r+=1}return r}function bnBitLength(){if(this.t<=0)return 0;return this.DB*(this.t-1)+nbits(this[this.t-1]^this.s&this.DM)}function bnpDLShiftTo(n,r){var i;for(i=this.t-1;i>=0;--i)r[i+n]=this[i];for(i=n-1;i>=0;--i)r[i]=0;r.t=this.t+n;r.s=this.s}function bnpDRShiftTo(n,r){for(var i=n;i<this.t;++i)r[i-n]=this[i];r.t=Math.max(this.t-n,0);r.s=this.s}function bnpLShiftTo(n,r){var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<cbs)-1;var ds=Math.floor(n/this.DB),c=this.s<<bs&this.DM,i;for(i=this.t-1;i>=0;--i){r[i+ds+1]=this[i]>>cbs|c;c=(this[i]&bm)<<bs}for(i=ds-1;i>=0;--i)r[i]=0;r[ds]=c;r.t=this.t+ds+1;r.s=this.s;r.clamp()}function bnpRShiftTo(n,r){r.s=this.s;var ds=Math.floor(n/this.DB);if(ds>=this.t){r.t=0;return}var bs=n%this.DB;var cbs=this.DB-bs;var bm=(1<<bs)-1;r[0]=this[ds]>>bs;for(var i=ds+1;i<this.t;++i){r[i-ds-1]|=(this[i]&bm)<<cbs;r[i-ds]=this[i]>>bs}if(bs>0)r[this.t-ds-1]|=(this.s&bm)<<cbs;r.t=this.t-ds;r.clamp()}function bnpSubTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]-a[i];r[i++]=c&this.DM;c>>=this.DB}if(a.t<this.t){c-=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB}c+=this.s}else{c+=this.s;while(i<a.t){c-=a[i];r[i++]=c&this.DM;c>>=this.DB}c-=a.s}r.s=c<0?-1:0;if(c<-1)r[i++]=this.DV+c;else if(c>0)r[i++]=c;r.t=i;r.clamp()}function bnpMultiplyTo(a,r){var x=this.abs(),y=a.abs();var i=x.t;r.t=i+y.t;while(--i>=0)r[i]=0;for(i=0;i<y.t;++i)r[i+x.t]=x.am(0,y[i],r,i,0,x.t);r.s=0;r.clamp();if(this.s!=a.s)BigInteger.ZERO.subTo(r,r)}function bnpSquareTo(r){var x=this.abs();var i=r.t=2*x.t;while(--i>=0)r[i]=0;for(i=0;i<x.t-1;++i){var c=x.am(i,x[i],r,2*i,0,1);if((r[i+x.t]+=x.am(i+1,2*x[i],r,2*i+1,c,x.t-i-1))>=x.DV){r[i+x.t]-=x.DV;r[i+x.t+1]=1}}if(r.t>0)r[r.t-1]+=x.am(i,x[i],r,2*i,0,1);r.s=0;r.clamp()}function bnpDivRemTo(m,q,r){var pm=m.abs();if(pm.t<=0)return;var pt=this.abs();if(pt.t<pm.t){if(q!=null)q.fromInt(0);if(r!=null)this.copyTo(r);return}if(r==null)r=nbi();var y=nbi(),ts=this.s,ms=m.s;var nsh=this.DB-nbits(pm[pm.t-1]);if(nsh>0){pm.lShiftTo(nsh,y);pt.lShiftTo(nsh,r)}else{pm.copyTo(y);pt.copyTo(r)}var ys=y.t;var y0=y[ys-1];if(y0==0)return;var yt=y0*(1<<this.F1)+(ys>1?y[ys-2]>>this.F2:0);var d1=this.FV/yt,d2=(1<<this.F1)/yt,e=1<<this.F2;var i=r.t,j=i-ys,t=q==null?nbi():q;y.dlShiftTo(j,t);if(r.compareTo(t)>=0){r[r.t++]=1;r.subTo(t,r)}BigInteger.ONE.dlShiftTo(ys,t);t.subTo(y,y);while(y.t<ys)y[y.t++]=0;while(--j>=0){var qd=r[--i]==y0?this.DM:Math.floor(r[i]*d1+(r[i-1]+e)*d2);if((r[i]+=y.am(0,qd,r,j,0,ys))<qd){y.dlShiftTo(j,t);r.subTo(t,r);while(r[i]<--qd)r.subTo(t,r)}}if(q!=null){r.drShiftTo(ys,q);if(ts!=ms)BigInteger.ZERO.subTo(q,q)}r.t=ys;r.clamp();if(nsh>0)r.rShiftTo(nsh,r);if(ts<0)BigInteger.ZERO.subTo(r,r)}function bnMod(a){var r=nbi();this.abs().divRemTo(a,null,r);if(this.s<0&&r.compareTo(BigInteger.ZERO)>0)a.subTo(r,r);return r}function Classic(m){this.m=m}function cConvert(x){if(x.s<0||x.compareTo(this.m)>=0)return x.mod(this.m);else return x}function cRevert(x){return x}function cReduce(x){x.divRemTo(this.m,null,x)}function cMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}function cSqrTo(x,r){x.squareTo(r);this.reduce(r)}Classic.prototype.convert=cConvert;Classic.prototype.revert=cRevert;Classic.prototype.reduce=cReduce;Classic.prototype.mulTo=cMulTo;Classic.prototype.sqrTo=cSqrTo;function bnpInvDigit(){if(this.t<1)return 0;var x=this[0];if((x&1)==0)return 0;var y=x&3;y=y*(2-(x&15)*y)&15;y=y*(2-(x&255)*y)&255;y=y*(2-((x&65535)*y&65535))&65535;y=y*(2-x*y%this.DV)%this.DV;return y>0?this.DV-y:-y}function Montgomery(m){this.m=m;this.mp=m.invDigit();this.mpl=this.mp&32767;this.mph=this.mp>>15;this.um=(1<<m.DB-15)-1;this.mt2=2*m.t}function montConvert(x){var r=nbi();x.abs().dlShiftTo(this.m.t,r);r.divRemTo(this.m,null,r);if(x.s<0&&r.compareTo(BigInteger.ZERO)>0)this.m.subTo(r,r);return r}function montRevert(x){var r=nbi();x.copyTo(r);this.reduce(r);return r}function montReduce(x){while(x.t<=this.mt2)x[x.t++]=0;for(var i=0;i<this.m.t;++i){var j=x[i]&32767;var u0=j*this.mpl+((j*this.mph+(x[i]>>15)*this.mpl&this.um)<<15)&x.DM;j=i+this.m.t;x[j]+=this.m.am(0,u0,x,i,0,this.m.t);while(x[j]>=x.DV){x[j]-=x.DV;x[++j]++}}x.clamp();x.drShiftTo(this.m.t,x);if(x.compareTo(this.m)>=0)x.subTo(this.m,x)}function montSqrTo(x,r){x.squareTo(r);this.reduce(r)}function montMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}Montgomery.prototype.convert=montConvert;Montgomery.prototype.revert=montRevert;Montgomery.prototype.reduce=montReduce;Montgomery.prototype.mulTo=montMulTo;Montgomery.prototype.sqrTo=montSqrTo;function bnpIsEven(){return(this.t>0?this[0]&1:this.s)==0}function bnpExp(e,z){if(e>4294967295||e<1)return BigInteger.ONE;var r=nbi(),r2=nbi(),g=z.convert(this),i=nbits(e)-1;g.copyTo(r);while(--i>=0){z.sqrTo(r,r2);if((e&1<<i)>0)z.mulTo(r2,g,r);else{var t=r;r=r2;r2=t}}return z.revert(r)}function bnModPowInt(e,m){var z;if(e<256||m.isEven())z=new Classic(m);else z=new Montgomery(m);return this.exp(e,z)}BigInteger.prototype.copyTo=bnpCopyTo;BigInteger.prototype.fromInt=bnpFromInt;BigInteger.prototype.fromString=bnpFromString;BigInteger.prototype.clamp=bnpClamp;BigInteger.prototype.dlShiftTo=bnpDLShiftTo;BigInteger.prototype.drShiftTo=bnpDRShiftTo;BigInteger.prototype.lShiftTo=bnpLShiftTo;BigInteger.prototype.rShiftTo=bnpRShiftTo;BigInteger.prototype.subTo=bnpSubTo;BigInteger.prototype.multiplyTo=bnpMultiplyTo;BigInteger.prototype.squareTo=bnpSquareTo;BigInteger.prototype.divRemTo=bnpDivRemTo;BigInteger.prototype.invDigit=bnpInvDigit;BigInteger.prototype.isEven=bnpIsEven;BigInteger.prototype.exp=bnpExp;BigInteger.prototype.toString=bnToString;BigInteger.prototype.negate=bnNegate;BigInteger.prototype.abs=bnAbs;BigInteger.prototype.compareTo=bnCompareTo;BigInteger.prototype.bitLength=bnBitLength;BigInteger.prototype.mod=bnMod;BigInteger.prototype.modPowInt=bnModPowInt;BigInteger.ZERO=nbv(0);BigInteger.ONE=nbv(1);function bnClone(){var r=nbi();this.copyTo(r);return r}function bnIntValue(){if(this.s<0){if(this.t==1)return this[0]-this.DV;else if(this.t==0)return-1}else if(this.t==1)return this[0];else if(this.t==0)return 0;return(this[1]&(1<<32-this.DB)-1)<<this.DB|this[0]}function bnByteValue(){return this.t==0?this.s:this[0]<<24>>24}function bnShortValue(){return this.t==0?this.s:this[0]<<16>>16}function bnpChunkSize(r){return Math.floor(Math.LN2*this.DB/Math.log(r))}function bnSigNum(){if(this.s<0)return-1;else if(this.t<=0||this.t==1&&this[0]<=0)return 0;else return 1}function bnpToRadix(b){if(b==null)b=10;if(this.signum()==0||b<2||b>36)return"0";var cs=this.chunkSize(b);var a=Math.pow(b,cs);var d=nbv(a),y=nbi(),z=nbi(),r="";this.divRemTo(d,y,z);while(y.signum()>0){r=(a+z.intValue()).toString(b).substr(1)+r;y.divRemTo(d,y,z)}return z.intValue().toString(b)+r}function bnpFromRadix(s,b){this.fromInt(0);if(b==null)b=10;var cs=this.chunkSize(b);var d=Math.pow(b,cs),mi=false,j=0,w=0;for(var i=0;i<s.length;++i){var x=intAt(s,i);if(x<0){if(s.charAt(i)=="-"&&this.signum()==0)mi=true;continue}w=b*w+x;if(++j>=cs){this.dMultiply(d);this.dAddOffset(w,0);j=0;w=0}}if(j>0){this.dMultiply(Math.pow(b,j));this.dAddOffset(w,0)}if(mi)BigInteger.ZERO.subTo(this,this)}function bnpFromNumber(a,b,c){if("number"==typeof b){if(a<2)this.fromInt(1);else{this.fromNumber(a,c);if(!this.testBit(a-1))this.bitwiseTo(BigInteger.ONE.shiftLeft(a-1),op_or,this);if(this.isEven())this.dAddOffset(1,0);while(!this.isProbablePrime(b)){this.dAddOffset(2,0);if(this.bitLength()>a)this.subTo(BigInteger.ONE.shiftLeft(a-1),this)}}}else{var x=new Array,t=a&7;x.length=(a>>3)+1;b.nextBytes(x);if(t>0)x[0]&=(1<<t)-1;else x[0]=0;this.fromString(x,256)}}function bnToByteArray(){var i=this.t,r=new Array;r[0]=this.s;var p=this.DB-i*this.DB%8,d,k=0;if(i-->0){if(p<this.DB&&(d=this[i]>>p)!=(this.s&this.DM)>>p)r[k++]=d|this.s<<this.DB-p;while(i>=0){if(p<8){d=(this[i]&(1<<p)-1)<<8-p;d|=this[--i]>>(p+=this.DB-8)}else{d=this[i]>>(p-=8)&255;if(p<=0){p+=this.DB;--i}}if((d&128)!=0)d|=-256;if(k==0&&(this.s&128)!=(d&128))++k;if(k>0||d!=this.s)r[k++]=d}}return r}function bnEquals(a){return this.compareTo(a)==0}function bnMin(a){return this.compareTo(a)<0?this:a}function bnMax(a){return this.compareTo(a)>0?this:a}function bnpBitwiseTo(a,op,r){var i,f,m=Math.min(a.t,this.t);for(i=0;i<m;++i)r[i]=op(this[i],a[i]);if(a.t<this.t){f=a.s&this.DM;for(i=m;i<this.t;++i)r[i]=op(this[i],f);r.t=this.t}else{f=this.s&this.DM;for(i=m;i<a.t;++i)r[i]=op(f,a[i]);r.t=a.t}r.s=op(this.s,a.s);r.clamp()}function op_and(x,y){return x&y}function bnAnd(a){var r=nbi();this.bitwiseTo(a,op_and,r);return r}function op_or(x,y){return x|y}function bnOr(a){var r=nbi();this.bitwiseTo(a,op_or,r);return r}function op_xor(x,y){return x^y}function bnXor(a){var r=nbi();this.bitwiseTo(a,op_xor,r);return r}function op_andnot(x,y){return x&~y}function bnAndNot(a){var r=nbi();this.bitwiseTo(a,op_andnot,r);return r}function bnNot(){var r=nbi();for(var i=0;i<this.t;++i)r[i]=this.DM&~this[i];r.t=this.t;r.s=~this.s;return r}function bnShiftLeft(n){var r=nbi();if(n<0)this.rShiftTo(-n,r);else this.lShiftTo(n,r);return r}function bnShiftRight(n){var r=nbi();if(n<0)this.lShiftTo(-n,r);else this.rShiftTo(n,r);return r}function lbit(x){if(x==0)return-1;var r=0;if((x&65535)==0){x>>=16;r+=16}if((x&255)==0){x>>=8;r+=8}if((x&15)==0){x>>=4;r+=4}if((x&3)==0){x>>=2;r+=2}if((x&1)==0)++r;return r}function bnGetLowestSetBit(){for(var i=0;i<this.t;++i)if(this[i]!=0)return i*this.DB+lbit(this[i]);if(this.s<0)return this.t*this.DB;return-1}function cbit(x){var r=0;while(x!=0){x&=x-1;++r}return r}function bnBitCount(){var r=0,x=this.s&this.DM;for(var i=0;i<this.t;++i)r+=cbit(this[i]^x);return r}function bnTestBit(n){var j=Math.floor(n/this.DB);if(j>=this.t)return this.s!=0;return(this[j]&1<<n%this.DB)!=0}function bnpChangeBit(n,op){var r=BigInteger.ONE.shiftLeft(n);this.bitwiseTo(r,op,r);return r}function bnSetBit(n){return this.changeBit(n,op_or)}function bnClearBit(n){return this.changeBit(n,op_andnot)}function bnFlipBit(n){return this.changeBit(n,op_xor)}function bnpAddTo(a,r){var i=0,c=0,m=Math.min(a.t,this.t);while(i<m){c+=this[i]+a[i];r[i++]=c&this.DM;c>>=this.DB}if(a.t<this.t){c+=a.s;while(i<this.t){c+=this[i];r[i++]=c&this.DM;c>>=this.DB}c+=this.s}else{c+=this.s;while(i<a.t){c+=a[i];r[i++]=c&this.DM;c>>=this.DB}c+=a.s}r.s=c<0?-1:0;if(c>0)r[i++]=c;else if(c<-1)r[i++]=this.DV+c;r.t=i;r.clamp()}function bnAdd(a){var r=nbi();this.addTo(a,r);return r}function bnSubtract(a){var r=nbi();this.subTo(a,r);return r}function bnMultiply(a){var r=nbi();this.multiplyTo(a,r);return r}function bnSquare(){var r=nbi();this.squareTo(r);return r}function bnDivide(a){var r=nbi();this.divRemTo(a,r,null);return r}function bnRemainder(a){var r=nbi();this.divRemTo(a,null,r);return r}function bnDivideAndRemainder(a){var q=nbi(),r=nbi();this.divRemTo(a,q,r);return new Array(q,r)}function bnpDMultiply(n){this[this.t]=this.am(0,n-1,this,0,0,this.t);++this.t;this.clamp()}function bnpDAddOffset(n,w){if(n==0)return;while(this.t<=w)this[this.t++]=0;this[w]+=n;while(this[w]>=this.DV){this[w]-=this.DV;if(++w>=this.t)this[this.t++]=0;++this[w]}}function NullExp(){}function nNop(x){return x}function nMulTo(x,y,r){x.multiplyTo(y,r)}function nSqrTo(x,r){x.squareTo(r)}NullExp.prototype.convert=nNop;NullExp.prototype.revert=nNop;NullExp.prototype.mulTo=nMulTo;NullExp.prototype.sqrTo=nSqrTo;function bnPow(e){return this.exp(e,new NullExp)}function bnpMultiplyLowerTo(a,n,r){var i=Math.min(this.t+a.t,n);r.s=0;r.t=i;while(i>0)r[--i]=0;var j;for(j=r.t-this.t;i<j;++i)r[i+this.t]=this.am(0,a[i],r,i,0,this.t);for(j=Math.min(a.t,n);i<j;++i)this.am(0,a[i],r,i,0,n-i);r.clamp()}function bnpMultiplyUpperTo(a,n,r){--n;var i=r.t=this.t+a.t-n;r.s=0;while(--i>=0)r[i]=0;for(i=Math.max(n-this.t,0);i<a.t;++i)r[this.t+i-n]=this.am(n-i,a[i],r,0,0,this.t+i-n);r.clamp();r.drShiftTo(1,r)}function Barrett(m){this.r2=nbi();this.q3=nbi();BigInteger.ONE.dlShiftTo(2*m.t,this.r2);this.mu=this.r2.divide(m);this.m=m}function barrettConvert(x){if(x.s<0||x.t>2*this.m.t)return x.mod(this.m);else if(x.compareTo(this.m)<0)return x;else{var r=nbi();x.copyTo(r);this.reduce(r);return r}}function barrettRevert(x){return x}function barrettReduce(x){x.drShiftTo(this.m.t-1,this.r2);if(x.t>this.m.t+1){x.t=this.m.t+1;x.clamp()}this.mu.multiplyUpperTo(this.r2,this.m.t+1,this.q3);this.m.multiplyLowerTo(this.q3,this.m.t+1,this.r2);while(x.compareTo(this.r2)<0)x.dAddOffset(1,this.m.t+1);x.subTo(this.r2,x);while(x.compareTo(this.m)>=0)x.subTo(this.m,x)}function barrettSqrTo(x,r){x.squareTo(r);this.reduce(r)}function barrettMulTo(x,y,r){x.multiplyTo(y,r);this.reduce(r)}Barrett.prototype.convert=barrettConvert;Barrett.prototype.revert=barrettRevert;Barrett.prototype.reduce=barrettReduce;Barrett.prototype.mulTo=barrettMulTo;Barrett.prototype.sqrTo=barrettSqrTo;function bnModPow(e,m){var i=e.bitLength(),k,r=nbv(1),z;if(i<=0)return r;else if(i<18)k=1;else if(i<48)k=3;else if(i<144)k=4;else if(i<768)k=5;else k=6;if(i<8)z=new Classic(m);else if(m.isEven())z=new Barrett(m);else z=new Montgomery(m);var g=new Array,n=3,k1=k-1,km=(1<<k)-1;g[1]=z.convert(this);if(k>1){var g2=nbi();z.sqrTo(g[1],g2);while(n<=km){g[n]=nbi();z.mulTo(g2,g[n-2],g[n]);n+=2}}var j=e.t-1,w,is1=true,r2=nbi(),t;i=nbits(e[j])-1;while(j>=0){if(i>=k1)w=e[j]>>i-k1&km;else{w=(e[j]&(1<<i+1)-1)<<k1-i;if(j>0)w|=e[j-1]>>this.DB+i-k1}n=k;while((w&1)==0){w>>=1;--n}if((i-=n)<0){i+=this.DB;--j}if(is1){g[w].copyTo(r);is1=false}else{while(n>1){z.sqrTo(r,r2);z.sqrTo(r2,r);n-=2}if(n>0)z.sqrTo(r,r2);else{t=r;r=r2;r2=t}z.mulTo(r2,g[w],r)}while(j>=0&&(e[j]&1<<i)==0){z.sqrTo(r,r2);t=r;r=r2;r2=t;if(--i<0){i=this.DB-1;--j}}}return z.revert(r)}function bnGCD(a){var x=this.s<0?this.negate():this.clone();var y=a.s<0?a.negate():a.clone();if(x.compareTo(y)<0){var t=x;x=y;y=t}var i=x.getLowestSetBit(),g=y.getLowestSetBit();if(g<0)return x;if(i<g)g=i;if(g>0){x.rShiftTo(g,x);y.rShiftTo(g,y)}while(x.signum()>0){if((i=x.getLowestSetBit())>0)x.rShiftTo(i,x);if((i=y.getLowestSetBit())>0)y.rShiftTo(i,y);if(x.compareTo(y)>=0){x.subTo(y,x);x.rShiftTo(1,x)}else{y.subTo(x,y);y.rShiftTo(1,y)}}if(g>0)y.lShiftTo(g,y);return y}function bnpModInt(n){if(n<=0)return 0;var d=this.DV%n,r=this.s<0?n-1:0;if(this.t>0)if(d==0)r=this[0]%n;else for(var i=this.t-1;i>=0;--i)r=(d*r+this[i])%n;return r}function bnModInverse(m){var ac=m.isEven();if(this.isEven()&&ac||m.signum()==0)return BigInteger.ZERO;var u=m.clone(),v=this.clone();var a=nbv(1),b=nbv(0),c=nbv(0),d=nbv(1);while(u.signum()!=0){while(u.isEven()){u.rShiftTo(1,u);if(ac){if(!a.isEven()||!b.isEven()){a.addTo(this,a);b.subTo(m,b)}a.rShiftTo(1,a)}else if(!b.isEven())b.subTo(m,b);b.rShiftTo(1,b)}while(v.isEven()){v.rShiftTo(1,v);if(ac){if(!c.isEven()||!d.isEven()){c.addTo(this,c);d.subTo(m,d)}c.rShiftTo(1,c)}else if(!d.isEven())d.subTo(m,d);d.rShiftTo(1,d)}if(u.compareTo(v)>=0){u.subTo(v,u);if(ac)a.subTo(c,a);b.subTo(d,b)}else{v.subTo(u,v);if(ac)c.subTo(a,c);d.subTo(b,d)}}if(v.compareTo(BigInteger.ONE)!=0)return BigInteger.ZERO;if(d.compareTo(m)>=0)return d.subtract(m);if(d.signum()<0)d.addTo(m,d);else return d;if(d.signum()<0)return d.add(m);else return d}var lowprimes=[2,3,5,7,11,13,17,19,23,29,31,37,41,43,47,53,59,61,67,71,73,79,83,89,97,101,103,107,109,113,127,131,137,139,149,151,157,163,167,173,179,181,191,193,197,199,211,223,227,229,233,239,241,251,257,263,269,271,277,281,283,293,307,311,313,317,331,337,347,349,353,359,367,373,379,383,389,397,401,409,419,421,431,433,439,443,449,457,461,463,467,479,487,491,499,503,509,521,523,541,547,557,563,569,571,577,587,593,599,601,607,613,617,619,631,641,643,647,653,659,661,673,677,683,691,701,709,719,727,733,739,743,751,757,761,769,773,787,797,809,811,821,823,827,829,839,853,857,859,863,877,881,883,887,907,911,919,929,937,941,947,953,967,971,977,983,991,997];var lplim=(1<<26)/lowprimes[lowprimes.length-1];function bnIsProbablePrime(t){var i,x=this.abs();if(x.t==1&&x[0]<=lowprimes[lowprimes.length-1]){for(i=0;i<lowprimes.length;++i)if(x[0]==lowprimes[i])return true;return false}if(x.isEven())return false;i=1;while(i<lowprimes.length){var m=lowprimes[i],j=i+1;while(j<lowprimes.length&&m<lplim)m*=lowprimes[j++];m=x.modInt(m);while(i<j)if(m%lowprimes[i++]==0)return false}return x.millerRabin(t)}function bnpMillerRabin(t){var n1=this.subtract(BigInteger.ONE);var k=n1.getLowestSetBit();if(k<=0)return false;var r=n1.shiftRight(k);t=t+1>>1;if(t>lowprimes.length)t=lowprimes.length;var a=nbi();for(var i=0;i<t;++i){a.fromInt(lowprimes[Math.floor(Math.random()*lowprimes.length)]);var y=a.modPow(r,this);if(y.compareTo(BigInteger.ONE)!=0&&y.compareTo(n1)!=0){var j=1;while(j++<k&&y.compareTo(n1)!=0){y=y.modPowInt(2,this);if(y.compareTo(BigInteger.ONE)==0)return false}if(y.compareTo(n1)!=0)return false}}return true}BigInteger.prototype.chunkSize=bnpChunkSize;BigInteger.prototype.toRadix=bnpToRadix;BigInteger.prototype.fromRadix=bnpFromRadix;BigInteger.prototype.fromNumber=bnpFromNumber;BigInteger.prototype.bitwiseTo=bnpBitwiseTo;BigInteger.prototype.changeBit=bnpChangeBit;BigInteger.prototype.addTo=bnpAddTo;BigInteger.prototype.dMultiply=bnpDMultiply;BigInteger.prototype.dAddOffset=bnpDAddOffset;BigInteger.prototype.multiplyLowerTo=bnpMultiplyLowerTo;BigInteger.prototype.multiplyUpperTo=bnpMultiplyUpperTo;BigInteger.prototype.modInt=bnpModInt;BigInteger.prototype.millerRabin=bnpMillerRabin;BigInteger.prototype.clone=bnClone;BigInteger.prototype.intValue=bnIntValue;BigInteger.prototype.byteValue=bnByteValue;BigInteger.prototype.shortValue=bnShortValue;BigInteger.prototype.signum=bnSigNum;BigInteger.prototype.toByteArray=bnToByteArray;BigInteger.prototype.equals=bnEquals;BigInteger.prototype.min=bnMin;BigInteger.prototype.max=bnMax;BigInteger.prototype.and=bnAnd;BigInteger.prototype.or=bnOr;BigInteger.prototype.xor=bnXor;BigInteger.prototype.andNot=bnAndNot;BigInteger.prototype.not=bnNot;BigInteger.prototype.shiftLeft=bnShiftLeft;BigInteger.prototype.shiftRight=bnShiftRight;BigInteger.prototype.getLowestSetBit=bnGetLowestSetBit;BigInteger.prototype.bitCount=bnBitCount;BigInteger.prototype.testBit=bnTestBit;BigInteger.prototype.setBit=bnSetBit;BigInteger.prototype.clearBit=bnClearBit;BigInteger.prototype.flipBit=bnFlipBit;BigInteger.prototype.add=bnAdd;BigInteger.prototype.subtract=bnSubtract;BigInteger.prototype.multiply=bnMultiply;BigInteger.prototype.divide=bnDivide;BigInteger.prototype.remainder=bnRemainder;BigInteger.prototype.divideAndRemainder=bnDivideAndRemainder;BigInteger.prototype.modPow=bnModPow;BigInteger.prototype.modInverse=bnModInverse;BigInteger.prototype.pow=bnPow;BigInteger.prototype.gcd=bnGCD;BigInteger.prototype.isProbablePrime=bnIsProbablePrime;BigInteger.prototype.square=bnSquare;var Int128=BigInteger;Int128.prototype.IsNegative=function(){if(this.compareTo(Int128.ZERO)==-1)return true;else return false};Int128.op_Equality=function(val1,val2){if(val1.compareTo(val2)==0)return true;else return false};Int128.op_Inequality=function(val1,val2){if(val1.compareTo(val2)!=0)return true;else return false};Int128.op_GreaterThan=function(val1,val2){if(val1.compareTo(val2)>0)return true;else return false};Int128.op_LessThan=function(val1,val2){if(val1.compareTo(val2)<0)return true;else return false};Int128.op_Addition=function(lhs,rhs){return new Int128(lhs).add(new Int128(rhs))};Int128.op_Subtraction=function(lhs,rhs){return new Int128(lhs).subtract(new Int128(rhs))};Int128.Int128Mul=function(lhs,rhs){return new Int128(lhs).multiply(new Int128(rhs))};Int128.op_Division=function(lhs,rhs){return lhs.divide(rhs)};Int128.prototype.ToDouble=function(){return parseFloat(this.toString())};var Inherit=function(ce,ce2){var p;if(typeof Object.getOwnPropertyNames=="undefined"){for(p in ce2.prototype)if(typeof ce.prototype[p]=="undefined"||ce.prototype[p]==Object.prototype[p])ce.prototype[p]=ce2.prototype[p];for(p in ce2)if(typeof ce[p]=="undefined")ce[p]=ce2[p];ce.$baseCtor=ce2}else{var props=Object.getOwnPropertyNames(ce2.prototype);for(var i=0;i<props.length;i++)if(typeof Object.getOwnPropertyDescriptor(ce.prototype,props[i])=="undefined")Object.defineProperty(ce.prototype,props[i],Object.getOwnPropertyDescriptor(ce2.prototype,props[i]));for(p in ce2)if(typeof ce[p]=="undefined")ce[p]=ce2[p];ce.$baseCtor=ce2}};ClipperLib.Path=function(){return[]};ClipperLib.Paths=function(){return[]};ClipperLib.DoublePoint=function(){var a=arguments;this.X=0;this.Y=0;if(a.length==1){this.X=a[0].X;this.Y=a[0].Y}else if(a.length==2){this.X=a[0];this.Y=a[1]}};ClipperLib.DoublePoint0=function(){this.X=0;this.Y=0};ClipperLib.DoublePoint1=function(dp){this.X=dp.X;this.Y=dp.Y};ClipperLib.DoublePoint2=function(x,y){this.X=x;this.Y=y};ClipperLib.PolyNode=function(){this.m_Parent=null;this.m_polygon=new ClipperLib.Path;this.m_Index=0;this.m_jointype=0;this.m_endtype=0;this.m_Childs=[];this.IsOpen=false};ClipperLib.PolyNode.prototype.IsHoleNode=function(){var result=true;var node=this.m_Parent;while(node!==null){result=!result;node=node.m_Parent}return result};ClipperLib.PolyNode.prototype.ChildCount=function(){return this.m_Childs.length};ClipperLib.PolyNode.prototype.Contour=function(){return this.m_polygon};ClipperLib.PolyNode.prototype.AddChild=function(Child){var cnt=this.m_Childs.length;this.m_Childs.push(Child);Child.m_Parent=this;Child.m_Index=cnt};ClipperLib.PolyNode.prototype.GetNext=function(){if(this.m_Childs.length>0)return this.m_Childs[0];else return this.GetNextSiblingUp()};ClipperLib.PolyNode.prototype.GetNextSiblingUp=function(){if(this.m_Parent===null)return null;else if(this.m_Index==this.m_Parent.m_Childs.length-1)return this.m_Parent.GetNextSiblingUp();else return this.m_Parent.m_Childs[this.m_Index+1]};ClipperLib.PolyNode.prototype.Childs=function(){return this.m_Childs};ClipperLib.PolyNode.prototype.Parent=function(){return this.m_Parent};ClipperLib.PolyNode.prototype.IsHole=function(){return this.IsHoleNode()};ClipperLib.PolyTree=function(){this.m_AllPolys=[];ClipperLib.PolyNode.call(this)};ClipperLib.PolyTree.prototype.Clear=function(){for(var i=0,ilen=this.m_AllPolys.length;i<ilen;i++)this.m_AllPolys[i]=null;this.m_AllPolys.length=0;this.m_Childs.length=0};ClipperLib.PolyTree.prototype.GetFirst=function(){if(this.m_Childs.length>0)return this.m_Childs[0];else return null};ClipperLib.PolyTree.prototype.Total=function(){var result=this.m_AllPolys.length;if(result>0&&this.m_Childs[0]!=this.m_AllPolys[0])result--;return result};Inherit(ClipperLib.PolyTree,ClipperLib.PolyNode);ClipperLib.Math_Abs_Int64=ClipperLib.Math_Abs_Int32=ClipperLib.Math_Abs_Double=function(a){return Math.abs(a)};ClipperLib.Math_Max_Int32_Int32=function(a,b){return Math.max(a,b)};if(browser.msie||browser.opera||browser.safari)ClipperLib.Cast_Int32=function(a){return a|0};else ClipperLib.Cast_Int32=function(a){return~~a};if(browser.chrome)ClipperLib.Cast_Int64=function(a){if(a<-2147483648||a>2147483647)return a<0?Math.ceil(a):Math.floor(a);else return~~a};else if(browser.firefox&&typeof Number.toInteger=="function")ClipperLib.Cast_Int64=function(a){return Number.toInteger(a)};else if(browser.msie7||browser.msie8)ClipperLib.Cast_Int64=function(a){return parseInt(a,10)};else if(browser.msie)ClipperLib.Cast_Int64=function(a){if(a<-2147483648||a>2147483647)return a<0?Math.ceil(a):Math.floor(a);return a|0};else ClipperLib.Cast_Int64=function(a){return a<0?Math.ceil(a):Math.floor(a)};ClipperLib.Clear=function(a){a.length=0};ClipperLib.PI=3.141592653589793;ClipperLib.PI2=2*3.141592653589793;ClipperLib.IntPoint=function(){var a=arguments,alen=a.length;this.X=0;this.Y=0;if(use_xyz){this.Z=0;if(alen==3){this.X=a[0];this.Y=a[1];this.Z=a[2]}else if(alen==2){this.X=a[0];this.Y=a[1];this.Z=0}else if(alen==1){if(a[0]instanceof ClipperLib.DoublePoint){var dp=a[0];this.X=ClipperLib.Clipper.Round(dp.X);this.Y=ClipperLib.Clipper.Round(dp.Y);this.Z=0}else{var pt=a[0];if(typeof pt.Z=="undefined")pt.Z=0;this.X=pt.X;this.Y=pt.Y;this.Z=pt.Z}}else{this.X=0;this.Y=0;this.Z=0}}else{if(alen==2){this.X=a[0];this.Y=a[1]}else if(alen==1){if(a[0]instanceof ClipperLib.DoublePoint){var dp=a[0];this.X=ClipperLib.Clipper.Round(dp.X);this.Y=ClipperLib.Clipper.Round(dp.Y)}else{var pt=a[0];this.X=pt.X;this.Y=pt.Y}}else{this.X=0;this.Y=0}}};ClipperLib.IntPoint.op_Equality=function(a,b){return a.X==b.X&&a.Y==b.Y};ClipperLib.IntPoint.op_Inequality=function(a,b){return a.X!=b.X||a.Y!=b.Y};if(use_xyz){ClipperLib.IntPoint0=function(){this.X=0;this.Y=0;this.Z=0};ClipperLib.IntPoint1=function(pt){this.X=pt.X;this.Y=pt.Y;this.Z=pt.Z};ClipperLib.IntPoint1dp=function(dp){this.X=ClipperLib.Clipper.Round(dp.X);this.Y=ClipperLib.Clipper.Round(dp.Y);this.Z=0};ClipperLib.IntPoint2=function(x,y){this.X=x;this.Y=y;this.Z=0};ClipperLib.IntPoint3=function(x,y,z){this.X=x;this.Y=y;this.Z=z}}else{ClipperLib.IntPoint0=function(){this.X=0;this.Y=0};ClipperLib.IntPoint1=function(pt){this.X=pt.X;this.Y=pt.Y};ClipperLib.IntPoint1dp=function(dp){this.X=ClipperLib.Clipper.Round(dp.X);this.Y=ClipperLib.Clipper.Round(dp.Y)};ClipperLib.IntPoint2=function(x,y){this.X=x;this.Y=y}}ClipperLib.IntRect=function(){var a=arguments,alen=a.length;if(alen==4){this.left=a[0];this.top=a[1];this.right=a[2];this.bottom=a[3]}else if(alen==1){this.left=ir.left;this.top=ir.top;this.right=ir.right;this.bottom=ir.bottom}else{this.left=0;this.top=0;this.right=0;this.bottom=0}};ClipperLib.IntRect0=function(){this.left=0;this.top=0;this.right=0;this.bottom=0};ClipperLib.IntRect1=function(ir){this.left=ir.left;this.top=ir.top;this.right=ir.right;this.bottom=ir.bottom};ClipperLib.IntRect4=function(l,t,r,b){this.left=l;this.top=t;this.right=r;this.bottom=b};ClipperLib.ClipType={ctIntersection:0,ctUnion:1,ctDifference:2,ctXor:3};ClipperLib.PolyType={ptSubject:0,ptClip:1};ClipperLib.PolyFillType={pftEvenOdd:0,pftNonZero:1,pftPositive:2,pftNegative:3};ClipperLib.JoinType={jtSquare:0,jtRound:1,jtMiter:2};ClipperLib.EndType={etOpenSquare:0,etOpenRound:1,etOpenButt:2,etClosedLine:3,etClosedPolygon:4};ClipperLib.EdgeSide={esLeft:0,esRight:1};ClipperLib.Direction={dRightToLeft:0,dLeftToRight:1};ClipperLib.TEdge=function(){this.Bot=new ClipperLib.IntPoint;this.Curr=new ClipperLib.IntPoint;this.Top=new ClipperLib.IntPoint;this.Delta=new ClipperLib.IntPoint;this.Dx=0;this.PolyTyp=ClipperLib.PolyType.ptSubject;this.Side=ClipperLib.EdgeSide.esLeft;this.WindDelta=0;this.WindCnt=0;this.WindCnt2=0;this.OutIdx=0;this.Next=null;this.Prev=null;this.NextInLML=null;this.NextInAEL=null;this.PrevInAEL=null;this.NextInSEL=null;this.PrevInSEL=null};ClipperLib.IntersectNode=function(){this.Edge1=null;this.Edge2=null;this.Pt=new ClipperLib.IntPoint};ClipperLib.MyIntersectNodeSort=function(){};ClipperLib.MyIntersectNodeSort.Compare=function(node1,node2){var i=node2.Pt.Y-node1.Pt.Y;if(i>0)return 1;else if(i<0)return-1;else return 0};ClipperLib.LocalMinima=function(){this.Y=0;this.LeftBound=null;this.RightBound=null;this.Next=null};ClipperLib.Scanbeam=function(){this.Y=0;this.Next=null};ClipperLib.OutRec=function(){this.Idx=0;this.IsHole=false;this.IsOpen=false;this.FirstLeft=null;this.Pts=null;this.BottomPt=null;this.PolyNode=null};ClipperLib.OutPt=function(){this.Idx=0;this.Pt=new ClipperLib.IntPoint;this.Next=null;this.Prev=null};ClipperLib.Join=function(){this.OutPt1=null;this.OutPt2=null;this.OffPt=new ClipperLib.IntPoint};ClipperLib.ClipperBase=function(){this.m_MinimaList=null;this.m_CurrentLM=null;this.m_edges=new Array;this.m_UseFullRange=false;this.m_HasOpenPaths=false;this.PreserveCollinear=false;this.m_MinimaList=null;this.m_CurrentLM=null;this.m_UseFullRange=false;this.m_HasOpenPaths=false};ClipperLib.ClipperBase.horizontal=-9007199254740992;ClipperLib.ClipperBase.Skip=-2;ClipperLib.ClipperBase.Unassigned=-1;ClipperLib.ClipperBase.tolerance=1e-20;if(use_int32){ClipperLib.ClipperBase.loRange=32767;ClipperLib.ClipperBase.hiRange=32767}else{ClipperLib.ClipperBase.loRange=47453132;ClipperLib.ClipperBase.hiRange=0xfffffffffffff}ClipperLib.ClipperBase.near_zero=function(val){return val>-ClipperLib.ClipperBase.tolerance&&val<ClipperLib.ClipperBase.tolerance};ClipperLib.ClipperBase.IsHorizontal=function(e){return e.Delta.Y===0};ClipperLib.ClipperBase.prototype.PointIsVertex=function(pt,pp){var pp2=pp;do{if(ClipperLib.IntPoint.op_Equality(pp2.Pt,pt))return true;pp2=pp2.Next}while(pp2!=pp);return false};ClipperLib.ClipperBase.prototype.PointOnLineSegment=function(pt,linePt1,linePt2,UseFullRange){if(UseFullRange)return pt.X==linePt1.X&&pt.Y==linePt1.Y||pt.X==linePt2.X&&pt.Y==linePt2.Y||pt.X>linePt1.X==pt.X<linePt2.X&&pt.Y>linePt1.Y==pt.Y<linePt2.Y&&Int128.op_Equality(Int128.Int128Mul(pt.X-linePt1.X,linePt2.Y-linePt1.Y),Int128.Int128Mul(linePt2.X-linePt1.X,pt.Y-linePt1.Y));else return pt.X==linePt1.X&&pt.Y==linePt1.Y||pt.X==linePt2.X&&pt.Y==linePt2.Y||pt.X>linePt1.X==pt.X<linePt2.X&&pt.Y>linePt1.Y==pt.Y<linePt2.Y&&(pt.X-linePt1.X)*(linePt2.Y-linePt1.Y)==(linePt2.X-linePt1.X)*(pt.Y-linePt1.Y)};ClipperLib.ClipperBase.prototype.PointOnPolygon=function(pt,pp,UseFullRange){var pp2=pp;while(true){if(this.PointOnLineSegment(pt,pp2.Pt,pp2.Next.Pt,UseFullRange))return true;pp2=pp2.Next;if(pp2==pp)break}return false};ClipperLib.ClipperBase.prototype.SlopesEqual=ClipperLib.ClipperBase.SlopesEqual=function(){var a=arguments,alen=a.length;var e1,e2,pt1,pt2,pt3,pt4,UseFullRange;if(alen==3){e1=a[0];e2=a[1];UseFullRange=a[2];if(UseFullRange)return Int128.op_Equality(Int128.Int128Mul(e1.Delta.Y,e2.Delta.X),Int128.Int128Mul(e1.Delta.X,e2.Delta.Y));else return ClipperLib.Cast_Int64(e1.Delta.Y*e2.Delta.X)==ClipperLib.Cast_Int64(e1.Delta.X*e2.Delta.Y)}else if(alen==4){pt1=a[0];pt2=a[1];pt3=a[2];UseFullRange=a[3];if(UseFullRange)return Int128.op_Equality(Int128.Int128Mul(pt1.Y-pt2.Y,pt2.X-pt3.X),Int128.Int128Mul(pt1.X-pt2.X,pt2.Y-pt3.Y));else return ClipperLib.Cast_Int64((pt1.Y-pt2.Y)*(pt2.X-pt3.X))-ClipperLib.Cast_Int64((pt1.X-pt2.X)*(pt2.Y-pt3.Y))===0}else{pt1=a[0];pt2=a[1];pt3=a[2];pt4=a[3];UseFullRange=a[4];if(UseFullRange)return Int128.op_Equality(Int128.Int128Mul(pt1.Y-pt2.Y,pt3.X-pt4.X),Int128.Int128Mul(pt1.X-pt2.X,pt3.Y-pt4.Y));else return ClipperLib.Cast_Int64((pt1.Y-pt2.Y)*(pt3.X-pt4.X))-ClipperLib.Cast_Int64((pt1.X-pt2.X)*(pt3.Y-pt4.Y))===0}};ClipperLib.ClipperBase.SlopesEqual3=function(e1,e2,UseFullRange){if(UseFullRange)return Int128.op_Equality(Int128.Int128Mul(e1.Delta.Y,e2.Delta.X),Int128.Int128Mul(e1.Delta.X,e2.Delta.Y));else return ClipperLib.Cast_Int64(e1.Delta.Y*e2.Delta.X)==ClipperLib.Cast_Int64(e1.Delta.X*e2.Delta.Y)};ClipperLib.ClipperBase.SlopesEqual4=function(pt1,pt2,pt3,UseFullRange){if(UseFullRange)return Int128.op_Equality(Int128.Int128Mul(pt1.Y-pt2.Y,pt2.X-pt3.X),Int128.Int128Mul(pt1.X-pt2.X,pt2.Y-pt3.Y));else return ClipperLib.Cast_Int64((pt1.Y-pt2.Y)*(pt2.X-pt3.X))-ClipperLib.Cast_Int64((pt1.X-pt2.X)*(pt2.Y-pt3.Y))===0};ClipperLib.ClipperBase.SlopesEqual5=function(pt1,pt2,pt3,pt4,UseFullRange){if(UseFullRange)return Int128.op_Equality(Int128.Int128Mul(pt1.Y-pt2.Y,pt3.X-pt4.X),Int128.Int128Mul(pt1.X-pt2.X,pt3.Y-pt4.Y));else return ClipperLib.Cast_Int64((pt1.Y-pt2.Y)*(pt3.X-pt4.X))-ClipperLib.Cast_Int64((pt1.X-pt2.X)*(pt3.Y-pt4.Y))===0};ClipperLib.ClipperBase.prototype.Clear=function(){this.DisposeLocalMinimaList();for(var i=0,ilen=this.m_edges.length;i<ilen;++i){for(var j=0,jlen=this.m_edges[i].length;j<jlen;++j)this.m_edges[i][j]=null;ClipperLib.Clear(this.m_edges[i])}ClipperLib.Clear(this.m_edges);this.m_UseFullRange=false;this.m_HasOpenPaths=false};ClipperLib.ClipperBase.prototype.DisposeLocalMinimaList=function(){while(this.m_MinimaList!==null){var tmpLm=this.m_MinimaList.Next;this.m_MinimaList=null;this.m_MinimaList=tmpLm}this.m_CurrentLM=null};ClipperLib.ClipperBase.prototype.RangeTest=function(Pt,useFullRange){if(useFullRange.Value){if(Pt.X>ClipperLib.ClipperBase.hiRange||Pt.Y>ClipperLib.ClipperBase.hiRange||-Pt.X>ClipperLib.ClipperBase.hiRange||-Pt.Y>ClipperLib.ClipperBase.hiRange)ClipperLib.Error("Coordinate outside allowed range in RangeTest().")}else if(Pt.X>ClipperLib.ClipperBase.loRange||Pt.Y>ClipperLib.ClipperBase.loRange||-Pt.X>ClipperLib.ClipperBase.loRange||-Pt.Y>ClipperLib.ClipperBase.loRange){useFullRange.Value=true;this.RangeTest(Pt,useFullRange)}};ClipperLib.ClipperBase.prototype.InitEdge=function(e,eNext,ePrev,pt){
e.Next=eNext;e.Prev=ePrev;e.Curr.X=pt.X;e.Curr.Y=pt.Y;e.OutIdx=-1};ClipperLib.ClipperBase.prototype.InitEdge2=function(e,polyType){if(e.Curr.Y>=e.Next.Curr.Y){e.Bot.X=e.Curr.X;e.Bot.Y=e.Curr.Y;e.Top.X=e.Next.Curr.X;e.Top.Y=e.Next.Curr.Y}else{e.Top.X=e.Curr.X;e.Top.Y=e.Curr.Y;e.Bot.X=e.Next.Curr.X;e.Bot.Y=e.Next.Curr.Y}this.SetDx(e);e.PolyTyp=polyType};ClipperLib.ClipperBase.prototype.FindNextLocMin=function(E){var E2;for(;;){while(ClipperLib.IntPoint.op_Inequality(E.Bot,E.Prev.Bot)||ClipperLib.IntPoint.op_Equality(E.Curr,E.Top))E=E.Next;if(E.Dx!=ClipperLib.ClipperBase.horizontal&&E.Prev.Dx!=ClipperLib.ClipperBase.horizontal)break;while(E.Prev.Dx==ClipperLib.ClipperBase.horizontal)E=E.Prev;E2=E;while(E.Dx==ClipperLib.ClipperBase.horizontal)E=E.Next;if(E.Top.Y==E.Prev.Bot.Y)continue;if(E2.Prev.Bot.X<E.Bot.X)E=E2;break}return E};ClipperLib.ClipperBase.prototype.ProcessBound=function(E,LeftBoundIsForward){var EStart;var Result=E;var Horz;if(Result.OutIdx==ClipperLib.ClipperBase.Skip){E=Result;if(LeftBoundIsForward){while(E.Top.Y==E.Next.Bot.Y)E=E.Next;while(E!=Result&&E.Dx==ClipperLib.ClipperBase.horizontal)E=E.Prev}else{while(E.Top.Y==E.Prev.Bot.Y)E=E.Prev;while(E!=Result&&E.Dx==ClipperLib.ClipperBase.horizontal)E=E.Next}if(E==Result){if(LeftBoundIsForward)Result=E.Next;else Result=E.Prev}else{if(LeftBoundIsForward)E=Result.Next;else E=Result.Prev;var locMin=new ClipperLib.LocalMinima;locMin.Next=null;locMin.Y=E.Bot.Y;locMin.LeftBound=null;locMin.RightBound=E;E.WindDelta=0;Result=this.ProcessBound(E,LeftBoundIsForward);this.InsertLocalMinima(locMin)}return Result}if(E.Dx==ClipperLib.ClipperBase.horizontal){if(LeftBoundIsForward)EStart=E.Prev;else EStart=E.Next;if(EStart.OutIdx!=ClipperLib.ClipperBase.Skip){if(EStart.Dx==ClipperLib.ClipperBase.horizontal){if(EStart.Bot.X!=E.Bot.X&&EStart.Top.X!=E.Bot.X)this.ReverseHorizontal(E)}else if(EStart.Bot.X!=E.Bot.X)this.ReverseHorizontal(E)}}EStart=E;if(LeftBoundIsForward){while(Result.Top.Y==Result.Next.Bot.Y&&Result.Next.OutIdx!=ClipperLib.ClipperBase.Skip)Result=Result.Next;if(Result.Dx==ClipperLib.ClipperBase.horizontal&&Result.Next.OutIdx!=ClipperLib.ClipperBase.Skip){Horz=Result;while(Horz.Prev.Dx==ClipperLib.ClipperBase.horizontal)Horz=Horz.Prev;if(Horz.Prev.Top.X==Result.Next.Top.X){if(!LeftBoundIsForward)Result=Horz.Prev}else if(Horz.Prev.Top.X>Result.Next.Top.X)Result=Horz.Prev}while(E!=Result){E.NextInLML=E.Next;if(E.Dx==ClipperLib.ClipperBase.horizontal&&E!=EStart&&E.Bot.X!=E.Prev.Top.X)this.ReverseHorizontal(E);E=E.Next}if(E.Dx==ClipperLib.ClipperBase.horizontal&&E!=EStart&&E.Bot.X!=E.Prev.Top.X)this.ReverseHorizontal(E);Result=Result.Next}else{while(Result.Top.Y==Result.Prev.Bot.Y&&Result.Prev.OutIdx!=ClipperLib.ClipperBase.Skip)Result=Result.Prev;if(Result.Dx==ClipperLib.ClipperBase.horizontal&&Result.Prev.OutIdx!=ClipperLib.ClipperBase.Skip){Horz=Result;while(Horz.Next.Dx==ClipperLib.ClipperBase.horizontal)Horz=Horz.Next;if(Horz.Next.Top.X==Result.Prev.Top.X){if(!LeftBoundIsForward)Result=Horz.Next}else if(Horz.Next.Top.X>Result.Prev.Top.X)Result=Horz.Next}while(E!=Result){E.NextInLML=E.Prev;if(E.Dx==ClipperLib.ClipperBase.horizontal&&E!=EStart&&E.Bot.X!=E.Next.Top.X)this.ReverseHorizontal(E);E=E.Prev}if(E.Dx==ClipperLib.ClipperBase.horizontal&&E!=EStart&&E.Bot.X!=E.Next.Top.X)this.ReverseHorizontal(E);Result=Result.Prev}return Result};ClipperLib.ClipperBase.prototype.AddPath=function(pg,polyType,Closed){if(use_lines){if(!Closed&&polyType==ClipperLib.PolyType.ptClip)ClipperLib.Error("AddPath: Open paths must be subject.")}else{if(!Closed)ClipperLib.Error("AddPath: Open paths have been disabled.")}var highI=pg.length-1;if(Closed)while(highI>0&&ClipperLib.IntPoint.op_Equality(pg[highI],pg[0]))--highI;while(highI>0&&ClipperLib.IntPoint.op_Equality(pg[highI],pg[highI-1]))--highI;if(Closed&&highI<2||!Closed&&highI<1)return false;var edges=new Array;for(var i=0;i<=highI;i++)edges.push(new ClipperLib.TEdge);var IsFlat=true;edges[1].Curr.X=pg[1].X;edges[1].Curr.Y=pg[1].Y;var $1={Value:this.m_UseFullRange};this.RangeTest(pg[0],$1);this.m_UseFullRange=$1.Value;$1.Value=this.m_UseFullRange;this.RangeTest(pg[highI],$1);this.m_UseFullRange=$1.Value;this.InitEdge(edges[0],edges[1],edges[highI],pg[0]);this.InitEdge(edges[highI],edges[0],edges[highI-1],pg[highI]);for(var i=highI-1;i>=1;--i){$1.Value=this.m_UseFullRange;this.RangeTest(pg[i],$1);this.m_UseFullRange=$1.Value;this.InitEdge(edges[i],edges[i+1],edges[i-1],pg[i])}var eStart=edges[0];var E=eStart,eLoopStop=eStart;for(;;){if(E.Curr==E.Next.Curr&&(Closed||E.Next!=eStart)){if(E==E.Next)break;if(E==eStart)eStart=E.Next;E=this.RemoveEdge(E);eLoopStop=E;continue}if(E.Prev==E.Next)break;else if(Closed&&ClipperLib.ClipperBase.SlopesEqual(E.Prev.Curr,E.Curr,E.Next.Curr,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(E.Prev.Curr,E.Curr,E.Next.Curr))){if(E==eStart)eStart=E.Next;E=this.RemoveEdge(E);E=E.Prev;eLoopStop=E;continue}E=E.Next;if(E==eLoopStop||!Closed&&E.Next==eStart)break}if(!Closed&&E==E.Next||Closed&&E.Prev==E.Next)return false;if(!Closed){this.m_HasOpenPaths=true;eStart.Prev.OutIdx=ClipperLib.ClipperBase.Skip}E=eStart;do{this.InitEdge2(E,polyType);E=E.Next;if(IsFlat&&E.Curr.Y!=eStart.Curr.Y)IsFlat=false}while(E!=eStart);if(IsFlat){if(Closed)return false;E.Prev.OutIdx=ClipperLib.ClipperBase.Skip;if(E.Prev.Bot.X<E.Prev.Top.X)this.ReverseHorizontal(E.Prev);var locMin=new ClipperLib.LocalMinima;locMin.Next=null;locMin.Y=E.Bot.Y;locMin.LeftBound=null;locMin.RightBound=E;locMin.RightBound.Side=ClipperLib.EdgeSide.esRight;locMin.RightBound.WindDelta=0;while(E.Next.OutIdx!=ClipperLib.ClipperBase.Skip){E.NextInLML=E.Next;if(E.Bot.X!=E.Prev.Top.X)this.ReverseHorizontal(E);E=E.Next}this.InsertLocalMinima(locMin);this.m_edges.push(edges);return true}this.m_edges.push(edges);var leftBoundIsForward;var EMin=null;if(ClipperLib.IntPoint.op_Equality(E.Prev.Bot,E.Prev.Top))E=E.Next;for(;;){E=this.FindNextLocMin(E);if(E==EMin)break;else if(EMin==null)EMin=E;var locMin=new ClipperLib.LocalMinima;locMin.Next=null;locMin.Y=E.Bot.Y;if(E.Dx<E.Prev.Dx){locMin.LeftBound=E.Prev;locMin.RightBound=E;leftBoundIsForward=false}else{locMin.LeftBound=E;locMin.RightBound=E.Prev;leftBoundIsForward=true}locMin.LeftBound.Side=ClipperLib.EdgeSide.esLeft;locMin.RightBound.Side=ClipperLib.EdgeSide.esRight;if(!Closed)locMin.LeftBound.WindDelta=0;else if(locMin.LeftBound.Next==locMin.RightBound)locMin.LeftBound.WindDelta=-1;else locMin.LeftBound.WindDelta=1;locMin.RightBound.WindDelta=-locMin.LeftBound.WindDelta;E=this.ProcessBound(locMin.LeftBound,leftBoundIsForward);if(E.OutIdx==ClipperLib.ClipperBase.Skip)E=this.ProcessBound(E,leftBoundIsForward);var E2=this.ProcessBound(locMin.RightBound,!leftBoundIsForward);if(E2.OutIdx==ClipperLib.ClipperBase.Skip)E2=this.ProcessBound(E2,!leftBoundIsForward);if(locMin.LeftBound.OutIdx==ClipperLib.ClipperBase.Skip)locMin.LeftBound=null;else if(locMin.RightBound.OutIdx==ClipperLib.ClipperBase.Skip)locMin.RightBound=null;this.InsertLocalMinima(locMin);if(!leftBoundIsForward)E=E2}return true};ClipperLib.ClipperBase.prototype.AddPaths=function(ppg,polyType,closed){var result=false;for(var i=0,ilen=ppg.length;i<ilen;++i)if(this.AddPath(ppg[i],polyType,closed))result=true;return result};ClipperLib.ClipperBase.prototype.Pt2IsBetweenPt1AndPt3=function(pt1,pt2,pt3){if(ClipperLib.IntPoint.op_Equality(pt1,pt3)||ClipperLib.IntPoint.op_Equality(pt1,pt2)||ClipperLib.IntPoint.op_Equality(pt3,pt2))return false;else if(pt1.X!=pt3.X)return pt2.X>pt1.X==pt2.X<pt3.X;else return pt2.Y>pt1.Y==pt2.Y<pt3.Y};ClipperLib.ClipperBase.prototype.RemoveEdge=function(e){e.Prev.Next=e.Next;e.Next.Prev=e.Prev;var result=e.Next;e.Prev=null;return result};ClipperLib.ClipperBase.prototype.SetDx=function(e){e.Delta.X=e.Top.X-e.Bot.X;e.Delta.Y=e.Top.Y-e.Bot.Y;if(e.Delta.Y===0)e.Dx=ClipperLib.ClipperBase.horizontal;else e.Dx=e.Delta.X/e.Delta.Y};ClipperLib.ClipperBase.prototype.InsertLocalMinima=function(newLm){if(this.m_MinimaList===null){this.m_MinimaList=newLm}else if(newLm.Y>=this.m_MinimaList.Y){newLm.Next=this.m_MinimaList;this.m_MinimaList=newLm}else{var tmpLm=this.m_MinimaList;while(tmpLm.Next!==null&&newLm.Y<tmpLm.Next.Y)tmpLm=tmpLm.Next;newLm.Next=tmpLm.Next;tmpLm.Next=newLm}};ClipperLib.ClipperBase.prototype.PopLocalMinima=function(){if(this.m_CurrentLM===null)return;this.m_CurrentLM=this.m_CurrentLM.Next};ClipperLib.ClipperBase.prototype.ReverseHorizontal=function(e){var tmp=e.Top.X;e.Top.X=e.Bot.X;e.Bot.X=tmp;if(use_xyz){tmp=e.Top.Z;e.Top.Z=e.Bot.Z;e.Bot.Z=tmp}};ClipperLib.ClipperBase.prototype.Reset=function(){this.m_CurrentLM=this.m_MinimaList;if(this.m_CurrentLM==null)return;var lm=this.m_MinimaList;while(lm!=null){var e=lm.LeftBound;if(e!=null){e.Curr.X=e.Bot.X;e.Curr.Y=e.Bot.Y;e.Side=ClipperLib.EdgeSide.esLeft;e.OutIdx=ClipperLib.ClipperBase.Unassigned}e=lm.RightBound;if(e!=null){e.Curr.X=e.Bot.X;e.Curr.Y=e.Bot.Y;e.Side=ClipperLib.EdgeSide.esRight;e.OutIdx=ClipperLib.ClipperBase.Unassigned}lm=lm.Next}};ClipperLib.Clipper=function(InitOptions){if(typeof InitOptions=="undefined")InitOptions=0;this.m_PolyOuts=null;this.m_ClipType=ClipperLib.ClipType.ctIntersection;this.m_Scanbeam=null;this.m_ActiveEdges=null;this.m_SortedEdges=null;this.m_IntersectList=null;this.m_IntersectNodeComparer=null;this.m_ExecuteLocked=false;this.m_ClipFillType=ClipperLib.PolyFillType.pftEvenOdd;this.m_SubjFillType=ClipperLib.PolyFillType.pftEvenOdd;this.m_Joins=null;this.m_GhostJoins=null;this.m_UsingPolyTree=false;this.ReverseSolution=false;this.StrictlySimple=false;ClipperLib.ClipperBase.call(this);this.m_Scanbeam=null;this.m_ActiveEdges=null;this.m_SortedEdges=null;this.m_IntersectList=new Array;this.m_IntersectNodeComparer=ClipperLib.MyIntersectNodeSort.Compare;this.m_ExecuteLocked=false;this.m_UsingPolyTree=false;this.m_PolyOuts=new Array;this.m_Joins=new Array;this.m_GhostJoins=new Array;this.ReverseSolution=(1&InitOptions)!==0;this.StrictlySimple=(2&InitOptions)!==0;this.PreserveCollinear=(4&InitOptions)!==0;if(use_xyz){this.ZFillFunction=null}};ClipperLib.Clipper.ioReverseSolution=1;ClipperLib.Clipper.ioStrictlySimple=2;ClipperLib.Clipper.ioPreserveCollinear=4;ClipperLib.Clipper.prototype.Clear=function(){if(this.m_edges.length===0)return;this.DisposeAllPolyPts();ClipperLib.ClipperBase.prototype.Clear.call(this)};ClipperLib.Clipper.prototype.DisposeScanbeamList=function(){while(this.m_Scanbeam!==null){var sb2=this.m_Scanbeam.Next;this.m_Scanbeam=null;this.m_Scanbeam=sb2}};ClipperLib.Clipper.prototype.Reset=function(){ClipperLib.ClipperBase.prototype.Reset.call(this);this.m_Scanbeam=null;this.m_ActiveEdges=null;this.m_SortedEdges=null;var lm=this.m_MinimaList;while(lm!==null){this.InsertScanbeam(lm.Y);lm=lm.Next}};ClipperLib.Clipper.prototype.InsertScanbeam=function(Y){if(this.m_Scanbeam===null){this.m_Scanbeam=new ClipperLib.Scanbeam;this.m_Scanbeam.Next=null;this.m_Scanbeam.Y=Y}else if(Y>this.m_Scanbeam.Y){var newSb=new ClipperLib.Scanbeam;newSb.Y=Y;newSb.Next=this.m_Scanbeam;this.m_Scanbeam=newSb}else{var sb2=this.m_Scanbeam;while(sb2.Next!==null&&Y<=sb2.Next.Y)sb2=sb2.Next;if(Y==sb2.Y)return;var newSb=new ClipperLib.Scanbeam;newSb.Y=Y;newSb.Next=sb2.Next;sb2.Next=newSb}};ClipperLib.Clipper.prototype.Execute=function(){var a=arguments,alen=a.length,ispolytree=a[1]instanceof ClipperLib.PolyTree;if(alen==4&&!ispolytree){var clipType=a[0],solution=a[1],subjFillType=a[2],clipFillType=a[3];if(this.m_ExecuteLocked)return false;if(this.m_HasOpenPaths)ClipperLib.Error("Error: PolyTree struct is need for open path clipping.");this.m_ExecuteLocked=true;ClipperLib.Clear(solution);this.m_SubjFillType=subjFillType;this.m_ClipFillType=clipFillType;this.m_ClipType=clipType;this.m_UsingPolyTree=false;try{var succeeded=this.ExecuteInternal();if(succeeded)this.BuildResult(solution)}finally{this.DisposeAllPolyPts();this.m_ExecuteLocked=false}return succeeded}else if(alen==4&&ispolytree){var clipType=a[0],polytree=a[1],subjFillType=a[2],clipFillType=a[3];if(this.m_ExecuteLocked)return false;this.m_ExecuteLocked=true;this.m_SubjFillType=subjFillType;this.m_ClipFillType=clipFillType;this.m_ClipType=clipType;this.m_UsingPolyTree=true;try{var succeeded=this.ExecuteInternal();if(succeeded)this.BuildResult2(polytree)}finally{this.DisposeAllPolyPts();this.m_ExecuteLocked=false}return succeeded}else if(alen==2&&!ispolytree){var clipType=a[0],solution=a[1];return this.Execute(clipType,solution,ClipperLib.PolyFillType.pftEvenOdd,ClipperLib.PolyFillType.pftEvenOdd)}else if(alen==2&&ispolytree){var clipType=a[0],polytree=a[1];return this.Execute(clipType,polytree,ClipperLib.PolyFillType.pftEvenOdd,ClipperLib.PolyFillType.pftEvenOdd)}};ClipperLib.Clipper.prototype.FixHoleLinkage=function(outRec){if(outRec.FirstLeft===null||outRec.IsHole!=outRec.FirstLeft.IsHole&&outRec.FirstLeft.Pts!==null)return;var orfl=outRec.FirstLeft;while(orfl!==null&&(orfl.IsHole==outRec.IsHole||orfl.Pts===null))orfl=orfl.FirstLeft;outRec.FirstLeft=orfl};ClipperLib.Clipper.prototype.ExecuteInternal=function(){try{this.Reset();if(this.m_CurrentLM===null)return false;var botY=this.PopScanbeam();do{this.InsertLocalMinimaIntoAEL(botY);ClipperLib.Clear(this.m_GhostJoins);this.ProcessHorizontals(false);if(this.m_Scanbeam===null)break;var topY=this.PopScanbeam();if(!this.ProcessIntersections(topY))return false;this.ProcessEdgesAtTopOfScanbeam(topY);botY=topY}while(this.m_Scanbeam!==null||this.m_CurrentLM!==null);for(var i=0,ilen=this.m_PolyOuts.length;i<ilen;i++){var outRec=this.m_PolyOuts[i];if(outRec.Pts===null||outRec.IsOpen)continue;if((outRec.IsHole^this.ReverseSolution)==this.Area(outRec)>0)this.ReversePolyPtLinks(outRec.Pts)}this.JoinCommonEdges();for(var i=0,ilen=this.m_PolyOuts.length;i<ilen;i++){var outRec=this.m_PolyOuts[i];if(outRec.Pts!==null&&!outRec.IsOpen)this.FixupOutPolygon(outRec)}if(this.StrictlySimple)this.DoSimplePolygons();return true}finally{ClipperLib.Clear(this.m_Joins);ClipperLib.Clear(this.m_GhostJoins)}};ClipperLib.Clipper.prototype.PopScanbeam=function(){var Y=this.m_Scanbeam.Y;this.m_Scanbeam=this.m_Scanbeam.Next;return Y};ClipperLib.Clipper.prototype.DisposeAllPolyPts=function(){for(var i=0,ilen=this.m_PolyOuts.length;i<ilen;++i)this.DisposeOutRec(i);ClipperLib.Clear(this.m_PolyOuts)};ClipperLib.Clipper.prototype.DisposeOutRec=function(index){var outRec=this.m_PolyOuts[index];outRec.Pts=null;outRec=null;this.m_PolyOuts[index]=null};ClipperLib.Clipper.prototype.AddJoin=function(Op1,Op2,OffPt){var j=new ClipperLib.Join;j.OutPt1=Op1;j.OutPt2=Op2;j.OffPt.X=OffPt.X;j.OffPt.Y=OffPt.Y;this.m_Joins.push(j)};ClipperLib.Clipper.prototype.AddGhostJoin=function(Op,OffPt){var j=new ClipperLib.Join;j.OutPt1=Op;j.OffPt.X=OffPt.X;j.OffPt.Y=OffPt.Y;this.m_GhostJoins.push(j)};if(use_xyz){ClipperLib.Clipper.prototype.SetZ=function(pt,e1,e2){if(this.ZFillFunction!==null){if(pt.Z!=0||this.ZFillFunction===null)return;else if(ClipperLib.IntPoint.op_Equality(pt,e1.Bot))pt.Z=e1.Bot.Z;else if(ClipperLib.IntPoint.op_Equality(pt,e1.Top))pt.Z=e1.Top.Z;else if(ClipperLib.IntPoint.op_Equality(pt,e2.Bot))pt.Z=e2.Bot.Z;else if(ClipperLib.IntPoint.op_Equality(pt,e2.Top))pt.Z=e2.Top.Z;else ZFillFunction(e1.Bot,e1.Top,e2.Bot,e2.Top,pt)}}}ClipperLib.Clipper.prototype.InsertLocalMinimaIntoAEL=function(botY){while(this.m_CurrentLM!==null&&this.m_CurrentLM.Y==botY){var lb=this.m_CurrentLM.LeftBound;var rb=this.m_CurrentLM.RightBound;this.PopLocalMinima();var Op1=null;if(lb===null){this.InsertEdgeIntoAEL(rb,null);this.SetWindingCount(rb);if(this.IsContributing(rb))Op1=this.AddOutPt(rb,rb.Bot)}else if(rb==null){this.InsertEdgeIntoAEL(lb,null);this.SetWindingCount(lb);if(this.IsContributing(lb))Op1=this.AddOutPt(lb,lb.Bot);this.InsertScanbeam(lb.Top.Y)}else{this.InsertEdgeIntoAEL(lb,null);this.InsertEdgeIntoAEL(rb,lb);this.SetWindingCount(lb);rb.WindCnt=lb.WindCnt;rb.WindCnt2=lb.WindCnt2;if(this.IsContributing(lb))Op1=this.AddLocalMinPoly(lb,rb,lb.Bot);this.InsertScanbeam(lb.Top.Y)}if(rb!=null){if(ClipperLib.ClipperBase.IsHorizontal(rb))this.AddEdgeToSEL(rb);else this.InsertScanbeam(rb.Top.Y)}if(lb==null||rb==null)continue;if(Op1!==null&&ClipperLib.ClipperBase.IsHorizontal(rb)&&this.m_GhostJoins.length>0&&rb.WindDelta!==0){for(var i=0,ilen=this.m_GhostJoins.length;i<ilen;i++){var j=this.m_GhostJoins[i];if(this.HorzSegmentsOverlap(j.OutPt1.Pt.X,j.OffPt.X,rb.Bot.X,rb.Top.X))this.AddJoin(j.OutPt1,Op1,j.OffPt)}}if(lb.OutIdx>=0&&lb.PrevInAEL!==null&&lb.PrevInAEL.Curr.X==lb.Bot.X&&lb.PrevInAEL.OutIdx>=0&&ClipperLib.ClipperBase.SlopesEqual(lb.PrevInAEL,lb,this.m_UseFullRange)&&lb.WindDelta!==0&&lb.PrevInAEL.WindDelta!==0){var Op2=this.AddOutPt(lb.PrevInAEL,lb.Bot);this.AddJoin(Op1,Op2,lb.Top)}if(lb.NextInAEL!=rb){if(rb.OutIdx>=0&&rb.PrevInAEL.OutIdx>=0&&ClipperLib.ClipperBase.SlopesEqual(rb.PrevInAEL,rb,this.m_UseFullRange)&&rb.WindDelta!==0&&rb.PrevInAEL.WindDelta!==0){var Op2=this.AddOutPt(rb.PrevInAEL,rb.Bot);this.AddJoin(Op1,Op2,rb.Top)}var e=lb.NextInAEL;if(e!==null)while(e!=rb){this.IntersectEdges(rb,e,lb.Curr,false);e=e.NextInAEL}}}};ClipperLib.Clipper.prototype.InsertEdgeIntoAEL=function(edge,startEdge){if(this.m_ActiveEdges===null){edge.PrevInAEL=null;edge.NextInAEL=null;this.m_ActiveEdges=edge}else if(startEdge===null&&this.E2InsertsBeforeE1(this.m_ActiveEdges,edge)){edge.PrevInAEL=null;edge.NextInAEL=this.m_ActiveEdges;this.m_ActiveEdges.PrevInAEL=edge;this.m_ActiveEdges=edge}else{if(startEdge===null)startEdge=this.m_ActiveEdges;while(startEdge.NextInAEL!==null&&!this.E2InsertsBeforeE1(startEdge.NextInAEL,edge))startEdge=startEdge.NextInAEL;edge.NextInAEL=startEdge.NextInAEL;if(startEdge.NextInAEL!==null)startEdge.NextInAEL.PrevInAEL=edge;edge.PrevInAEL=startEdge;startEdge.NextInAEL=edge}};ClipperLib.Clipper.prototype.E2InsertsBeforeE1=function(e1,e2){if(e2.Curr.X==e1.Curr.X){if(e2.Top.Y>e1.Top.Y)return e2.Top.X<ClipperLib.Clipper.TopX(e1,e2.Top.Y);else return e1.Top.X>ClipperLib.Clipper.TopX(e2,e1.Top.Y)}else return e2.Curr.X<e1.Curr.X};ClipperLib.Clipper.prototype.IsEvenOddFillType=function(edge){if(edge.PolyTyp==ClipperLib.PolyType.ptSubject)return this.m_SubjFillType==ClipperLib.PolyFillType.pftEvenOdd;else return this.m_ClipFillType==ClipperLib.PolyFillType.pftEvenOdd};ClipperLib.Clipper.prototype.IsEvenOddAltFillType=function(edge){if(edge.PolyTyp==ClipperLib.PolyType.ptSubject)return this.m_ClipFillType==ClipperLib.PolyFillType.pftEvenOdd;else return this.m_SubjFillType==ClipperLib.PolyFillType.pftEvenOdd};ClipperLib.Clipper.prototype.IsContributing=function(edge){var pft,pft2;if(edge.PolyTyp==ClipperLib.PolyType.ptSubject){pft=this.m_SubjFillType;pft2=this.m_ClipFillType}else{pft=this.m_ClipFillType;pft2=this.m_SubjFillType}switch(pft){case ClipperLib.PolyFillType.pftEvenOdd:if(edge.WindDelta===0&&edge.WindCnt!=1)return false;break;case ClipperLib.PolyFillType.pftNonZero:if(Math.abs(edge.WindCnt)!=1)return false;break;case ClipperLib.PolyFillType.pftPositive:if(edge.WindCnt!=1)return false;break;default:if(edge.WindCnt!=-1)return false;break}switch(this.m_ClipType){case ClipperLib.ClipType.ctIntersection:switch(pft2){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return edge.WindCnt2!==0;case ClipperLib.PolyFillType.pftPositive:return edge.WindCnt2>0;default:return edge.WindCnt2<0}case ClipperLib.ClipType.ctUnion:switch(pft2){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return edge.WindCnt2===0;case ClipperLib.PolyFillType.pftPositive:return edge.WindCnt2<=0;default:return edge.WindCnt2>=0}case ClipperLib.ClipType.ctDifference:if(edge.PolyTyp==ClipperLib.PolyType.ptSubject)switch(pft2){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return edge.WindCnt2===0;case ClipperLib.PolyFillType.pftPositive:return edge.WindCnt2<=0;default:return edge.WindCnt2>=0}else switch(pft2){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return edge.WindCnt2!==0;case ClipperLib.PolyFillType.pftPositive:return edge.WindCnt2>0;default:return edge.WindCnt2<0}case ClipperLib.ClipType.ctXor:if(edge.WindDelta===0)switch(pft2){case ClipperLib.PolyFillType.pftEvenOdd:case ClipperLib.PolyFillType.pftNonZero:return edge.WindCnt2===0;case ClipperLib.PolyFillType.pftPositive:return edge.WindCnt2<=0;default:return edge.WindCnt2>=0}else return true}return true};ClipperLib.Clipper.prototype.SetWindingCount=function(edge){var e=edge.PrevInAEL;while(e!==null&&(e.PolyTyp!=edge.PolyTyp||e.WindDelta===0))e=e.PrevInAEL;if(e===null){edge.WindCnt=edge.WindDelta===0?1:edge.WindDelta;edge.WindCnt2=0;e=this.m_ActiveEdges}else if(edge.WindDelta===0&&this.m_ClipType!=ClipperLib.ClipType.ctUnion){edge.WindCnt=1;edge.WindCnt2=e.WindCnt2;e=e.NextInAEL}else if(this.IsEvenOddFillType(edge)){if(edge.WindDelta===0){var Inside=true;var e2=e.PrevInAEL;while(e2!==null){if(e2.PolyTyp==e.PolyTyp&&e2.WindDelta!==0)Inside=!Inside;e2=e2.PrevInAEL}edge.WindCnt=Inside?0:1}else{edge.WindCnt=edge.WindDelta}edge.WindCnt2=e.WindCnt2;e=e.NextInAEL}else{if(e.WindCnt*e.WindDelta<0){if(Math.abs(e.WindCnt)>1){if(e.WindDelta*edge.WindDelta<0)edge.WindCnt=e.WindCnt;else edge.WindCnt=e.WindCnt+edge.WindDelta}else edge.WindCnt=edge.WindDelta===0?1:edge.WindDelta}else{if(edge.WindDelta===0)edge.WindCnt=e.WindCnt<0?e.WindCnt-1:e.WindCnt+1;else if(e.WindDelta*edge.WindDelta<0)edge.WindCnt=e.WindCnt;else edge.WindCnt=e.WindCnt+edge.WindDelta}edge.WindCnt2=e.WindCnt2;e=e.NextInAEL}if(this.IsEvenOddAltFillType(edge)){while(e!=edge){if(e.WindDelta!==0)edge.WindCnt2=edge.WindCnt2===0?1:0;e=e.NextInAEL}}else{while(e!=edge){edge.WindCnt2+=e.WindDelta;e=e.NextInAEL}}};ClipperLib.Clipper.prototype.AddEdgeToSEL=function(edge){if(this.m_SortedEdges===null){this.m_SortedEdges=edge;edge.PrevInSEL=null;edge.NextInSEL=null}else{edge.NextInSEL=this.m_SortedEdges;edge.PrevInSEL=null;this.m_SortedEdges.PrevInSEL=edge;this.m_SortedEdges=edge}};ClipperLib.Clipper.prototype.CopyAELToSEL=function(){var e=this.m_ActiveEdges;this.m_SortedEdges=e;while(e!==null){e.PrevInSEL=e.PrevInAEL;e.NextInSEL=e.NextInAEL;e=e.NextInAEL}};ClipperLib.Clipper.prototype.SwapPositionsInAEL=function(edge1,edge2){if(edge1.NextInAEL==edge1.PrevInAEL||edge2.NextInAEL==edge2.PrevInAEL)return;if(edge1.NextInAEL==edge2){var next=edge2.NextInAEL;if(next!==null)next.PrevInAEL=edge1;var prev=edge1.PrevInAEL;if(prev!==null)prev.NextInAEL=edge2;edge2.PrevInAEL=prev;edge2.NextInAEL=edge1;edge1.PrevInAEL=edge2;edge1.NextInAEL=next}else if(edge2.NextInAEL==edge1){var next=edge1.NextInAEL;if(next!==null)next.PrevInAEL=edge2;var prev=edge2.PrevInAEL;if(prev!==null)prev.NextInAEL=edge1;edge1.PrevInAEL=prev;edge1.NextInAEL=edge2;edge2.PrevInAEL=edge1;edge2.NextInAEL=next}else{var next=edge1.NextInAEL;var prev=edge1.PrevInAEL;edge1.NextInAEL=edge2.NextInAEL;if(edge1.NextInAEL!==null)edge1.NextInAEL.PrevInAEL=edge1;edge1.PrevInAEL=edge2.PrevInAEL;if(edge1.PrevInAEL!==null)edge1.PrevInAEL.NextInAEL=edge1;edge2.NextInAEL=next;if(edge2.NextInAEL!==null)edge2.NextInAEL.PrevInAEL=edge2;edge2.PrevInAEL=prev;if(edge2.PrevInAEL!==null)edge2.PrevInAEL.NextInAEL=edge2}if(edge1.PrevInAEL===null)this.m_ActiveEdges=edge1;else if(edge2.PrevInAEL===null)this.m_ActiveEdges=edge2};ClipperLib.Clipper.prototype.SwapPositionsInSEL=function(edge1,edge2){if(edge1.NextInSEL===null&&edge1.PrevInSEL===null)return;if(edge2.NextInSEL===null&&edge2.PrevInSEL===null)return;if(edge1.NextInSEL==edge2){var next=edge2.NextInSEL;if(next!==null)next.PrevInSEL=edge1;var prev=edge1.PrevInSEL;if(prev!==null)prev.NextInSEL=edge2;edge2.PrevInSEL=prev;edge2.NextInSEL=edge1;edge1.PrevInSEL=edge2;edge1.NextInSEL=next}else if(edge2.NextInSEL==edge1){var next=edge1.NextInSEL;if(next!==null)next.PrevInSEL=edge2;var prev=edge2.PrevInSEL;if(prev!==null)prev.NextInSEL=edge1;edge1.PrevInSEL=prev;edge1.NextInSEL=edge2;edge2.PrevInSEL=edge1;edge2.NextInSEL=next}else{var next=edge1.NextInSEL;var prev=edge1.PrevInSEL;edge1.NextInSEL=edge2.NextInSEL;if(edge1.NextInSEL!==null)edge1.NextInSEL.PrevInSEL=edge1;edge1.PrevInSEL=edge2.PrevInSEL;if(edge1.PrevInSEL!==null)edge1.PrevInSEL.NextInSEL=edge1;edge2.NextInSEL=next;if(edge2.NextInSEL!==null)edge2.NextInSEL.PrevInSEL=edge2;edge2.PrevInSEL=prev;if(edge2.PrevInSEL!==null)edge2.PrevInSEL.NextInSEL=edge2}if(edge1.PrevInSEL===null)this.m_SortedEdges=edge1;else if(edge2.PrevInSEL===null)this.m_SortedEdges=edge2};ClipperLib.Clipper.prototype.AddLocalMaxPoly=function(e1,e2,pt){this.AddOutPt(e1,pt);if(e2.WindDelta==0)this.AddOutPt(e2,pt);if(e1.OutIdx==e2.OutIdx){e1.OutIdx=-1;e2.OutIdx=-1}else if(e1.OutIdx<e2.OutIdx)this.AppendPolygon(e1,e2);else this.AppendPolygon(e2,e1)};ClipperLib.Clipper.prototype.AddLocalMinPoly=function(e1,e2,pt){var result;var e,prevE;if(ClipperLib.ClipperBase.IsHorizontal(e2)||e1.Dx>e2.Dx){result=this.AddOutPt(e1,pt);e2.OutIdx=e1.OutIdx;e1.Side=ClipperLib.EdgeSide.esLeft;e2.Side=ClipperLib.EdgeSide.esRight;e=e1;if(e.PrevInAEL==e2)prevE=e2.PrevInAEL;else prevE=e.PrevInAEL}else{result=this.AddOutPt(e2,pt);e1.OutIdx=e2.OutIdx;e1.Side=ClipperLib.EdgeSide.esRight;e2.Side=ClipperLib.EdgeSide.esLeft;e=e2;if(e.PrevInAEL==e1)prevE=e1.PrevInAEL;else prevE=e.PrevInAEL}if(prevE!==null&&prevE.OutIdx>=0&&ClipperLib.Clipper.TopX(prevE,pt.Y)==ClipperLib.Clipper.TopX(e,pt.Y)&&ClipperLib.ClipperBase.SlopesEqual(e,prevE,this.m_UseFullRange)&&e.WindDelta!==0&&prevE.WindDelta!==0){var outPt=this.AddOutPt(prevE,pt);this.AddJoin(result,outPt,e.Top)}return result};ClipperLib.Clipper.prototype.CreateOutRec=function(){var result=new ClipperLib.OutRec;result.Idx=-1;result.IsHole=false;result.IsOpen=false;result.FirstLeft=null;result.Pts=null;result.BottomPt=null;result.PolyNode=null;this.m_PolyOuts.push(result);result.Idx=this.m_PolyOuts.length-1;return result};ClipperLib.Clipper.prototype.AddOutPt=function(e,pt){var ToFront=e.Side==ClipperLib.EdgeSide.esLeft;if(e.OutIdx<0){var outRec=this.CreateOutRec();outRec.IsOpen=e.WindDelta===0;var newOp=new ClipperLib.OutPt;outRec.Pts=newOp;newOp.Idx=outRec.Idx;newOp.Pt.X=pt.X;newOp.Pt.Y=pt.Y;newOp.Next=newOp;newOp.Prev=newOp;if(!outRec.IsOpen)this.SetHoleState(e,outRec);e.OutIdx=outRec.Idx;return newOp}else{var outRec=this.m_PolyOuts[e.OutIdx];var op=outRec.Pts;if(ToFront&&ClipperLib.IntPoint.op_Equality(pt,op.Pt))return op;else if(!ToFront&&ClipperLib.IntPoint.op_Equality(pt,op.Prev.Pt))return op.Prev;var newOp=new ClipperLib.OutPt;newOp.Idx=outRec.Idx;newOp.Pt.X=pt.X;newOp.Pt.Y=pt.Y;newOp.Next=op;newOp.Prev=op.Prev;newOp.Prev.Next=newOp;op.Prev=newOp;if(ToFront)outRec.Pts=newOp;return newOp}};ClipperLib.Clipper.prototype.SwapPoints=function(pt1,pt2){var tmp=new ClipperLib.IntPoint(pt1.Value);pt1.Value.X=pt2.Value.X;pt1.Value.Y=pt2.Value.Y;pt2.Value.X=tmp.X;pt2.Value.Y=tmp.Y};ClipperLib.Clipper.prototype.HorzSegmentsOverlap=function(seg1a,seg1b,seg2a,seg2b){var tmp;if(seg1a>seg1b){tmp=seg1a;seg1a=seg1b;seg1b=tmp}if(seg2a>seg2b){tmp=seg2a;seg2a=seg2b;seg2b=tmp}return seg1a<seg2b&&seg2a<seg1b};ClipperLib.Clipper.prototype.SetHoleState=function(e,outRec){var isHole=false;var e2=e.PrevInAEL;while(e2!==null){if(e2.OutIdx>=0&&e2.WindDelta!=0){isHole=!isHole;if(outRec.FirstLeft===null)outRec.FirstLeft=this.m_PolyOuts[e2.OutIdx]}e2=e2.PrevInAEL}if(isHole)outRec.IsHole=true};ClipperLib.Clipper.prototype.GetDx=function(pt1,pt2){if(pt1.Y==pt2.Y)return ClipperLib.ClipperBase.horizontal;else return(pt2.X-pt1.X)/(pt2.Y-pt1.Y)};ClipperLib.Clipper.prototype.FirstIsBottomPt=function(btmPt1,btmPt2){var p=btmPt1.Prev;while(ClipperLib.IntPoint.op_Equality(p.Pt,btmPt1.Pt)&&p!=btmPt1)p=p.Prev;var dx1p=Math.abs(this.GetDx(btmPt1.Pt,p.Pt));p=btmPt1.Next;while(ClipperLib.IntPoint.op_Equality(p.Pt,btmPt1.Pt)&&p!=btmPt1)p=p.Next;var dx1n=Math.abs(this.GetDx(btmPt1.Pt,p.Pt));p=btmPt2.Prev;while(ClipperLib.IntPoint.op_Equality(p.Pt,btmPt2.Pt)&&p!=btmPt2)p=p.Prev;var dx2p=Math.abs(this.GetDx(btmPt2.Pt,p.Pt));p=btmPt2.Next;while(ClipperLib.IntPoint.op_Equality(p.Pt,btmPt2.Pt)&&p!=btmPt2)p=p.Next;var dx2n=Math.abs(this.GetDx(btmPt2.Pt,p.Pt));return dx1p>=dx2p&&dx1p>=dx2n||dx1n>=dx2p&&dx1n>=dx2n};ClipperLib.Clipper.prototype.GetBottomPt=function(pp){var dups=null;var p=pp.Next;while(p!=pp){if(p.Pt.Y>pp.Pt.Y){pp=p;dups=null}else if(p.Pt.Y==pp.Pt.Y&&p.Pt.X<=pp.Pt.X){if(p.Pt.X<pp.Pt.X){dups=null;pp=p}else{if(p.Next!=pp&&p.Prev!=pp)dups=p}}p=p.Next}if(dups!==null){while(dups!=p){if(!this.FirstIsBottomPt(p,dups))pp=dups;dups=dups.Next;while(ClipperLib.IntPoint.op_Inequality(dups.Pt,pp.Pt))dups=dups.Next}}return pp};ClipperLib.Clipper.prototype.GetLowermostRec=function(outRec1,outRec2){if(outRec1.BottomPt===null)outRec1.BottomPt=this.GetBottomPt(outRec1.Pts);if(outRec2.BottomPt===null)outRec2.BottomPt=this.GetBottomPt(outRec2.Pts);var bPt1=outRec1.BottomPt;var bPt2=outRec2.BottomPt;if(bPt1.Pt.Y>bPt2.Pt.Y)return outRec1;else if(bPt1.Pt.Y<bPt2.Pt.Y)return outRec2;else if(bPt1.Pt.X<bPt2.Pt.X)return outRec1;else if(bPt1.Pt.X>bPt2.Pt.X)return outRec2;else if(bPt1.Next==bPt1)return outRec2;else if(bPt2.Next==bPt2)return outRec1;else if(this.FirstIsBottomPt(bPt1,bPt2))return outRec1;else return outRec2};ClipperLib.Clipper.prototype.Param1RightOfParam2=function(outRec1,outRec2){do{outRec1=outRec1.FirstLeft;if(outRec1==outRec2)return true}while(outRec1!==null);return false};ClipperLib.Clipper.prototype.GetOutRec=function(idx){var outrec=this.m_PolyOuts[idx];while(outrec!=this.m_PolyOuts[outrec.Idx])outrec=this.m_PolyOuts[outrec.Idx];return outrec};ClipperLib.Clipper.prototype.AppendPolygon=function(e1,e2){var outRec1=this.m_PolyOuts[e1.OutIdx];var outRec2=this.m_PolyOuts[e2.OutIdx];var holeStateRec;if(this.Param1RightOfParam2(outRec1,outRec2))holeStateRec=outRec2;else if(this.Param1RightOfParam2(outRec2,outRec1))holeStateRec=outRec1;else holeStateRec=this.GetLowermostRec(outRec1,outRec2);var p1_lft=outRec1.Pts;var p1_rt=p1_lft.Prev;var p2_lft=outRec2.Pts;var p2_rt=p2_lft.Prev;var side;if(e1.Side==ClipperLib.EdgeSide.esLeft){if(e2.Side==ClipperLib.EdgeSide.esLeft){this.ReversePolyPtLinks(p2_lft);p2_lft.Next=p1_lft;p1_lft.Prev=p2_lft;p1_rt.Next=p2_rt;p2_rt.Prev=p1_rt;outRec1.Pts=p2_rt}else{p2_rt.Next=p1_lft;p1_lft.Prev=p2_rt;p2_lft.Prev=p1_rt;p1_rt.Next=p2_lft;outRec1.Pts=p2_lft}side=ClipperLib.EdgeSide.esLeft}else{if(e2.Side==ClipperLib.EdgeSide.esRight){this.ReversePolyPtLinks(p2_lft);p1_rt.Next=p2_rt;p2_rt.Prev=p1_rt;p2_lft.Next=p1_lft;p1_lft.Prev=p2_lft}else{p1_rt.Next=p2_lft;p2_lft.Prev=p1_rt;p1_lft.Prev=p2_rt;p2_rt.Next=p1_lft}side=ClipperLib.EdgeSide.esRight}outRec1.BottomPt=null;if(holeStateRec==outRec2){if(outRec2.FirstLeft!=outRec1)outRec1.FirstLeft=outRec2.FirstLeft;outRec1.IsHole=outRec2.IsHole}outRec2.Pts=null;outRec2.BottomPt=null;outRec2.FirstLeft=outRec1;var OKIdx=e1.OutIdx;var ObsoleteIdx=e2.OutIdx;e1.OutIdx=-1;e2.OutIdx=-1;var e=this.m_ActiveEdges;while(e!==null){if(e.OutIdx==ObsoleteIdx){e.OutIdx=OKIdx;e.Side=side;break}e=e.NextInAEL}outRec2.Idx=outRec1.Idx};ClipperLib.Clipper.prototype.ReversePolyPtLinks=function(pp){if(pp===null)return;var pp1;var pp2;pp1=pp;do{pp2=pp1.Next;pp1.Next=pp1.Prev;pp1.Prev=pp2;pp1=pp2}while(pp1!=pp)};ClipperLib.Clipper.SwapSides=function(edge1,edge2){var side=edge1.Side;edge1.Side=edge2.Side;edge2.Side=side};ClipperLib.Clipper.SwapPolyIndexes=function(edge1,edge2){var outIdx=edge1.OutIdx;edge1.OutIdx=edge2.OutIdx;edge2.OutIdx=outIdx};ClipperLib.Clipper.prototype.IntersectEdges=function(e1,e2,pt){var e1Contributing=e1.OutIdx>=0;var e2Contributing=e2.OutIdx>=0;if(use_xyz)this.SetZ(pt,e1,e2);if(use_lines){if(e1.WindDelta===0||e2.WindDelta===0){if(e1.WindDelta==0&&e2.WindDelta==0)return;else if(e1.PolyTyp==e2.PolyTyp&&e1.WindDelta!=e2.WindDelta&&this.m_ClipType==ClipperLib.ClipType.ctUnion){if(e1.WindDelta===0){if(e2Contributing){this.AddOutPt(e1,pt);if(e1Contributing)e1.OutIdx=-1}}else{if(e1Contributing){this.AddOutPt(e2,pt);if(e2Contributing)e2.OutIdx=-1}}}else if(e1.PolyTyp!=e2.PolyTyp){if(e1.WindDelta===0&&Math.abs(e2.WindCnt)==1&&(this.m_ClipType!=ClipperLib.ClipType.ctUnion||e2.WindCnt2===0)){this.AddOutPt(e1,pt);if(e1Contributing)e1.OutIdx=-1}else if(e2.WindDelta===0&&Math.abs(e1.WindCnt)==1&&(this.m_ClipType!=ClipperLib.ClipType.ctUnion||e1.WindCnt2===0)){
this.AddOutPt(e2,pt);if(e2Contributing)e2.OutIdx=-1}}return}}if(e1.PolyTyp==e2.PolyTyp){if(this.IsEvenOddFillType(e1)){var oldE1WindCnt=e1.WindCnt;e1.WindCnt=e2.WindCnt;e2.WindCnt=oldE1WindCnt}else{if(e1.WindCnt+e2.WindDelta===0)e1.WindCnt=-e1.WindCnt;else e1.WindCnt+=e2.WindDelta;if(e2.WindCnt-e1.WindDelta===0)e2.WindCnt=-e2.WindCnt;else e2.WindCnt-=e1.WindDelta}}else{if(!this.IsEvenOddFillType(e2))e1.WindCnt2+=e2.WindDelta;else e1.WindCnt2=e1.WindCnt2===0?1:0;if(!this.IsEvenOddFillType(e1))e2.WindCnt2-=e1.WindDelta;else e2.WindCnt2=e2.WindCnt2===0?1:0}var e1FillType,e2FillType,e1FillType2,e2FillType2;if(e1.PolyTyp==ClipperLib.PolyType.ptSubject){e1FillType=this.m_SubjFillType;e1FillType2=this.m_ClipFillType}else{e1FillType=this.m_ClipFillType;e1FillType2=this.m_SubjFillType}if(e2.PolyTyp==ClipperLib.PolyType.ptSubject){e2FillType=this.m_SubjFillType;e2FillType2=this.m_ClipFillType}else{e2FillType=this.m_ClipFillType;e2FillType2=this.m_SubjFillType}var e1Wc,e2Wc;switch(e1FillType){case ClipperLib.PolyFillType.pftPositive:e1Wc=e1.WindCnt;break;case ClipperLib.PolyFillType.pftNegative:e1Wc=-e1.WindCnt;break;default:e1Wc=Math.abs(e1.WindCnt);break}switch(e2FillType){case ClipperLib.PolyFillType.pftPositive:e2Wc=e2.WindCnt;break;case ClipperLib.PolyFillType.pftNegative:e2Wc=-e2.WindCnt;break;default:e2Wc=Math.abs(e2.WindCnt);break}if(e1Contributing&&e2Contributing){if(e1Wc!=0&&e1Wc!=1||e2Wc!=0&&e2Wc!=1||e1.PolyTyp!=e2.PolyTyp&&this.m_ClipType!=ClipperLib.ClipType.ctXor){this.AddLocalMaxPoly(e1,e2,pt)}else{this.AddOutPt(e1,pt);this.AddOutPt(e2,pt);ClipperLib.Clipper.SwapSides(e1,e2);ClipperLib.Clipper.SwapPolyIndexes(e1,e2)}}else if(e1Contributing){if(e2Wc===0||e2Wc==1){this.AddOutPt(e1,pt);ClipperLib.Clipper.SwapSides(e1,e2);ClipperLib.Clipper.SwapPolyIndexes(e1,e2)}}else if(e2Contributing){if(e1Wc===0||e1Wc==1){this.AddOutPt(e2,pt);ClipperLib.Clipper.SwapSides(e1,e2);ClipperLib.Clipper.SwapPolyIndexes(e1,e2)}}else if((e1Wc==0||e1Wc==1)&&(e2Wc==0||e2Wc==1)){var e1Wc2,e2Wc2;switch(e1FillType2){case ClipperLib.PolyFillType.pftPositive:e1Wc2=e1.WindCnt2;break;case ClipperLib.PolyFillType.pftNegative:e1Wc2=-e1.WindCnt2;break;default:e1Wc2=Math.abs(e1.WindCnt2);break}switch(e2FillType2){case ClipperLib.PolyFillType.pftPositive:e2Wc2=e2.WindCnt2;break;case ClipperLib.PolyFillType.pftNegative:e2Wc2=-e2.WindCnt2;break;default:e2Wc2=Math.abs(e2.WindCnt2);break}if(e1.PolyTyp!=e2.PolyTyp){this.AddLocalMinPoly(e1,e2,pt)}else if(e1Wc==1&&e2Wc==1)switch(this.m_ClipType){case ClipperLib.ClipType.ctIntersection:if(e1Wc2>0&&e2Wc2>0)this.AddLocalMinPoly(e1,e2,pt);break;case ClipperLib.ClipType.ctUnion:if(e1Wc2<=0&&e2Wc2<=0)this.AddLocalMinPoly(e1,e2,pt);break;case ClipperLib.ClipType.ctDifference:if(e1.PolyTyp==ClipperLib.PolyType.ptClip&&e1Wc2>0&&e2Wc2>0||e1.PolyTyp==ClipperLib.PolyType.ptSubject&&e1Wc2<=0&&e2Wc2<=0)this.AddLocalMinPoly(e1,e2,pt);break;case ClipperLib.ClipType.ctXor:this.AddLocalMinPoly(e1,e2,pt);break}else ClipperLib.Clipper.SwapSides(e1,e2)}};ClipperLib.Clipper.prototype.DeleteFromAEL=function(e){var AelPrev=e.PrevInAEL;var AelNext=e.NextInAEL;if(AelPrev===null&&AelNext===null&&e!=this.m_ActiveEdges)return;if(AelPrev!==null)AelPrev.NextInAEL=AelNext;else this.m_ActiveEdges=AelNext;if(AelNext!==null)AelNext.PrevInAEL=AelPrev;e.NextInAEL=null;e.PrevInAEL=null};ClipperLib.Clipper.prototype.DeleteFromSEL=function(e){var SelPrev=e.PrevInSEL;var SelNext=e.NextInSEL;if(SelPrev===null&&SelNext===null&&e!=this.m_SortedEdges)return;if(SelPrev!==null)SelPrev.NextInSEL=SelNext;else this.m_SortedEdges=SelNext;if(SelNext!==null)SelNext.PrevInSEL=SelPrev;e.NextInSEL=null;e.PrevInSEL=null};ClipperLib.Clipper.prototype.UpdateEdgeIntoAEL=function(e){if(e.NextInLML===null)ClipperLib.Error("UpdateEdgeIntoAEL: invalid call");var AelPrev=e.PrevInAEL;var AelNext=e.NextInAEL;e.NextInLML.OutIdx=e.OutIdx;if(AelPrev!==null)AelPrev.NextInAEL=e.NextInLML;else this.m_ActiveEdges=e.NextInLML;if(AelNext!==null)AelNext.PrevInAEL=e.NextInLML;e.NextInLML.Side=e.Side;e.NextInLML.WindDelta=e.WindDelta;e.NextInLML.WindCnt=e.WindCnt;e.NextInLML.WindCnt2=e.WindCnt2;e=e.NextInLML;e.Curr.X=e.Bot.X;e.Curr.Y=e.Bot.Y;e.PrevInAEL=AelPrev;e.NextInAEL=AelNext;if(!ClipperLib.ClipperBase.IsHorizontal(e))this.InsertScanbeam(e.Top.Y);return e};ClipperLib.Clipper.prototype.ProcessHorizontals=function(isTopOfScanbeam){var horzEdge=this.m_SortedEdges;while(horzEdge!==null){this.DeleteFromSEL(horzEdge);this.ProcessHorizontal(horzEdge,isTopOfScanbeam);horzEdge=this.m_SortedEdges}};ClipperLib.Clipper.prototype.GetHorzDirection=function(HorzEdge,$var){if(HorzEdge.Bot.X<HorzEdge.Top.X){$var.Left=HorzEdge.Bot.X;$var.Right=HorzEdge.Top.X;$var.Dir=ClipperLib.Direction.dLeftToRight}else{$var.Left=HorzEdge.Top.X;$var.Right=HorzEdge.Bot.X;$var.Dir=ClipperLib.Direction.dRightToLeft}};ClipperLib.Clipper.prototype.ProcessHorizontal=function(horzEdge,isTopOfScanbeam){var $var={Dir:null,Left:null,Right:null};this.GetHorzDirection(horzEdge,$var);var dir=$var.Dir;var horzLeft=$var.Left;var horzRight=$var.Right;var eLastHorz=horzEdge,eMaxPair=null;while(eLastHorz.NextInLML!==null&&ClipperLib.ClipperBase.IsHorizontal(eLastHorz.NextInLML))eLastHorz=eLastHorz.NextInLML;if(eLastHorz.NextInLML===null)eMaxPair=this.GetMaximaPair(eLastHorz);for(;;){var IsLastHorz=horzEdge==eLastHorz;var e=this.GetNextInAEL(horzEdge,dir);while(e!==null){if(e.Curr.X==horzEdge.Top.X&&horzEdge.NextInLML!==null&&e.Dx<horzEdge.NextInLML.Dx)break;var eNext=this.GetNextInAEL(e,dir);if(dir==ClipperLib.Direction.dLeftToRight&&e.Curr.X<=horzRight||dir==ClipperLib.Direction.dRightToLeft&&e.Curr.X>=horzLeft){if(e==eMaxPair&&IsLastHorz){if(horzEdge.OutIdx>=0){var op1=this.AddOutPt(horzEdge,horzEdge.Top);var eNextHorz=this.m_SortedEdges;while(eNextHorz!==null){if(eNextHorz.OutIdx>=0&&this.HorzSegmentsOverlap(horzEdge.Bot.X,horzEdge.Top.X,eNextHorz.Bot.X,eNextHorz.Top.X)){var op2=this.AddOutPt(eNextHorz,eNextHorz.Bot);this.AddJoin(op2,op1,eNextHorz.Top)}eNextHorz=eNextHorz.NextInSEL}this.AddGhostJoin(op1,horzEdge.Bot);this.AddLocalMaxPoly(horzEdge,eMaxPair,horzEdge.Top)}this.DeleteFromAEL(horzEdge);this.DeleteFromAEL(eMaxPair);return}else if(dir==ClipperLib.Direction.dLeftToRight){var Pt=new ClipperLib.IntPoint(e.Curr.X,horzEdge.Curr.Y);this.IntersectEdges(horzEdge,e,Pt)}else{var Pt=new ClipperLib.IntPoint(e.Curr.X,horzEdge.Curr.Y);this.IntersectEdges(e,horzEdge,Pt)}this.SwapPositionsInAEL(horzEdge,e)}else if(dir==ClipperLib.Direction.dLeftToRight&&e.Curr.X>=horzRight||dir==ClipperLib.Direction.dRightToLeft&&e.Curr.X<=horzLeft)break;e=eNext}if(horzEdge.NextInLML!==null&&ClipperLib.ClipperBase.IsHorizontal(horzEdge.NextInLML)){horzEdge=this.UpdateEdgeIntoAEL(horzEdge);if(horzEdge.OutIdx>=0)this.AddOutPt(horzEdge,horzEdge.Bot);var $var={Dir:dir,Left:horzLeft,Right:horzRight};this.GetHorzDirection(horzEdge,$var);dir=$var.Dir;horzLeft=$var.Left;horzRight=$var.Right}else break}if(horzEdge.NextInLML!==null){if(horzEdge.OutIdx>=0){var op1=this.AddOutPt(horzEdge,horzEdge.Top);if(isTopOfScanbeam)this.AddGhostJoin(op1,horzEdge.Bot);horzEdge=this.UpdateEdgeIntoAEL(horzEdge);if(horzEdge.WindDelta===0)return;var ePrev=horzEdge.PrevInAEL;var eNext=horzEdge.NextInAEL;if(ePrev!==null&&ePrev.Curr.X==horzEdge.Bot.X&&ePrev.Curr.Y==horzEdge.Bot.Y&&ePrev.WindDelta!==0&&(ePrev.OutIdx>=0&&ePrev.Curr.Y>ePrev.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(horzEdge,ePrev,this.m_UseFullRange))){var op2=this.AddOutPt(ePrev,horzEdge.Bot);this.AddJoin(op1,op2,horzEdge.Top)}else if(eNext!==null&&eNext.Curr.X==horzEdge.Bot.X&&eNext.Curr.Y==horzEdge.Bot.Y&&eNext.WindDelta!==0&&eNext.OutIdx>=0&&eNext.Curr.Y>eNext.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(horzEdge,eNext,this.m_UseFullRange)){var op2=this.AddOutPt(eNext,horzEdge.Bot);this.AddJoin(op1,op2,horzEdge.Top)}}else horzEdge=this.UpdateEdgeIntoAEL(horzEdge)}else{if(horzEdge.OutIdx>=0)this.AddOutPt(horzEdge,horzEdge.Top);this.DeleteFromAEL(horzEdge)}};ClipperLib.Clipper.prototype.GetNextInAEL=function(e,Direction){return Direction==ClipperLib.Direction.dLeftToRight?e.NextInAEL:e.PrevInAEL};ClipperLib.Clipper.prototype.IsMinima=function(e){return e!==null&&e.Prev.NextInLML!=e&&e.Next.NextInLML!=e};ClipperLib.Clipper.prototype.IsMaxima=function(e,Y){return e!==null&&e.Top.Y==Y&&e.NextInLML===null};ClipperLib.Clipper.prototype.IsIntermediate=function(e,Y){return e.Top.Y==Y&&e.NextInLML!==null};ClipperLib.Clipper.prototype.GetMaximaPair=function(e){var result=null;if(ClipperLib.IntPoint.op_Equality(e.Next.Top,e.Top)&&e.Next.NextInLML===null)result=e.Next;else if(ClipperLib.IntPoint.op_Equality(e.Prev.Top,e.Top)&&e.Prev.NextInLML===null)result=e.Prev;if(result!==null&&(result.OutIdx==-2||result.NextInAEL==result.PrevInAEL&&!ClipperLib.ClipperBase.IsHorizontal(result)))return null;return result};ClipperLib.Clipper.prototype.ProcessIntersections=function(topY){if(this.m_ActiveEdges==null)return true;try{this.BuildIntersectList(topY);if(this.m_IntersectList.length==0)return true;if(this.m_IntersectList.length==1||this.FixupIntersectionOrder())this.ProcessIntersectList();else return false}catch($$e2){this.m_SortedEdges=null;this.m_IntersectList.length=0;ClipperLib.Error("ProcessIntersections error")}this.m_SortedEdges=null;return true};ClipperLib.Clipper.prototype.BuildIntersectList=function(topY){if(this.m_ActiveEdges===null)return;var e=this.m_ActiveEdges;this.m_SortedEdges=e;while(e!==null){e.PrevInSEL=e.PrevInAEL;e.NextInSEL=e.NextInAEL;e.Curr.X=ClipperLib.Clipper.TopX(e,topY);e=e.NextInAEL}var isModified=true;while(isModified&&this.m_SortedEdges!==null){isModified=false;e=this.m_SortedEdges;while(e.NextInSEL!==null){var eNext=e.NextInSEL;var pt=new ClipperLib.IntPoint;if(e.Curr.X>eNext.Curr.X){this.IntersectPoint(e,eNext,pt);var newNode=new ClipperLib.IntersectNode;newNode.Edge1=e;newNode.Edge2=eNext;newNode.Pt.X=pt.X;newNode.Pt.Y=pt.Y;this.m_IntersectList.push(newNode);this.SwapPositionsInSEL(e,eNext);isModified=true}else e=eNext}if(e.PrevInSEL!==null)e.PrevInSEL.NextInSEL=null;else break}this.m_SortedEdges=null};ClipperLib.Clipper.prototype.EdgesAdjacent=function(inode){return inode.Edge1.NextInSEL==inode.Edge2||inode.Edge1.PrevInSEL==inode.Edge2};ClipperLib.Clipper.IntersectNodeSort=function(node1,node2){return node2.Pt.Y-node1.Pt.Y};ClipperLib.Clipper.prototype.FixupIntersectionOrder=function(){this.m_IntersectList.sort(this.m_IntersectNodeComparer);this.CopyAELToSEL();var cnt=this.m_IntersectList.length;for(var i=0;i<cnt;i++){if(!this.EdgesAdjacent(this.m_IntersectList[i])){var j=i+1;while(j<cnt&&!this.EdgesAdjacent(this.m_IntersectList[j]))j++;if(j==cnt)return false;var tmp=this.m_IntersectList[i];this.m_IntersectList[i]=this.m_IntersectList[j];this.m_IntersectList[j]=tmp}this.SwapPositionsInSEL(this.m_IntersectList[i].Edge1,this.m_IntersectList[i].Edge2)}return true};ClipperLib.Clipper.prototype.ProcessIntersectList=function(){for(var i=0,ilen=this.m_IntersectList.length;i<ilen;i++){var iNode=this.m_IntersectList[i];this.IntersectEdges(iNode.Edge1,iNode.Edge2,iNode.Pt);this.SwapPositionsInAEL(iNode.Edge1,iNode.Edge2)}this.m_IntersectList.length=0};var R1=function(a){return a<0?Math.ceil(a-.5):Math.round(a)};var R2=function(a){return a<0?Math.ceil(a-.5):Math.floor(a+.5)};var R3=function(a){return a<0?-Math.round(Math.abs(a)):Math.round(a)};var R4=function(a){if(a<0){a-=.5;return a<-2147483648?Math.ceil(a):a|0}else{a+=.5;return a>2147483647?Math.floor(a):a|0}};if(browser.msie)ClipperLib.Clipper.Round=R1;else if(browser.chromium)ClipperLib.Clipper.Round=R3;else if(browser.safari)ClipperLib.Clipper.Round=R4;else ClipperLib.Clipper.Round=R2;ClipperLib.Clipper.TopX=function(edge,currentY){if(currentY==edge.Top.Y)return edge.Top.X;return edge.Bot.X+ClipperLib.Clipper.Round(edge.Dx*(currentY-edge.Bot.Y))};ClipperLib.Clipper.prototype.IntersectPoint=function(edge1,edge2,ip){ip.X=0;ip.Y=0;var b1,b2;if(edge1.Dx==edge2.Dx){ip.Y=edge1.Curr.Y;ip.X=ClipperLib.Clipper.TopX(edge1,ip.Y);return}if(edge1.Delta.X===0){ip.X=edge1.Bot.X;if(ClipperLib.ClipperBase.IsHorizontal(edge2)){ip.Y=edge2.Bot.Y}else{b2=edge2.Bot.Y-edge2.Bot.X/edge2.Dx;ip.Y=ClipperLib.Clipper.Round(ip.X/edge2.Dx+b2)}}else if(edge2.Delta.X===0){ip.X=edge2.Bot.X;if(ClipperLib.ClipperBase.IsHorizontal(edge1)){ip.Y=edge1.Bot.Y}else{b1=edge1.Bot.Y-edge1.Bot.X/edge1.Dx;ip.Y=ClipperLib.Clipper.Round(ip.X/edge1.Dx+b1)}}else{b1=edge1.Bot.X-edge1.Bot.Y*edge1.Dx;b2=edge2.Bot.X-edge2.Bot.Y*edge2.Dx;var q=(b2-b1)/(edge1.Dx-edge2.Dx);ip.Y=ClipperLib.Clipper.Round(q);if(Math.abs(edge1.Dx)<Math.abs(edge2.Dx))ip.X=ClipperLib.Clipper.Round(edge1.Dx*q+b1);else ip.X=ClipperLib.Clipper.Round(edge2.Dx*q+b2)}if(ip.Y<edge1.Top.Y||ip.Y<edge2.Top.Y){if(edge1.Top.Y>edge2.Top.Y){ip.Y=edge1.Top.Y;ip.X=ClipperLib.Clipper.TopX(edge2,edge1.Top.Y);return ip.X<edge1.Top.X}else ip.Y=edge2.Top.Y;if(Math.abs(edge1.Dx)<Math.abs(edge2.Dx))ip.X=ClipperLib.Clipper.TopX(edge1,ip.Y);else ip.X=ClipperLib.Clipper.TopX(edge2,ip.Y)}if(ip.Y>edge1.Curr.Y){ip.Y=edge1.Curr.Y;if(Math.abs(edge1.Dx)>Math.abs(edge2.Dx))ip.X=ClipperLib.Clipper.TopX(edge2,ip.Y);else ip.X=ClipperLib.Clipper.TopX(edge1,ip.Y)}};ClipperLib.Clipper.prototype.ProcessEdgesAtTopOfScanbeam=function(topY){var e=this.m_ActiveEdges;while(e!==null){var IsMaximaEdge=this.IsMaxima(e,topY);if(IsMaximaEdge){var eMaxPair=this.GetMaximaPair(e);IsMaximaEdge=eMaxPair===null||!ClipperLib.ClipperBase.IsHorizontal(eMaxPair)}if(IsMaximaEdge){var ePrev=e.PrevInAEL;this.DoMaxima(e);if(ePrev===null)e=this.m_ActiveEdges;else e=ePrev.NextInAEL}else{if(this.IsIntermediate(e,topY)&&ClipperLib.ClipperBase.IsHorizontal(e.NextInLML)){e=this.UpdateEdgeIntoAEL(e);if(e.OutIdx>=0)this.AddOutPt(e,e.Bot);this.AddEdgeToSEL(e)}else{e.Curr.X=ClipperLib.Clipper.TopX(e,topY);e.Curr.Y=topY}if(this.StrictlySimple){var ePrev=e.PrevInAEL;if(e.OutIdx>=0&&e.WindDelta!==0&&ePrev!==null&&ePrev.OutIdx>=0&&ePrev.Curr.X==e.Curr.X&&ePrev.WindDelta!==0){var ip=new ClipperLib.IntPoint(e.Curr);if(use_xyz){this.SetZ(ip,ePrev,e)}var op=this.AddOutPt(ePrev,ip);var op2=this.AddOutPt(e,ip);this.AddJoin(op,op2,ip)}}e=e.NextInAEL}}this.ProcessHorizontals(true);e=this.m_ActiveEdges;while(e!==null){if(this.IsIntermediate(e,topY)){var op=null;if(e.OutIdx>=0)op=this.AddOutPt(e,e.Top);e=this.UpdateEdgeIntoAEL(e);var ePrev=e.PrevInAEL;var eNext=e.NextInAEL;if(ePrev!==null&&ePrev.Curr.X==e.Bot.X&&ePrev.Curr.Y==e.Bot.Y&&op!==null&&ePrev.OutIdx>=0&&ePrev.Curr.Y>ePrev.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(e,ePrev,this.m_UseFullRange)&&e.WindDelta!==0&&ePrev.WindDelta!==0){var op2=this.AddOutPt(ePrev,e.Bot);this.AddJoin(op,op2,e.Top)}else if(eNext!==null&&eNext.Curr.X==e.Bot.X&&eNext.Curr.Y==e.Bot.Y&&op!==null&&eNext.OutIdx>=0&&eNext.Curr.Y>eNext.Top.Y&&ClipperLib.ClipperBase.SlopesEqual(e,eNext,this.m_UseFullRange)&&e.WindDelta!==0&&eNext.WindDelta!==0){var op2=this.AddOutPt(eNext,e.Bot);this.AddJoin(op,op2,e.Top)}}e=e.NextInAEL}};ClipperLib.Clipper.prototype.DoMaxima=function(e){var eMaxPair=this.GetMaximaPair(e);if(eMaxPair===null){if(e.OutIdx>=0)this.AddOutPt(e,e.Top);this.DeleteFromAEL(e);return}var eNext=e.NextInAEL;var use_lines=true;while(eNext!==null&&eNext!=eMaxPair){this.IntersectEdges(e,eNext,e.Top);this.SwapPositionsInAEL(e,eNext);eNext=e.NextInAEL}if(e.OutIdx==-1&&eMaxPair.OutIdx==-1){this.DeleteFromAEL(e);this.DeleteFromAEL(eMaxPair)}else if(e.OutIdx>=0&&eMaxPair.OutIdx>=0){if(e.OutIdx>=0)this.AddLocalMaxPoly(e,eMaxPair,e.Top);this.DeleteFromAEL(e);this.DeleteFromAEL(eMaxPair)}else if(use_lines&&e.WindDelta===0){if(e.OutIdx>=0){this.AddOutPt(e,e.Top);e.OutIdx=-1}this.DeleteFromAEL(e);if(eMaxPair.OutIdx>=0){this.AddOutPt(eMaxPair,e.Top);eMaxPair.OutIdx=-1}this.DeleteFromAEL(eMaxPair)}else ClipperLib.Error("DoMaxima error")};ClipperLib.Clipper.ReversePaths=function(polys){for(var i=0,len=polys.length;i<len;i++)polys[i].reverse()};ClipperLib.Clipper.Orientation=function(poly){return ClipperLib.Clipper.Area(poly)>=0};ClipperLib.Clipper.prototype.PointCount=function(pts){if(pts===null)return 0;var result=0;var p=pts;do{result++;p=p.Next}while(p!=pts);return result};ClipperLib.Clipper.prototype.BuildResult=function(polyg){ClipperLib.Clear(polyg);for(var i=0,ilen=this.m_PolyOuts.length;i<ilen;i++){var outRec=this.m_PolyOuts[i];if(outRec.Pts===null)continue;var p=outRec.Pts.Prev;var cnt=this.PointCount(p);if(cnt<2)continue;var pg=new Array(cnt);for(var j=0;j<cnt;j++){pg[j]=p.Pt;p=p.Prev}polyg.push(pg)}};ClipperLib.Clipper.prototype.BuildResult2=function(polytree){polytree.Clear();for(var i=0,ilen=this.m_PolyOuts.length;i<ilen;i++){var outRec=this.m_PolyOuts[i];var cnt=this.PointCount(outRec.Pts);if(outRec.IsOpen&&cnt<2||!outRec.IsOpen&&cnt<3)continue;this.FixHoleLinkage(outRec);var pn=new ClipperLib.PolyNode;polytree.m_AllPolys.push(pn);outRec.PolyNode=pn;pn.m_polygon.length=cnt;var op=outRec.Pts.Prev;for(var j=0;j<cnt;j++){pn.m_polygon[j]=op.Pt;op=op.Prev}}for(var i=0,ilen=this.m_PolyOuts.length;i<ilen;i++){var outRec=this.m_PolyOuts[i];if(outRec.PolyNode===null)continue;else if(outRec.IsOpen){outRec.PolyNode.IsOpen=true;polytree.AddChild(outRec.PolyNode)}else if(outRec.FirstLeft!==null&&outRec.FirstLeft.PolyNode!=null)outRec.FirstLeft.PolyNode.AddChild(outRec.PolyNode);else polytree.AddChild(outRec.PolyNode)}};ClipperLib.Clipper.prototype.FixupOutPolygon=function(outRec){var lastOK=null;outRec.BottomPt=null;var pp=outRec.Pts;for(;;){if(pp.Prev==pp||pp.Prev==pp.Next){outRec.Pts=null;return}if(ClipperLib.IntPoint.op_Equality(pp.Pt,pp.Next.Pt)||ClipperLib.IntPoint.op_Equality(pp.Pt,pp.Prev.Pt)||ClipperLib.ClipperBase.SlopesEqual(pp.Prev.Pt,pp.Pt,pp.Next.Pt,this.m_UseFullRange)&&(!this.PreserveCollinear||!this.Pt2IsBetweenPt1AndPt3(pp.Prev.Pt,pp.Pt,pp.Next.Pt))){lastOK=null;pp.Prev.Next=pp.Next;pp.Next.Prev=pp.Prev;pp=pp.Prev}else if(pp==lastOK)break;else{if(lastOK===null)lastOK=pp;pp=pp.Next}}outRec.Pts=pp};ClipperLib.Clipper.prototype.DupOutPt=function(outPt,InsertAfter){var result=new ClipperLib.OutPt;result.Pt.X=outPt.Pt.X;result.Pt.Y=outPt.Pt.Y;result.Idx=outPt.Idx;if(InsertAfter){result.Next=outPt.Next;result.Prev=outPt;outPt.Next.Prev=result;outPt.Next=result}else{result.Prev=outPt.Prev;result.Next=outPt;outPt.Prev.Next=result;outPt.Prev=result}return result};ClipperLib.Clipper.prototype.GetOverlap=function(a1,a2,b1,b2,$val){if(a1<a2){if(b1<b2){$val.Left=Math.max(a1,b1);$val.Right=Math.min(a2,b2)}else{$val.Left=Math.max(a1,b2);$val.Right=Math.min(a2,b1)}}else{if(b1<b2){$val.Left=Math.max(a2,b1);$val.Right=Math.min(a1,b2)}else{$val.Left=Math.max(a2,b2);$val.Right=Math.min(a1,b1)}}return $val.Left<$val.Right};ClipperLib.Clipper.prototype.JoinHorz=function(op1,op1b,op2,op2b,Pt,DiscardLeft){var Dir1=op1.Pt.X>op1b.Pt.X?ClipperLib.Direction.dRightToLeft:ClipperLib.Direction.dLeftToRight;var Dir2=op2.Pt.X>op2b.Pt.X?ClipperLib.Direction.dRightToLeft:ClipperLib.Direction.dLeftToRight;if(Dir1==Dir2)return false;if(Dir1==ClipperLib.Direction.dLeftToRight){while(op1.Next.Pt.X<=Pt.X&&op1.Next.Pt.X>=op1.Pt.X&&op1.Next.Pt.Y==Pt.Y)op1=op1.Next;if(DiscardLeft&&op1.Pt.X!=Pt.X)op1=op1.Next;op1b=this.DupOutPt(op1,!DiscardLeft);if(ClipperLib.IntPoint.op_Inequality(op1b.Pt,Pt)){op1=op1b;op1.Pt.X=Pt.X;op1.Pt.Y=Pt.Y;op1b=this.DupOutPt(op1,!DiscardLeft)}}else{while(op1.Next.Pt.X>=Pt.X&&op1.Next.Pt.X<=op1.Pt.X&&op1.Next.Pt.Y==Pt.Y)op1=op1.Next;if(!DiscardLeft&&op1.Pt.X!=Pt.X)op1=op1.Next;op1b=this.DupOutPt(op1,DiscardLeft);if(ClipperLib.IntPoint.op_Inequality(op1b.Pt,Pt)){op1=op1b;op1.Pt.X=Pt.X;op1.Pt.Y=Pt.Y;op1b=this.DupOutPt(op1,DiscardLeft)}}if(Dir2==ClipperLib.Direction.dLeftToRight){while(op2.Next.Pt.X<=Pt.X&&op2.Next.Pt.X>=op2.Pt.X&&op2.Next.Pt.Y==Pt.Y)op2=op2.Next;if(DiscardLeft&&op2.Pt.X!=Pt.X)op2=op2.Next;op2b=this.DupOutPt(op2,!DiscardLeft);if(ClipperLib.IntPoint.op_Inequality(op2b.Pt,Pt)){op2=op2b;op2.Pt.X=Pt.X;op2.Pt.Y=Pt.Y;op2b=this.DupOutPt(op2,!DiscardLeft)}}else{while(op2.Next.Pt.X>=Pt.X&&op2.Next.Pt.X<=op2.Pt.X&&op2.Next.Pt.Y==Pt.Y)op2=op2.Next;if(!DiscardLeft&&op2.Pt.X!=Pt.X)op2=op2.Next;op2b=this.DupOutPt(op2,DiscardLeft);if(ClipperLib.IntPoint.op_Inequality(op2b.Pt,Pt)){op2=op2b;op2.Pt.X=Pt.X;op2.Pt.Y=Pt.Y;op2b=this.DupOutPt(op2,DiscardLeft)}}if(Dir1==ClipperLib.Direction.dLeftToRight==DiscardLeft){op1.Prev=op2;op2.Next=op1;op1b.Next=op2b;op2b.Prev=op1b}else{op1.Next=op2;op2.Prev=op1;op1b.Prev=op2b;op2b.Next=op1b}return true};ClipperLib.Clipper.prototype.JoinPoints=function(j,outRec1,outRec2){var op1=j.OutPt1,op1b=new ClipperLib.OutPt;var op2=j.OutPt2,op2b=new ClipperLib.OutPt;var isHorizontal=j.OutPt1.Pt.Y==j.OffPt.Y;if(isHorizontal&&ClipperLib.IntPoint.op_Equality(j.OffPt,j.OutPt1.Pt)&&ClipperLib.IntPoint.op_Equality(j.OffPt,j.OutPt2.Pt)){if(outRec1!=outRec2)return false;op1b=j.OutPt1.Next;while(op1b!=op1&&ClipperLib.IntPoint.op_Equality(op1b.Pt,j.OffPt))op1b=op1b.Next;var reverse1=op1b.Pt.Y>j.OffPt.Y;op2b=j.OutPt2.Next;while(op2b!=op2&&ClipperLib.IntPoint.op_Equality(op2b.Pt,j.OffPt))op2b=op2b.Next;var reverse2=op2b.Pt.Y>j.OffPt.Y;if(reverse1==reverse2)return false;if(reverse1){op1b=this.DupOutPt(op1,false);op2b=this.DupOutPt(op2,true);op1.Prev=op2;op2.Next=op1;op1b.Next=op2b;op2b.Prev=op1b;j.OutPt1=op1;j.OutPt2=op1b;return true}else{op1b=this.DupOutPt(op1,true);op2b=this.DupOutPt(op2,false);op1.Next=op2;op2.Prev=op1;op1b.Prev=op2b;op2b.Next=op1b;j.OutPt1=op1;j.OutPt2=op1b;return true}}else if(isHorizontal){op1b=op1;while(op1.Prev.Pt.Y==op1.Pt.Y&&op1.Prev!=op1b&&op1.Prev!=op2)op1=op1.Prev;while(op1b.Next.Pt.Y==op1b.Pt.Y&&op1b.Next!=op1&&op1b.Next!=op2)op1b=op1b.Next;if(op1b.Next==op1||op1b.Next==op2)return false;op2b=op2;while(op2.Prev.Pt.Y==op2.Pt.Y&&op2.Prev!=op2b&&op2.Prev!=op1b)op2=op2.Prev;while(op2b.Next.Pt.Y==op2b.Pt.Y&&op2b.Next!=op2&&op2b.Next!=op1)op2b=op2b.Next;if(op2b.Next==op2||op2b.Next==op1)return false;var $val={Left:null,Right:null};if(!this.GetOverlap(op1.Pt.X,op1b.Pt.X,op2.Pt.X,op2b.Pt.X,$val))return false;var Left=$val.Left;var Right=$val.Right;var Pt=new ClipperLib.IntPoint;var DiscardLeftSide;if(op1.Pt.X>=Left&&op1.Pt.X<=Right){Pt.X=op1.Pt.X;Pt.Y=op1.Pt.Y;DiscardLeftSide=op1.Pt.X>op1b.Pt.X}else if(op2.Pt.X>=Left&&op2.Pt.X<=Right){Pt.X=op2.Pt.X;Pt.Y=op2.Pt.Y;DiscardLeftSide=op2.Pt.X>op2b.Pt.X}else if(op1b.Pt.X>=Left&&op1b.Pt.X<=Right){Pt.X=op1b.Pt.X;Pt.Y=op1b.Pt.Y;DiscardLeftSide=op1b.Pt.X>op1.Pt.X}else{Pt.X=op2b.Pt.X;Pt.Y=op2b.Pt.Y;DiscardLeftSide=op2b.Pt.X>op2.Pt.X}j.OutPt1=op1;j.OutPt2=op2;return this.JoinHorz(op1,op1b,op2,op2b,Pt,DiscardLeftSide)}else{op1b=op1.Next;while(ClipperLib.IntPoint.op_Equality(op1b.Pt,op1.Pt)&&op1b!=op1)op1b=op1b.Next;var Reverse1=op1b.Pt.Y>op1.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(op1.Pt,op1b.Pt,j.OffPt,this.m_UseFullRange);if(Reverse1){op1b=op1.Prev;while(ClipperLib.IntPoint.op_Equality(op1b.Pt,op1.Pt)&&op1b!=op1)op1b=op1b.Prev;if(op1b.Pt.Y>op1.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(op1.Pt,op1b.Pt,j.OffPt,this.m_UseFullRange))return false}op2b=op2.Next;while(ClipperLib.IntPoint.op_Equality(op2b.Pt,op2.Pt)&&op2b!=op2)op2b=op2b.Next;var Reverse2=op2b.Pt.Y>op2.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(op2.Pt,op2b.Pt,j.OffPt,this.m_UseFullRange);if(Reverse2){op2b=op2.Prev;while(ClipperLib.IntPoint.op_Equality(op2b.Pt,op2.Pt)&&op2b!=op2)op2b=op2b.Prev;if(op2b.Pt.Y>op2.Pt.Y||!ClipperLib.ClipperBase.SlopesEqual(op2.Pt,op2b.Pt,j.OffPt,this.m_UseFullRange))return false}if(op1b==op1||op2b==op2||op1b==op2b||outRec1==outRec2&&Reverse1==Reverse2)return false;if(Reverse1){op1b=this.DupOutPt(op1,false);op2b=this.DupOutPt(op2,true);op1.Prev=op2;op2.Next=op1;op1b.Next=op2b;op2b.Prev=op1b;j.OutPt1=op1;j.OutPt2=op1b;return true}else{op1b=this.DupOutPt(op1,true);op2b=this.DupOutPt(op2,false);op1.Next=op2;op2.Prev=op1;op1b.Prev=op2b;op2b.Next=op1b;j.OutPt1=op1;j.OutPt2=op1b;return true}}};ClipperLib.Clipper.GetBounds=function(paths){var i=0,cnt=paths.length;while(i<cnt&&paths[i].length==0)i++;if(i==cnt)return new ClipperLib.IntRect(0,0,0,0);var result=new ClipperLib.IntRect;result.left=paths[i][0].X;result.right=result.left;result.top=paths[i][0].Y;result.bottom=result.top;for(;i<cnt;i++)for(var j=0,jlen=paths[i].length;j<jlen;j++){if(paths[i][j].X<result.left)result.left=paths[i][j].X;else if(paths[i][j].X>result.right)result.right=paths[i][j].X;if(paths[i][j].Y<result.top)result.top=paths[i][j].Y;else if(paths[i][j].Y>result.bottom)result.bottom=paths[i][j].Y}return result};ClipperLib.Clipper.prototype.GetBounds2=function(ops){var opStart=ops;var result=new ClipperLib.IntRect;result.left=ops.Pt.X;result.right=ops.Pt.X;result.top=ops.Pt.Y;result.bottom=ops.Pt.Y;ops=ops.Next;while(ops!=opStart){if(ops.Pt.X<result.left)result.left=ops.Pt.X;if(ops.Pt.X>result.right)result.right=ops.Pt.X;if(ops.Pt.Y<result.top)result.top=ops.Pt.Y;if(ops.Pt.Y>result.bottom)result.bottom=ops.Pt.Y;ops=ops.Next}return result};ClipperLib.Clipper.PointInPolygon=function(pt,path){var result=0,cnt=path.length;if(cnt<3)return 0;var ip=path[0];for(var i=1;i<=cnt;++i){var ipNext=i==cnt?path[0]:path[i];if(ipNext.Y==pt.Y){if(ipNext.X==pt.X||ip.Y==pt.Y&&ipNext.X>pt.X==ip.X<pt.X)return-1}if(ip.Y<pt.Y!=ipNext.Y<pt.Y){if(ip.X>=pt.X){if(ipNext.X>pt.X)result=1-result;else{var d=(ip.X-pt.X)*(ipNext.Y-pt.Y)-(ipNext.X-pt.X)*(ip.Y-pt.Y);if(d==0)return-1;else if(d>0==ipNext.Y>ip.Y)result=1-result}}else{if(ipNext.X>pt.X){var d=(ip.X-pt.X)*(ipNext.Y-pt.Y)-(ipNext.X-pt.X)*(ip.Y-pt.Y);if(d==0)return-1;else if(d>0==ipNext.Y>ip.Y)result=1-result}}}ip=ipNext}return result};ClipperLib.Clipper.prototype.PointInPolygon=function(pt,op){var result=0;var startOp=op;var ptx=pt.X,pty=pt.Y;var poly0x=op.Pt.X,poly0y=op.Pt.Y;do{op=op.Next;var poly1x=op.Pt.X,poly1y=op.Pt.Y;if(poly1y==pty){if(poly1x==ptx||poly0y==pty&&poly1x>ptx==poly0x<ptx)return-1}if(poly0y<pty!=poly1y<pty){if(poly0x>=ptx){if(poly1x>ptx)result=1-result;else{var d=(poly0x-ptx)*(poly1y-pty)-(poly1x-ptx)*(poly0y-pty);if(d==0)return-1;if(d>0==poly1y>poly0y)result=1-result}}else{if(poly1x>ptx){var d=(poly0x-ptx)*(poly1y-pty)-(poly1x-ptx)*(poly0y-pty);if(d==0)return-1;if(d>0==poly1y>poly0y)result=1-result}}}poly0x=poly1x;poly0y=poly1y}while(startOp!=op);return result};ClipperLib.Clipper.prototype.Poly2ContainsPoly1=function(outPt1,outPt2){var op=outPt1;do{var res=this.PointInPolygon(op.Pt,outPt2);if(res>=0)return res>0;op=op.Next}while(op!=outPt1);return true};ClipperLib.Clipper.prototype.FixupFirstLefts1=function(OldOutRec,NewOutRec){for(var i=0,ilen=this.m_PolyOuts.length;i<ilen;i++){var outRec=this.m_PolyOuts[i];if(outRec.Pts==null||outRec.FirstLeft==null)continue;var firstLeft=ClipperLib.Clipper.ParseFirstLeft(outRec.FirstLeft);if(firstLeft==OldOutRec){if(this.Poly2ContainsPoly1(outRec.Pts,NewOutRec.Pts))outRec.FirstLeft=NewOutRec}}};ClipperLib.Clipper.prototype.FixupFirstLefts2=function(OldOutRec,NewOutRec){for(var $i2=0,$t2=this.m_PolyOuts,$l2=$t2.length,outRec=$t2[$i2];$i2<$l2;$i2++,outRec=$t2[$i2])if(outRec.FirstLeft==OldOutRec)outRec.FirstLeft=NewOutRec};ClipperLib.Clipper.ParseFirstLeft=function(FirstLeft){while(FirstLeft!=null&&FirstLeft.Pts==null)FirstLeft=FirstLeft.FirstLeft;return FirstLeft};ClipperLib.Clipper.prototype.JoinCommonEdges=function(){for(var i=0,ilen=this.m_Joins.length;i<ilen;i++){var join=this.m_Joins[i];var outRec1=this.GetOutRec(join.OutPt1.Idx);var outRec2=this.GetOutRec(join.OutPt2.Idx);if(outRec1.Pts==null||outRec2.Pts==null)continue;var holeStateRec;if(outRec1==outRec2)holeStateRec=outRec1;else if(this.Param1RightOfParam2(outRec1,outRec2))holeStateRec=outRec2;else if(this.Param1RightOfParam2(outRec2,outRec1))holeStateRec=outRec1;else holeStateRec=this.GetLowermostRec(outRec1,outRec2);if(!this.JoinPoints(join,outRec1,outRec2))continue;if(outRec1==outRec2){outRec1.Pts=join.OutPt1;outRec1.BottomPt=null;outRec2=this.CreateOutRec();outRec2.Pts=join.OutPt2;this.UpdateOutPtIdxs(outRec2);if(this.m_UsingPolyTree)for(var j=0,jlen=this.m_PolyOuts.length;j<jlen-1;j++){var oRec=this.m_PolyOuts[j];if(oRec.Pts==null||ClipperLib.Clipper.ParseFirstLeft(oRec.FirstLeft)!=outRec1||oRec.IsHole==outRec1.IsHole)continue;if(this.Poly2ContainsPoly1(oRec.Pts,join.OutPt2))oRec.FirstLeft=outRec2}if(this.Poly2ContainsPoly1(outRec2.Pts,outRec1.Pts)){outRec2.IsHole=!outRec1.IsHole;outRec2.FirstLeft=outRec1;if(this.m_UsingPolyTree)this.FixupFirstLefts2(outRec2,outRec1);if((outRec2.IsHole^this.ReverseSolution)==this.Area(outRec2)>0)this.ReversePolyPtLinks(outRec2.Pts)}else if(this.Poly2ContainsPoly1(outRec1.Pts,outRec2.Pts)){outRec2.IsHole=outRec1.IsHole;outRec1.IsHole=!outRec2.IsHole;outRec2.FirstLeft=outRec1.FirstLeft;outRec1.FirstLeft=outRec2;if(this.m_UsingPolyTree)this.FixupFirstLefts2(outRec1,outRec2);if((outRec1.IsHole^this.ReverseSolution)==this.Area(outRec1)>0)this.ReversePolyPtLinks(outRec1.Pts)}else{outRec2.IsHole=outRec1.IsHole;outRec2.FirstLeft=outRec1.FirstLeft;if(this.m_UsingPolyTree)this.FixupFirstLefts1(outRec1,outRec2)}}else{outRec2.Pts=null;outRec2.BottomPt=null;outRec2.Idx=outRec1.Idx;outRec1.IsHole=holeStateRec.IsHole;if(holeStateRec==outRec2)outRec1.FirstLeft=outRec2.FirstLeft;outRec2.FirstLeft=outRec1;if(this.m_UsingPolyTree)this.FixupFirstLefts2(outRec2,outRec1)}}};ClipperLib.Clipper.prototype.UpdateOutPtIdxs=function(outrec){var op=outrec.Pts;do{op.Idx=outrec.Idx;op=op.Prev}while(op!=outrec.Pts)};ClipperLib.Clipper.prototype.DoSimplePolygons=function(){var i=0;while(i<this.m_PolyOuts.length){var outrec=this.m_PolyOuts[i++];var op=outrec.Pts;if(op==null||outrec.IsOpen)continue;do{var op2=op.Next;while(op2!=outrec.Pts){if(ClipperLib.IntPoint.op_Equality(op.Pt,op2.Pt)&&op2.Next!=op&&op2.Prev!=op){var op3=op.Prev;var op4=op2.Prev;op.Prev=op4;op4.Next=op;op2.Prev=op3;op3.Next=op2;outrec.Pts=op;var outrec2=this.CreateOutRec();outrec2.Pts=op2;this.UpdateOutPtIdxs(outrec2);if(this.Poly2ContainsPoly1(outrec2.Pts,outrec.Pts)){outrec2.IsHole=!outrec.IsHole;outrec2.FirstLeft=outrec;if(this.m_UsingPolyTree)this.FixupFirstLefts2(outrec2,outrec)}else if(this.Poly2ContainsPoly1(outrec.Pts,outrec2.Pts)){outrec2.IsHole=outrec.IsHole;outrec.IsHole=!outrec2.IsHole;outrec2.FirstLeft=outrec.FirstLeft;outrec.FirstLeft=outrec2;if(this.m_UsingPolyTree)this.FixupFirstLefts2(outrec,outrec2)}else{outrec2.IsHole=outrec.IsHole;outrec2.FirstLeft=outrec.FirstLeft;if(this.m_UsingPolyTree)this.FixupFirstLefts1(outrec,outrec2)}op2=op}op2=op2.Next}op=op.Next}while(op!=outrec.Pts)}};ClipperLib.Clipper.Area=function(poly){var cnt=poly.length;if(cnt<3)return 0;var a=0;for(var i=0,j=cnt-1;i<cnt;++i){a+=(poly[j].X+poly[i].X)*(poly[j].Y-poly[i].Y);j=i}return-a*.5};ClipperLib.Clipper.prototype.Area=function(outRec){var op=outRec.Pts;if(op==null)return 0;var a=0;do{a=a+(op.Prev.Pt.X+op.Pt.X)*(op.Prev.Pt.Y-op.Pt.Y);op=op.Next}while(op!=outRec.Pts);return a*.5};ClipperLib.Clipper.SimplifyPolygon=function(poly,fillType){var result=new Array;var c=new ClipperLib.Clipper(0);c.StrictlySimple=true;c.AddPath(poly,ClipperLib.PolyType.ptSubject,true);c.Execute(ClipperLib.ClipType.ctUnion,result,fillType,fillType);return result};ClipperLib.Clipper.SimplifyPolygons=function(polys,fillType){if(typeof fillType=="undefined")fillType=ClipperLib.PolyFillType.pftEvenOdd;var result=new Array;var c=new ClipperLib.Clipper(0);c.StrictlySimple=true;c.AddPaths(polys,ClipperLib.PolyType.ptSubject,true);c.Execute(ClipperLib.ClipType.ctUnion,result,fillType,fillType);return result};ClipperLib.Clipper.DistanceSqrd=function(pt1,pt2){var dx=pt1.X-pt2.X;var dy=pt1.Y-pt2.Y;return dx*dx+dy*dy};ClipperLib.Clipper.DistanceFromLineSqrd=function(pt,ln1,ln2){var A=ln1.Y-ln2.Y;var B=ln2.X-ln1.X;var C=A*ln1.X+B*ln1.Y;C=A*pt.X+B*pt.Y-C;return C*C/(A*A+B*B)};ClipperLib.Clipper.SlopesNearCollinear=function(pt1,pt2,pt3,distSqrd){if(Math.abs(pt1.X-pt2.X)>Math.abs(pt1.Y-pt2.Y)){if(pt1.X>pt2.X==pt1.X<pt3.X)return ClipperLib.Clipper.DistanceFromLineSqrd(pt1,pt2,pt3)<distSqrd;else if(pt2.X>pt1.X==pt2.X<pt3.X)return ClipperLib.Clipper.DistanceFromLineSqrd(pt2,pt1,pt3)<distSqrd;else return ClipperLib.Clipper.DistanceFromLineSqrd(pt3,pt1,pt2)<distSqrd}else{if(pt1.Y>pt2.Y==pt1.Y<pt3.Y)return ClipperLib.Clipper.DistanceFromLineSqrd(pt1,pt2,pt3)<distSqrd;else if(pt2.Y>pt1.Y==pt2.Y<pt3.Y)return ClipperLib.Clipper.DistanceFromLineSqrd(pt2,pt1,pt3)<distSqrd;else return ClipperLib.Clipper.DistanceFromLineSqrd(pt3,pt1,pt2)<distSqrd;

}};ClipperLib.Clipper.PointsAreClose=function(pt1,pt2,distSqrd){var dx=pt1.X-pt2.X;var dy=pt1.Y-pt2.Y;return dx*dx+dy*dy<=distSqrd};ClipperLib.Clipper.ExcludeOp=function(op){var result=op.Prev;result.Next=op.Next;op.Next.Prev=result;result.Idx=0;return result};ClipperLib.Clipper.CleanPolygon=function(path,distance){if(typeof distance=="undefined")distance=1.415;var cnt=path.length;if(cnt==0)return new Array;var outPts=new Array(cnt);for(var i=0;i<cnt;++i)outPts[i]=new ClipperLib.OutPt;for(var i=0;i<cnt;++i){outPts[i].Pt=path[i];outPts[i].Next=outPts[(i+1)%cnt];outPts[i].Next.Prev=outPts[i];outPts[i].Idx=0}var distSqrd=distance*distance;var op=outPts[0];while(op.Idx==0&&op.Next!=op.Prev){if(ClipperLib.Clipper.PointsAreClose(op.Pt,op.Prev.Pt,distSqrd)){op=ClipperLib.Clipper.ExcludeOp(op);cnt--}else if(ClipperLib.Clipper.PointsAreClose(op.Prev.Pt,op.Next.Pt,distSqrd)){ClipperLib.Clipper.ExcludeOp(op.Next);op=ClipperLib.Clipper.ExcludeOp(op);cnt-=2}else if(ClipperLib.Clipper.SlopesNearCollinear(op.Prev.Pt,op.Pt,op.Next.Pt,distSqrd)){op=ClipperLib.Clipper.ExcludeOp(op);cnt--}else{op.Idx=1;op=op.Next}}if(cnt<3)cnt=0;var result=new Array(cnt);for(var i=0;i<cnt;++i){result[i]=new ClipperLib.IntPoint(op.Pt);op=op.Next}outPts=null;return result};ClipperLib.Clipper.CleanPolygons=function(polys,distance){var result=new Array(polys.length);for(var i=0,ilen=polys.length;i<ilen;i++)result[i]=ClipperLib.Clipper.CleanPolygon(polys[i],distance);return result};ClipperLib.Clipper.Minkowski=function(pattern,path,IsSum,IsClosed){var delta=IsClosed?1:0;var polyCnt=pattern.length;var pathCnt=path.length;var result=new Array;if(IsSum)for(var i=0;i<pathCnt;i++){var p=new Array(polyCnt);for(var j=0,jlen=pattern.length,ip=pattern[j];j<jlen;j++,ip=pattern[j])p[j]=new ClipperLib.IntPoint(path[i].X+ip.X,path[i].Y+ip.Y);result.push(p)}else for(var i=0;i<pathCnt;i++){var p=new Array(polyCnt);for(var j=0,jlen=pattern.length,ip=pattern[j];j<jlen;j++,ip=pattern[j])p[j]=new ClipperLib.IntPoint(path[i].X-ip.X,path[i].Y-ip.Y);result.push(p)}var quads=new Array;for(var i=0;i<pathCnt-1+delta;i++)for(var j=0;j<polyCnt;j++){var quad=new Array;quad.push(result[i%pathCnt][j%polyCnt]);quad.push(result[(i+1)%pathCnt][j%polyCnt]);quad.push(result[(i+1)%pathCnt][(j+1)%polyCnt]);quad.push(result[i%pathCnt][(j+1)%polyCnt]);if(!ClipperLib.Clipper.Orientation(quad))quad.reverse();quads.push(quad)}return quads};ClipperLib.Clipper.MinkowskiSum=function(pattern,path_or_paths,pathIsClosed){if(!(path_or_paths[0]instanceof Array)){var path=path_or_paths;var paths=ClipperLib.Clipper.Minkowski(pattern,path,true,pathIsClosed);var c=new ClipperLib.Clipper;c.AddPaths(paths,ClipperLib.PolyType.ptSubject,true);c.Execute(ClipperLib.ClipType.ctUnion,paths,ClipperLib.PolyFillType.pftNonZero,ClipperLib.PolyFillType.pftNonZero);return paths}else{var paths=path_or_paths;var solution=new ClipperLib.Paths;var c=new ClipperLib.Clipper;for(var i=0;i<paths.length;++i){var tmp=ClipperLib.Clipper.Minkowski(pattern,paths[i],true,pathIsClosed);c.AddPaths(tmp,ClipperLib.PolyType.ptSubject,true);if(pathIsClosed){var path=ClipperLib.Clipper.TranslatePath(paths[i],pattern[0]);c.AddPath(path,ClipperLib.PolyType.ptClip,true)}}c.Execute(ClipperLib.ClipType.ctUnion,solution,ClipperLib.PolyFillType.pftNonZero,ClipperLib.PolyFillType.pftNonZero);return solution}};ClipperLib.Clipper.TranslatePath=function(path,delta){var outPath=new ClipperLib.Path;for(var i=0;i<path.length;i++)outPath.push(new ClipperLib.IntPoint(path[i].X+delta.X,path[i].Y+delta.Y));return outPath};ClipperLib.Clipper.MinkowskiDiff=function(poly1,poly2){var paths=ClipperLib.Clipper.Minkowski(poly1,poly2,false,true);var c=new ClipperLib.Clipper;c.AddPaths(paths,ClipperLib.PolyType.ptSubject,true);c.Execute(ClipperLib.ClipType.ctUnion,paths,ClipperLib.PolyFillType.pftNonZero,ClipperLib.PolyFillType.pftNonZero);return paths};ClipperLib.Clipper.PolyTreeToPaths=function(polytree){var result=new Array;ClipperLib.Clipper.AddPolyNodeToPaths(polytree,ClipperLib.Clipper.NodeType.ntAny,result);return result};ClipperLib.Clipper.AddPolyNodeToPaths=function(polynode,nt,paths){var match=true;switch(nt){case ClipperLib.Clipper.NodeType.ntOpen:return;case ClipperLib.Clipper.NodeType.ntClosed:match=!polynode.IsOpen;break;default:break}if(polynode.m_polygon.length>0&&match)paths.push(polynode.m_polygon);for(var $i3=0,$t3=polynode.Childs(),$l3=$t3.length,pn=$t3[$i3];$i3<$l3;$i3++,pn=$t3[$i3])ClipperLib.Clipper.AddPolyNodeToPaths(pn,nt,paths)};ClipperLib.Clipper.OpenPathsFromPolyTree=function(polytree){var result=new ClipperLib.Paths;for(var i=0,ilen=polytree.ChildCount();i<ilen;i++)if(polytree.Childs()[i].IsOpen)result.push(polytree.Childs()[i].m_polygon);return result};ClipperLib.Clipper.ClosedPathsFromPolyTree=function(polytree){var result=new ClipperLib.Paths;ClipperLib.Clipper.AddPolyNodeToPaths(polytree,ClipperLib.Clipper.NodeType.ntClosed,result);return result};Inherit(ClipperLib.Clipper,ClipperLib.ClipperBase);ClipperLib.Clipper.NodeType={ntAny:0,ntOpen:1,ntClosed:2};ClipperLib.ClipperOffset=function(miterLimit,arcTolerance){if(typeof miterLimit=="undefined")miterLimit=2;if(typeof arcTolerance=="undefined")arcTolerance=ClipperLib.ClipperOffset.def_arc_tolerance;this.m_destPolys=new ClipperLib.Paths;this.m_srcPoly=new ClipperLib.Path;this.m_destPoly=new ClipperLib.Path;this.m_normals=new Array;this.m_delta=0;this.m_sinA=0;this.m_sin=0;this.m_cos=0;this.m_miterLim=0;this.m_StepsPerRad=0;this.m_lowest=new ClipperLib.IntPoint;this.m_polyNodes=new ClipperLib.PolyNode;this.MiterLimit=miterLimit;this.ArcTolerance=arcTolerance;this.m_lowest.X=-1};ClipperLib.ClipperOffset.two_pi=6.28318530717959;ClipperLib.ClipperOffset.def_arc_tolerance=.25;ClipperLib.ClipperOffset.prototype.Clear=function(){ClipperLib.Clear(this.m_polyNodes.Childs());this.m_lowest.X=-1};ClipperLib.ClipperOffset.Round=ClipperLib.Clipper.Round;ClipperLib.ClipperOffset.prototype.AddPath=function(path,joinType,endType){var highI=path.length-1;if(highI<0)return;var newNode=new ClipperLib.PolyNode;newNode.m_jointype=joinType;newNode.m_endtype=endType;if(endType==ClipperLib.EndType.etClosedLine||endType==ClipperLib.EndType.etClosedPolygon)while(highI>0&&ClipperLib.IntPoint.op_Equality(path[0],path[highI]))highI--;newNode.m_polygon.push(path[0]);var j=0,k=0;for(var i=1;i<=highI;i++)if(ClipperLib.IntPoint.op_Inequality(newNode.m_polygon[j],path[i])){j++;newNode.m_polygon.push(path[i]);if(path[i].Y>newNode.m_polygon[k].Y||path[i].Y==newNode.m_polygon[k].Y&&path[i].X<newNode.m_polygon[k].X)k=j}if(endType==ClipperLib.EndType.etClosedPolygon&&j<2)return;this.m_polyNodes.AddChild(newNode);if(endType!=ClipperLib.EndType.etClosedPolygon)return;if(this.m_lowest.X<0)this.m_lowest=new ClipperLib.IntPoint(this.m_polyNodes.ChildCount()-1,k);else{var ip=this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon[this.m_lowest.Y];if(newNode.m_polygon[k].Y>ip.Y||newNode.m_polygon[k].Y==ip.Y&&newNode.m_polygon[k].X<ip.X)this.m_lowest=new ClipperLib.IntPoint(this.m_polyNodes.ChildCount()-1,k)}};ClipperLib.ClipperOffset.prototype.AddPaths=function(paths,joinType,endType){for(var i=0,ilen=paths.length;i<ilen;i++)this.AddPath(paths[i],joinType,endType)};ClipperLib.ClipperOffset.prototype.FixOrientations=function(){if(this.m_lowest.X>=0&&!ClipperLib.Clipper.Orientation(this.m_polyNodes.Childs()[this.m_lowest.X].m_polygon)){for(var i=0;i<this.m_polyNodes.ChildCount();i++){var node=this.m_polyNodes.Childs()[i];if(node.m_endtype==ClipperLib.EndType.etClosedPolygon||node.m_endtype==ClipperLib.EndType.etClosedLine&&ClipperLib.Clipper.Orientation(node.m_polygon))node.m_polygon.reverse()}}else{for(var i=0;i<this.m_polyNodes.ChildCount();i++){var node=this.m_polyNodes.Childs()[i];if(node.m_endtype==ClipperLib.EndType.etClosedLine&&!ClipperLib.Clipper.Orientation(node.m_polygon))node.m_polygon.reverse()}}};ClipperLib.ClipperOffset.GetUnitNormal=function(pt1,pt2){var dx=pt2.X-pt1.X;var dy=pt2.Y-pt1.Y;if(dx==0&&dy==0)return new ClipperLib.DoublePoint(0,0);var f=1/Math.sqrt(dx*dx+dy*dy);dx*=f;dy*=f;return new ClipperLib.DoublePoint(dy,-dx)};ClipperLib.ClipperOffset.prototype.DoOffset=function(delta){this.m_destPolys=new Array;this.m_delta=delta;if(ClipperLib.ClipperBase.near_zero(delta)){for(var i=0;i<this.m_polyNodes.ChildCount();i++){var node=this.m_polyNodes.Childs()[i];if(node.m_endtype==ClipperLib.EndType.etClosedPolygon)this.m_destPolys.push(node.m_polygon)}return}if(this.MiterLimit>2)this.m_miterLim=2/(this.MiterLimit*this.MiterLimit);else this.m_miterLim=.5;var y;if(this.ArcTolerance<=0)y=ClipperLib.ClipperOffset.def_arc_tolerance;else if(this.ArcTolerance>Math.abs(delta)*ClipperLib.ClipperOffset.def_arc_tolerance)y=Math.abs(delta)*ClipperLib.ClipperOffset.def_arc_tolerance;else y=this.ArcTolerance;var steps=3.14159265358979/Math.acos(1-y/Math.abs(delta));this.m_sin=Math.sin(ClipperLib.ClipperOffset.two_pi/steps);this.m_cos=Math.cos(ClipperLib.ClipperOffset.two_pi/steps);this.m_StepsPerRad=steps/ClipperLib.ClipperOffset.two_pi;if(delta<0)this.m_sin=-this.m_sin;for(var i=0;i<this.m_polyNodes.ChildCount();i++){var node=this.m_polyNodes.Childs()[i];this.m_srcPoly=node.m_polygon;var len=this.m_srcPoly.length;if(len==0||delta<=0&&(len<3||node.m_endtype!=ClipperLib.EndType.etClosedPolygon))continue;this.m_destPoly=new Array;if(len==1){if(node.m_jointype==ClipperLib.JoinType.jtRound){var X=1,Y=0;for(var j=1;j<=steps;j++){this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X+X*delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y+Y*delta)));var X2=X;X=X*this.m_cos-this.m_sin*Y;Y=X2*this.m_sin+Y*this.m_cos}}else{var X=-1,Y=-1;for(var j=0;j<4;++j){this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X+X*delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y+Y*delta)));if(X<0)X=1;else if(Y<0)Y=1;else X=-1}}this.m_destPolys.push(this.m_destPoly);continue}this.m_normals.length=0;for(var j=0;j<len-1;j++)this.m_normals.push(ClipperLib.ClipperOffset.GetUnitNormal(this.m_srcPoly[j],this.m_srcPoly[j+1]));if(node.m_endtype==ClipperLib.EndType.etClosedLine||node.m_endtype==ClipperLib.EndType.etClosedPolygon)this.m_normals.push(ClipperLib.ClipperOffset.GetUnitNormal(this.m_srcPoly[len-1],this.m_srcPoly[0]));else this.m_normals.push(new ClipperLib.DoublePoint(this.m_normals[len-2]));if(node.m_endtype==ClipperLib.EndType.etClosedPolygon){var k=len-1;for(var j=0;j<len;j++)k=this.OffsetPoint(j,k,node.m_jointype);this.m_destPolys.push(this.m_destPoly)}else if(node.m_endtype==ClipperLib.EndType.etClosedLine){var k=len-1;for(var j=0;j<len;j++)k=this.OffsetPoint(j,k,node.m_jointype);this.m_destPolys.push(this.m_destPoly);this.m_destPoly=new Array;var n=this.m_normals[len-1];for(var j=len-1;j>0;j--)this.m_normals[j]=new ClipperLib.DoublePoint(-this.m_normals[j-1].X,-this.m_normals[j-1].Y);this.m_normals[0]=new ClipperLib.DoublePoint(-n.X,-n.Y);k=0;for(var j=len-1;j>=0;j--)k=this.OffsetPoint(j,k,node.m_jointype);this.m_destPolys.push(this.m_destPoly)}else{var k=0;for(var j=1;j<len-1;++j)k=this.OffsetPoint(j,k,node.m_jointype);var pt1;if(node.m_endtype==ClipperLib.EndType.etOpenButt){var j=len-1;pt1=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X+this.m_normals[j].X*delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y+this.m_normals[j].Y*delta));this.m_destPoly.push(pt1);pt1=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X-this.m_normals[j].X*delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y-this.m_normals[j].Y*delta));this.m_destPoly.push(pt1)}else{var j=len-1;k=len-2;this.m_sinA=0;this.m_normals[j]=new ClipperLib.DoublePoint(-this.m_normals[j].X,-this.m_normals[j].Y);if(node.m_endtype==ClipperLib.EndType.etOpenSquare)this.DoSquare(j,k);else this.DoRound(j,k)}for(var j=len-1;j>0;j--)this.m_normals[j]=new ClipperLib.DoublePoint(-this.m_normals[j-1].X,-this.m_normals[j-1].Y);this.m_normals[0]=new ClipperLib.DoublePoint(-this.m_normals[1].X,-this.m_normals[1].Y);k=len-1;for(var j=k-1;j>0;--j)k=this.OffsetPoint(j,k,node.m_jointype);if(node.m_endtype==ClipperLib.EndType.etOpenButt){pt1=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X-this.m_normals[0].X*delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y-this.m_normals[0].Y*delta));this.m_destPoly.push(pt1);pt1=new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].X+this.m_normals[0].X*delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[0].Y+this.m_normals[0].Y*delta));this.m_destPoly.push(pt1)}else{k=1;this.m_sinA=0;if(node.m_endtype==ClipperLib.EndType.etOpenSquare)this.DoSquare(0,1);else this.DoRound(0,1)}this.m_destPolys.push(this.m_destPoly)}}};ClipperLib.ClipperOffset.prototype.Execute=function(){var a=arguments,ispolytree=a[0]instanceof ClipperLib.PolyTree;if(!ispolytree){var solution=a[0],delta=a[1];ClipperLib.Clear(solution);this.FixOrientations();this.DoOffset(delta);var clpr=new ClipperLib.Clipper(0);clpr.AddPaths(this.m_destPolys,ClipperLib.PolyType.ptSubject,true);if(delta>0){clpr.Execute(ClipperLib.ClipType.ctUnion,solution,ClipperLib.PolyFillType.pftPositive,ClipperLib.PolyFillType.pftPositive)}else{var r=ClipperLib.Clipper.GetBounds(this.m_destPolys);var outer=new ClipperLib.Path;outer.push(new ClipperLib.IntPoint(r.left-10,r.bottom+10));outer.push(new ClipperLib.IntPoint(r.right+10,r.bottom+10));outer.push(new ClipperLib.IntPoint(r.right+10,r.top-10));outer.push(new ClipperLib.IntPoint(r.left-10,r.top-10));clpr.AddPath(outer,ClipperLib.PolyType.ptSubject,true);clpr.ReverseSolution=true;clpr.Execute(ClipperLib.ClipType.ctUnion,solution,ClipperLib.PolyFillType.pftNegative,ClipperLib.PolyFillType.pftNegative);if(solution.length>0)solution.splice(0,1)}}else{var solution=a[0],delta=a[1];solution.Clear();this.FixOrientations();this.DoOffset(delta);var clpr=new ClipperLib.Clipper(0);clpr.AddPaths(this.m_destPolys,ClipperLib.PolyType.ptSubject,true);if(delta>0){clpr.Execute(ClipperLib.ClipType.ctUnion,solution,ClipperLib.PolyFillType.pftPositive,ClipperLib.PolyFillType.pftPositive)}else{var r=ClipperLib.Clipper.GetBounds(this.m_destPolys);var outer=new ClipperLib.Path;outer.push(new ClipperLib.IntPoint(r.left-10,r.bottom+10));outer.push(new ClipperLib.IntPoint(r.right+10,r.bottom+10));outer.push(new ClipperLib.IntPoint(r.right+10,r.top-10));outer.push(new ClipperLib.IntPoint(r.left-10,r.top-10));clpr.AddPath(outer,ClipperLib.PolyType.ptSubject,true);clpr.ReverseSolution=true;clpr.Execute(ClipperLib.ClipType.ctUnion,solution,ClipperLib.PolyFillType.pftNegative,ClipperLib.PolyFillType.pftNegative);if(solution.ChildCount()==1&&solution.Childs()[0].ChildCount()>0){var outerNode=solution.Childs()[0];solution.Childs()[0]=outerNode.Childs()[0];solution.Childs()[0].m_Parent=solution;for(var i=1;i<outerNode.ChildCount();i++)solution.AddChild(outerNode.Childs()[i])}else solution.Clear()}}};ClipperLib.ClipperOffset.prototype.OffsetPoint=function(j,k,jointype){this.m_sinA=this.m_normals[k].X*this.m_normals[j].Y-this.m_normals[j].X*this.m_normals[k].Y;if(Math.abs(this.m_sinA*this.m_delta)<1){var cosA=this.m_normals[k].X*this.m_normals[j].X+this.m_normals[j].Y*this.m_normals[k].Y;if(cosA>0){this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X+this.m_normals[k].X*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y+this.m_normals[k].Y*this.m_delta)));return k}}else if(this.m_sinA>1)this.m_sinA=1;else if(this.m_sinA<-1)this.m_sinA=-1;if(this.m_sinA*this.m_delta<0){this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X+this.m_normals[k].X*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y+this.m_normals[k].Y*this.m_delta)));this.m_destPoly.push(new ClipperLib.IntPoint(this.m_srcPoly[j]));this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X+this.m_normals[j].X*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y+this.m_normals[j].Y*this.m_delta)))}else switch(jointype){case ClipperLib.JoinType.jtMiter:{var r=1+(this.m_normals[j].X*this.m_normals[k].X+this.m_normals[j].Y*this.m_normals[k].Y);if(r>=this.m_miterLim)this.DoMiter(j,k,r);else this.DoSquare(j,k);break}case ClipperLib.JoinType.jtSquare:this.DoSquare(j,k);break;case ClipperLib.JoinType.jtRound:this.DoRound(j,k);break}k=j;return k};ClipperLib.ClipperOffset.prototype.DoSquare=function(j,k){var dx=Math.tan(Math.atan2(this.m_sinA,this.m_normals[k].X*this.m_normals[j].X+this.m_normals[k].Y*this.m_normals[j].Y)/4);this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X+this.m_delta*(this.m_normals[k].X-this.m_normals[k].Y*dx)),ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y+this.m_delta*(this.m_normals[k].Y+this.m_normals[k].X*dx))));this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X+this.m_delta*(this.m_normals[j].X+this.m_normals[j].Y*dx)),ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y+this.m_delta*(this.m_normals[j].Y-this.m_normals[j].X*dx))))};ClipperLib.ClipperOffset.prototype.DoMiter=function(j,k,r){var q=this.m_delta/r;this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X+(this.m_normals[k].X+this.m_normals[j].X)*q),ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y+(this.m_normals[k].Y+this.m_normals[j].Y)*q)))};ClipperLib.ClipperOffset.prototype.DoRound=function(j,k){var a=Math.atan2(this.m_sinA,this.m_normals[k].X*this.m_normals[j].X+this.m_normals[k].Y*this.m_normals[j].Y);var steps=Math.max(ClipperLib.Cast_Int32(ClipperLib.ClipperOffset.Round(this.m_StepsPerRad*Math.abs(a))),1);var X=this.m_normals[k].X,Y=this.m_normals[k].Y,X2;for(var i=0;i<steps;++i){this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X+X*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y+Y*this.m_delta)));X2=X;X=X*this.m_cos-this.m_sin*Y;Y=X2*this.m_sin+Y*this.m_cos}this.m_destPoly.push(new ClipperLib.IntPoint(ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].X+this.m_normals[j].X*this.m_delta),ClipperLib.ClipperOffset.Round(this.m_srcPoly[j].Y+this.m_normals[j].Y*this.m_delta)))};ClipperLib.Error=function(message){try{throw new Error(message)}catch(err){alert(err.message)}};ClipperLib.JS={};ClipperLib.JS.AreaOfPolygon=function(poly,scale){if(!scale)scale=1;return ClipperLib.Clipper.Area(poly)/(scale*scale)};ClipperLib.JS.AreaOfPolygons=function(poly,scale){if(!scale)scale=1;var area=0;for(var i=0;i<poly.length;i++){area+=ClipperLib.Clipper.Area(poly[i])}return area/(scale*scale)};ClipperLib.JS.BoundsOfPath=function(path,scale){return ClipperLib.JS.BoundsOfPaths([path],scale)};ClipperLib.JS.BoundsOfPaths=function(paths,scale){if(!scale)scale=1;var bounds=ClipperLib.Clipper.GetBounds(paths);bounds.left/=scale;bounds.bottom/=scale;bounds.right/=scale;bounds.top/=scale;return bounds};ClipperLib.JS.Clean=function(polygon,delta){if(!(polygon instanceof Array))return[];var isPolygons=polygon[0]instanceof Array;var polygon=ClipperLib.JS.Clone(polygon);if(typeof delta!="number"||delta===null){ClipperLib.Error("Delta is not a number in Clean().");return polygon}if(polygon.length===0||polygon.length==1&&polygon[0].length===0||delta<0)return polygon;if(!isPolygons)polygon=[polygon];var k_length=polygon.length;var len,poly,result,d,p,j,i;var results=[];for(var k=0;k<k_length;k++){poly=polygon[k];len=poly.length;if(len===0)continue;else if(len<3){result=poly;results.push(result);continue}result=poly;d=delta*delta;p=poly[0];j=1;for(i=1;i<len;i++){if((poly[i].X-p.X)*(poly[i].X-p.X)+(poly[i].Y-p.Y)*(poly[i].Y-p.Y)<=d)continue;result[j]=poly[i];p=poly[i];j++}p=poly[j-1];if((poly[0].X-p.X)*(poly[0].X-p.X)+(poly[0].Y-p.Y)*(poly[0].Y-p.Y)<=d)j--;if(j<len)result.splice(j,len-j);if(result.length)results.push(result)}if(!isPolygons&&results.length)results=results[0];else if(!isPolygons&&results.length===0)results=[];else if(isPolygons&&results.length===0)results=[[]];return results};ClipperLib.JS.Clone=function(polygon){if(!(polygon instanceof Array))return[];if(polygon.length===0)return[];else if(polygon.length==1&&polygon[0].length===0)return[[]];var isPolygons=polygon[0]instanceof Array;if(!isPolygons)polygon=[polygon];var len=polygon.length,plen,i,j,result;var results=new Array(len);for(i=0;i<len;i++){plen=polygon[i].length;result=new Array(plen);for(j=0;j<plen;j++){result[j]={X:polygon[i][j].X,Y:polygon[i][j].Y}}results[i]=result}if(!isPolygons)results=results[0];return results};ClipperLib.JS.Lighten=function(polygon,tolerance){if(!(polygon instanceof Array))return[];if(typeof tolerance!="number"||tolerance===null){ClipperLib.Error("Tolerance is not a number in Lighten().");return ClipperLib.JS.Clone(polygon)}if(polygon.length===0||polygon.length==1&&polygon[0].length===0||tolerance<0){return ClipperLib.JS.Clone(polygon)}if(!(polygon[0]instanceof Array))polygon=[polygon];var i,j,poly,k,poly2,plen,A,B,P,d,rem,addlast;var bxax,byay,l,ax,ay;var len=polygon.length;var toleranceSq=tolerance*tolerance;var results=[];for(i=0;i<len;i++){poly=polygon[i];plen=poly.length;if(plen==0)continue;for(k=0;k<1e6;k++){poly2=[];plen=poly.length;if(poly[plen-1].X!=poly[0].X||poly[plen-1].Y!=poly[0].Y){addlast=1;poly.push({X:poly[0].X,Y:poly[0].Y});plen=poly.length}else addlast=0;rem=[];for(j=0;j<plen-2;j++){A=poly[j];P=poly[j+1];B=poly[j+2];ax=A.X;ay=A.Y;bxax=B.X-ax;byay=B.Y-ay;if(bxax!==0||byay!==0){l=((P.X-ax)*bxax+(P.Y-ay)*byay)/(bxax*bxax+byay*byay);if(l>1){ax=B.X;ay=B.Y}else if(l>0){ax+=bxax*l;ay+=byay*l}}bxax=P.X-ax;byay=P.Y-ay;d=bxax*bxax+byay*byay;if(d<=toleranceSq){rem[j+1]=1;j++}}poly2.push({X:poly[0].X,Y:poly[0].Y});for(j=1;j<plen-1;j++)if(!rem[j])poly2.push({X:poly[j].X,Y:poly[j].Y});poly2.push({X:poly[plen-1].X,Y:poly[plen-1].Y});if(addlast)poly.pop();if(!rem.length)break;else poly=poly2}plen=poly2.length;if(poly2[plen-1].X==poly2[0].X&&poly2[plen-1].Y==poly2[0].Y){poly2.pop()}if(poly2.length>2)results.push(poly2)}if(!(polygon[0]instanceof Array))results=results[0];if(typeof results=="undefined")results=[[]];return results};ClipperLib.JS.PerimeterOfPath=function(path,closed,scale){if(typeof path=="undefined")return 0;var sqrt=Math.sqrt;var perimeter=0;var p1,p2,p1x=0,p1y=0,p2x=0,p2y=0;var j=path.length;if(j<2)return 0;if(closed){path[j]=path[0];j++}while(--j){p1=path[j];p1x=p1.X;p1y=p1.Y;p2=path[j-1];p2x=p2.X;p2y=p2.Y;perimeter+=sqrt((p1x-p2x)*(p1x-p2x)+(p1y-p2y)*(p1y-p2y))}if(closed)path.pop();return perimeter/scale};ClipperLib.JS.PerimeterOfPaths=function(paths,closed,scale){if(!scale)scale=1;var perimeter=0;for(var i=0;i<paths.length;i++){perimeter+=ClipperLib.JS.PerimeterOfPath(paths[i],closed,scale)}return perimeter};ClipperLib.JS.ScaleDownPath=function(path,scale){var i,p;if(!scale)scale=1;i=path.length;while(i--){p=path[i];p.X=p.X/scale;p.Y=p.Y/scale}};ClipperLib.JS.ScaleDownPaths=function(paths,scale){var i,j,p;if(!scale)scale=1;i=paths.length;while(i--){j=paths[i].length;while(j--){p=paths[i][j];p.X=p.X/scale;p.Y=p.Y/scale}}};ClipperLib.JS.ScaleUpPath=function(path,scale){var i,p,round=Math.round;if(!scale)scale=1;i=path.length;while(i--){p=path[i];p.X=round(p.X*scale);p.Y=round(p.Y*scale)}};ClipperLib.JS.ScaleUpPaths=function(paths,scale){var i,j,p,round=Math.round;if(!scale)scale=1;i=paths.length;while(i--){j=paths[i].length;while(j--){p=paths[i][j];p.X=round(p.X*scale);p.Y=round(p.Y*scale)}}};ClipperLib.ExPolygons=function(){return[]};ClipperLib.ExPolygon=function(){this.outer=null;this.holes=null};ClipperLib.JS.AddOuterPolyNodeToExPolygons=function(polynode,expolygons){var ep=new ClipperLib.ExPolygon;ep.outer=polynode.Contour();var childs=polynode.Childs();var ilen=childs.length;ep.holes=new Array(ilen);var node,n,i,j,childs2,jlen;for(i=0;i<ilen;i++){node=childs[i];ep.holes[i]=node.Contour();for(j=0,childs2=node.Childs(),jlen=childs2.length;j<jlen;j++){n=childs2[j];ClipperLib.JS.AddOuterPolyNodeToExPolygons(n,expolygons)}}expolygons.push(ep)};ClipperLib.JS.ExPolygonsToPaths=function(expolygons){var a,i,alen,ilen;var paths=new ClipperLib.Paths;for(a=0,alen=expolygons.length;a<alen;a++){paths.push(expolygons[a].outer);for(i=0,ilen=expolygons[a].holes.length;i<ilen;i++){paths.push(expolygons[a].holes[i])}}return paths};ClipperLib.JS.PolyTreeToExPolygons=function(polytree){var expolygons=new ClipperLib.ExPolygons;var node,i,childs,ilen;for(i=0,childs=polytree.Childs(),ilen=childs.length;i<ilen;i++){node=childs[i];ClipperLib.JS.AddOuterPolyNodeToExPolygons(node,expolygons)}return expolygons}})()},{}],13:[function(require,module,exports){(function(global){(function(){var undefined;var VERSION="3.7.0";var BIND_FLAG=1,BIND_KEY_FLAG=2,CURRY_BOUND_FLAG=4,CURRY_FLAG=8,CURRY_RIGHT_FLAG=16,PARTIAL_FLAG=32,PARTIAL_RIGHT_FLAG=64,ARY_FLAG=128,REARG_FLAG=256;var DEFAULT_TRUNC_LENGTH=30,DEFAULT_TRUNC_OMISSION="...";var HOT_COUNT=150,HOT_SPAN=16;var LAZY_DROP_WHILE_FLAG=0,LAZY_FILTER_FLAG=1,LAZY_MAP_FLAG=2;var FUNC_ERROR_TEXT="Expected a function";var PLACEHOLDER="__lodash_placeholder__";var argsTag="[object Arguments]",arrayTag="[object Array]",boolTag="[object Boolean]",dateTag="[object Date]",errorTag="[object Error]",funcTag="[object Function]",mapTag="[object Map]",numberTag="[object Number]",objectTag="[object Object]",regexpTag="[object RegExp]",setTag="[object Set]",stringTag="[object String]",weakMapTag="[object WeakMap]";var arrayBufferTag="[object ArrayBuffer]",float32Tag="[object Float32Array]",float64Tag="[object Float64Array]",int8Tag="[object Int8Array]",int16Tag="[object Int16Array]",int32Tag="[object Int32Array]",uint8Tag="[object Uint8Array]",uint8ClampedTag="[object Uint8ClampedArray]",uint16Tag="[object Uint16Array]",uint32Tag="[object Uint32Array]";var reEmptyStringLeading=/\b__p \+= '';/g,reEmptyStringMiddle=/\b(__p \+=) '' \+/g,reEmptyStringTrailing=/(__e\(.*?\)|\b__t\)) \+\n'';/g;var reEscapedHtml=/&(?:amp|lt|gt|quot|#39|#96);/g,reUnescapedHtml=/[&<>"'`]/g,reHasEscapedHtml=RegExp(reEscapedHtml.source),reHasUnescapedHtml=RegExp(reUnescapedHtml.source);var reEscape=/<%-([\s\S]+?)%>/g,reEvaluate=/<%([\s\S]+?)%>/g,reInterpolate=/<%=([\s\S]+?)%>/g;var reIsDeepProp=/\.|\[(?:[^[\]]+|(["'])(?:(?!\1)[^\n\\]|\\.)*?)\1\]/,reIsPlainProp=/^\w*$/,rePropName=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\n\\]|\\.)*?)\2)\]/g;var reRegExpChars=/[.*+?^${}()|[\]\/\\]/g,reHasRegExpChars=RegExp(reRegExpChars.source);var reComboMark=/[\u0300-\u036f\ufe20-\ufe23]/g;var reEscapeChar=/\\(\\)?/g;var reEsTemplate=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g;var reFlags=/\w*$/;var reHasHexPrefix=/^0[xX]/;var reIsHostCtor=/^\[object .+?Constructor\]$/;var reLatin1=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g;var reNoMatch=/($^)/;var reUnescapedString=/['\n\r\u2028\u2029\\]/g;var reWords=function(){var upper="[A-Z\\xc0-\\xd6\\xd8-\\xde]",lower="[a-z\\xdf-\\xf6\\xf8-\\xff]+";return RegExp(upper+"+(?="+upper+lower+")|"+upper+"?"+lower+"|"+upper+"+|[0-9]+","g")}();var whitespace=" 	\f\ufeff"+"\n\r\u2028\u2029"+"";var contextProps=["Array","ArrayBuffer","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Math","Number","Object","RegExp","Set","String","_","clearTimeout","document","isFinite","parseInt","setTimeout","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","window"];var templateCounter=-1;var typedArrayTags={};typedArrayTags[float32Tag]=typedArrayTags[float64Tag]=typedArrayTags[int8Tag]=typedArrayTags[int16Tag]=typedArrayTags[int32Tag]=typedArrayTags[uint8Tag]=typedArrayTags[uint8ClampedTag]=typedArrayTags[uint16Tag]=typedArrayTags[uint32Tag]=true;typedArrayTags[argsTag]=typedArrayTags[arrayTag]=typedArrayTags[arrayBufferTag]=typedArrayTags[boolTag]=typedArrayTags[dateTag]=typedArrayTags[errorTag]=typedArrayTags[funcTag]=typedArrayTags[mapTag]=typedArrayTags[numberTag]=typedArrayTags[objectTag]=typedArrayTags[regexpTag]=typedArrayTags[setTag]=typedArrayTags[stringTag]=typedArrayTags[weakMapTag]=false;var cloneableTags={};cloneableTags[argsTag]=cloneableTags[arrayTag]=cloneableTags[arrayBufferTag]=cloneableTags[boolTag]=cloneableTags[dateTag]=cloneableTags[float32Tag]=cloneableTags[float64Tag]=cloneableTags[int8Tag]=cloneableTags[int16Tag]=cloneableTags[int32Tag]=cloneableTags[numberTag]=cloneableTags[objectTag]=cloneableTags[regexpTag]=cloneableTags[stringTag]=cloneableTags[uint8Tag]=cloneableTags[uint8ClampedTag]=cloneableTags[uint16Tag]=cloneableTags[uint32Tag]=true;cloneableTags[errorTag]=cloneableTags[funcTag]=cloneableTags[mapTag]=cloneableTags[setTag]=cloneableTags[weakMapTag]=false;var debounceOptions={leading:false,maxWait:0,trailing:false};var deburredLetters={"":"A","":"A","":"A","":"A","":"A","":"A","":"a","":"a","":"a","":"a","":"a","":"a","":"C","":"c","":"D","":"d","":"E","":"E","":"E","":"E","":"e","":"e","":"e","":"e","":"I","":"I","":"I","":"I","":"i","":"i","":"i","":"i","":"N","":"n","":"O","":"O","":"O","":"O","":"O","":"O","":"o","":"o","":"o","":"o","":"o","":"o","":"U","":"U","":"U","":"U","":"u","":"u","":"u","":"u","":"Y","":"y","":"y","":"Ae","":"ae","":"Th","":"th","":"ss"};var htmlEscapes={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"};var htmlUnescapes={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"};var objectTypes={"function":true,object:true};var stringEscapes={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"};var freeExports=objectTypes[typeof exports]&&exports&&!exports.nodeType&&exports;var freeModule=objectTypes[typeof module]&&module&&!module.nodeType&&module;var freeGlobal=freeExports&&freeModule&&typeof global=="object"&&global&&global.Object&&global;var freeSelf=objectTypes[typeof self]&&self&&self.Object&&self;var freeWindow=objectTypes[typeof window]&&window&&window.Object&&window;var moduleExports=freeModule&&freeModule.exports===freeExports&&freeExports;var root=freeGlobal||freeWindow!==(this&&this.window)&&freeWindow||freeSelf||this;function baseCompareAscending(value,other){if(value!==other){var valIsReflexive=value===value,othIsReflexive=other===other;if(value>other||!valIsReflexive||value===undefined&&othIsReflexive){return 1}if(value<other||!othIsReflexive||other===undefined&&valIsReflexive){return-1}}return 0}function baseFindIndex(array,predicate,fromRight){var length=array.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){if(predicate(array[index],index,array)){return index}}return-1}function baseIndexOf(array,value,fromIndex){if(value!==value){return indexOfNaN(array,fromIndex)}var index=fromIndex-1,length=array.length;while(++index<length){if(array[index]===value){return index}}return-1}function baseIsFunction(value){return typeof value=="function"||false}function baseToString(value){if(typeof value=="string"){return value}return value==null?"":value+""}function charAtCallback(string){return string.charCodeAt(0)}function charsLeftIndex(string,chars){var index=-1,length=string.length;while(++index<length&&chars.indexOf(string.charAt(index))>-1){}return index}function charsRightIndex(string,chars){var index=string.length;while(index--&&chars.indexOf(string.charAt(index))>-1){}return index}function compareAscending(object,other){return baseCompareAscending(object.criteria,other.criteria)||object.index-other.index}function compareMultiple(object,other,orders){var index=-1,objCriteria=object.criteria,othCriteria=other.criteria,length=objCriteria.length,ordersLength=orders.length;while(++index<length){var result=baseCompareAscending(objCriteria[index],othCriteria[index]);if(result){if(index>=ordersLength){return result}return result*(orders[index]?1:-1)}}return object.index-other.index}function deburrLetter(letter){return deburredLetters[letter]}function escapeHtmlChar(chr){return htmlEscapes[chr]}function escapeStringChar(chr){return"\\"+stringEscapes[chr]}function indexOfNaN(array,fromIndex,fromRight){var length=array.length,index=fromIndex+(fromRight?0:-1);

while(fromRight?index--:++index<length){var other=array[index];if(other!==other){return index}}return-1}function isObjectLike(value){return!!value&&typeof value=="object"}function isSpace(charCode){return charCode<=160&&(charCode>=9&&charCode<=13)||charCode==32||charCode==160||charCode==5760||charCode==6158||charCode>=8192&&(charCode<=8202||charCode==8232||charCode==8233||charCode==8239||charCode==8287||charCode==12288||charCode==65279)}function replaceHolders(array,placeholder){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){if(array[index]===placeholder){array[index]=PLACEHOLDER;result[++resIndex]=index}}return result}function sortedUniq(array,iteratee){var seen,index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(!index||seen!==computed){seen=computed;result[++resIndex]=value}}return result}function trimmedLeftIndex(string){var index=-1,length=string.length;while(++index<length&&isSpace(string.charCodeAt(index))){}return index}function trimmedRightIndex(string){var index=string.length;while(index--&&isSpace(string.charCodeAt(index))){}return index}function unescapeHtmlChar(chr){return htmlUnescapes[chr]}function runInContext(context){context=context?_.defaults(root.Object(),context,_.pick(root,contextProps)):root;var Array=context.Array,Date=context.Date,Error=context.Error,Function=context.Function,Math=context.Math,Number=context.Number,Object=context.Object,RegExp=context.RegExp,String=context.String,TypeError=context.TypeError;var arrayProto=Array.prototype,objectProto=Object.prototype,stringProto=String.prototype;var document=(document=context.window)&&document.document;var fnToString=Function.prototype.toString;var hasOwnProperty=objectProto.hasOwnProperty;var idCounter=0;var objToString=objectProto.toString;var oldDash=context._;var reIsNative=RegExp("^"+escapeRegExp(objToString).replace(/toString|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");var ArrayBuffer=isNative(ArrayBuffer=context.ArrayBuffer)&&ArrayBuffer,bufferSlice=isNative(bufferSlice=ArrayBuffer&&new ArrayBuffer(0).slice)&&bufferSlice,ceil=Math.ceil,clearTimeout=context.clearTimeout,floor=Math.floor,getOwnPropertySymbols=isNative(getOwnPropertySymbols=Object.getOwnPropertySymbols)&&getOwnPropertySymbols,getPrototypeOf=isNative(getPrototypeOf=Object.getPrototypeOf)&&getPrototypeOf,push=arrayProto.push,preventExtensions=isNative(Object.preventExtensions=Object.preventExtensions)&&preventExtensions,propertyIsEnumerable=objectProto.propertyIsEnumerable,Set=isNative(Set=context.Set)&&Set,setTimeout=context.setTimeout,splice=arrayProto.splice,Uint8Array=isNative(Uint8Array=context.Uint8Array)&&Uint8Array,WeakMap=isNative(WeakMap=context.WeakMap)&&WeakMap;var Float64Array=function(){try{var func=isNative(func=context.Float64Array)&&func,result=new func(new ArrayBuffer(10),0,1)&&func}catch(e){}return result}();var nativeAssign=function(){var object={1:0},func=preventExtensions&&isNative(func=Object.assign)&&func;try{func(preventExtensions(object),"xo")}catch(e){}return!object[1]&&func}();var nativeIsArray=isNative(nativeIsArray=Array.isArray)&&nativeIsArray,nativeCreate=isNative(nativeCreate=Object.create)&&nativeCreate,nativeIsFinite=context.isFinite,nativeKeys=isNative(nativeKeys=Object.keys)&&nativeKeys,nativeMax=Math.max,nativeMin=Math.min,nativeNow=isNative(nativeNow=Date.now)&&nativeNow,nativeNumIsFinite=isNative(nativeNumIsFinite=Number.isFinite)&&nativeNumIsFinite,nativeParseInt=context.parseInt,nativeRandom=Math.random;var NEGATIVE_INFINITY=Number.NEGATIVE_INFINITY,POSITIVE_INFINITY=Number.POSITIVE_INFINITY;var MAX_ARRAY_LENGTH=Math.pow(2,32)-1,MAX_ARRAY_INDEX=MAX_ARRAY_LENGTH-1,HALF_MAX_ARRAY_LENGTH=MAX_ARRAY_LENGTH>>>1;var FLOAT64_BYTES_PER_ELEMENT=Float64Array?Float64Array.BYTES_PER_ELEMENT:0;var MAX_SAFE_INTEGER=Math.pow(2,53)-1;var metaMap=WeakMap&&new WeakMap;var realNames={};function lodash(value){if(isObjectLike(value)&&!isArray(value)&&!(value instanceof LazyWrapper)){if(value instanceof LodashWrapper){return value}if(hasOwnProperty.call(value,"__chain__")&&hasOwnProperty.call(value,"__wrapped__")){return wrapperClone(value)}}return new LodashWrapper(value)}function baseLodash(){}function LodashWrapper(value,chainAll,actions){this.__wrapped__=value;this.__actions__=actions||[];this.__chain__=!!chainAll}var support=lodash.support={};(function(x){var Ctor=function(){this.x=x},object={0:x,length:x},props=[];Ctor.prototype={valueOf:x,y:x};for(var key in new Ctor){props.push(key)}support.funcDecomp=/\bthis\b/.test(function(){return this});support.funcNames=typeof Function.name=="string";try{support.dom=document.createDocumentFragment().nodeType===11}catch(e){support.dom=false}try{support.nonEnumArgs=!propertyIsEnumerable.call(arguments,1)}catch(e){support.nonEnumArgs=true}})(1,0);lodash.templateSettings={escape:reEscape,evaluate:reEvaluate,interpolate:reInterpolate,variable:"",imports:{_:lodash}};function LazyWrapper(value){this.__wrapped__=value;this.__actions__=null;this.__dir__=1;this.__dropCount__=0;this.__filtered__=false;this.__iteratees__=null;this.__takeCount__=POSITIVE_INFINITY;this.__views__=null}function lazyClone(){var actions=this.__actions__,iteratees=this.__iteratees__,views=this.__views__,result=new LazyWrapper(this.__wrapped__);result.__actions__=actions?arrayCopy(actions):null;result.__dir__=this.__dir__;result.__filtered__=this.__filtered__;result.__iteratees__=iteratees?arrayCopy(iteratees):null;result.__takeCount__=this.__takeCount__;result.__views__=views?arrayCopy(views):null;return result}function lazyReverse(){if(this.__filtered__){var result=new LazyWrapper(this);result.__dir__=-1;result.__filtered__=true}else{result=this.clone();result.__dir__*=-1}return result}function lazyValue(){var array=this.__wrapped__.value();if(!isArray(array)){return baseWrapperValue(array,this.__actions__)}var dir=this.__dir__,isRight=dir<0,view=getView(0,array.length,this.__views__),start=view.start,end=view.end,length=end-start,index=isRight?end:start-1,takeCount=nativeMin(length,this.__takeCount__),iteratees=this.__iteratees__,iterLength=iteratees?iteratees.length:0,resIndex=0,result=[];outer:while(length--&&resIndex<takeCount){index+=dir;var iterIndex=-1,value=array[index];while(++iterIndex<iterLength){var data=iteratees[iterIndex],iteratee=data.iteratee,type=data.type;if(type==LAZY_DROP_WHILE_FLAG){if(data.done&&(isRight?index>data.index:index<data.index)){data.count=0;data.done=false}data.index=index;if(!data.done){var limit=data.limit;if(!(data.done=limit>-1?data.count++>=limit:!iteratee(value))){continue outer}}}else{var computed=iteratee(value);if(type==LAZY_MAP_FLAG){value=computed}else if(!computed){if(type==LAZY_FILTER_FLAG){continue outer}else{break outer}}}}result[resIndex++]=value}return result}function MapCache(){this.__data__={}}function mapDelete(key){return this.has(key)&&delete this.__data__[key]}function mapGet(key){return key=="__proto__"?undefined:this.__data__[key]}function mapHas(key){return key!="__proto__"&&hasOwnProperty.call(this.__data__,key)}function mapSet(key,value){if(key!="__proto__"){this.__data__[key]=value}return this}function SetCache(values){var length=values?values.length:0;this.data={hash:nativeCreate(null),set:new Set};while(length--){this.push(values[length])}}function cacheIndexOf(cache,value){var data=cache.data,result=typeof value=="string"||isObject(value)?data.set.has(value):data.hash[value];return result?0:-1}function cachePush(value){var data=this.data;if(typeof value=="string"||isObject(value)){data.set.add(value)}else{data.hash[value]=true}}function arrayCopy(source,array){var index=-1,length=source.length;array||(array=Array(length));while(++index<length){array[index]=source[index]}return array}function arrayEach(array,iteratee){var index=-1,length=array.length;while(++index<length){if(iteratee(array[index],index,array)===false){break}}return array}function arrayEachRight(array,iteratee){var length=array.length;while(length--){if(iteratee(array[length],length,array)===false){break}}return array}function arrayEvery(array,predicate){var index=-1,length=array.length;while(++index<length){if(!predicate(array[index],index,array)){return false}}return true}function arrayFilter(array,predicate){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index];if(predicate(value,index,array)){result[++resIndex]=value}}return result}function arrayMap(array,iteratee){var index=-1,length=array.length,result=Array(length);while(++index<length){result[index]=iteratee(array[index],index,array)}return result}function arrayMax(array){var index=-1,length=array.length,result=NEGATIVE_INFINITY;while(++index<length){var value=array[index];if(value>result){result=value}}return result}function arrayMin(array){var index=-1,length=array.length,result=POSITIVE_INFINITY;while(++index<length){var value=array[index];if(value<result){result=value}}return result}function arrayReduce(array,iteratee,accumulator,initFromArray){var index=-1,length=array.length;if(initFromArray&&length){accumulator=array[++index]}while(++index<length){accumulator=iteratee(accumulator,array[index],index,array)}return accumulator}function arrayReduceRight(array,iteratee,accumulator,initFromArray){var length=array.length;if(initFromArray&&length){accumulator=array[--length]}while(length--){accumulator=iteratee(accumulator,array[length],length,array)}return accumulator}function arraySome(array,predicate){var index=-1,length=array.length;while(++index<length){if(predicate(array[index],index,array)){return true}}return false}function arraySum(array){var length=array.length,result=0;while(length--){result+=+array[length]||0}return result}function assignDefaults(objectValue,sourceValue){return objectValue===undefined?sourceValue:objectValue}function assignOwnDefaults(objectValue,sourceValue,key,object){return objectValue===undefined||!hasOwnProperty.call(object,key)?sourceValue:objectValue}function assignWith(object,source,customizer){var props=keys(source);push.apply(props,getSymbols(source));var index=-1,length=props.length;while(++index<length){var key=props[index],value=object[key],result=customizer(value,source[key],key,object,source);if((result===result?result!==value:value===value)||value===undefined&&!(key in object)){object[key]=result}}return object}var baseAssign=nativeAssign||function(object,source){return source==null?object:baseCopy(source,getSymbols(source),baseCopy(source,keys(source),object))};function baseAt(collection,props){var index=-1,length=collection.length,isArr=isLength(length),propsLength=props.length,result=Array(propsLength);while(++index<propsLength){var key=props[index];if(isArr){result[index]=isIndex(key,length)?collection[key]:undefined}else{result[index]=collection[key]}}return result}function baseCopy(source,props,object){object||(object={});var index=-1,length=props.length;while(++index<length){var key=props[index];object[key]=source[key]}return object}function baseCallback(func,thisArg,argCount){var type=typeof func;if(type=="function"){return thisArg===undefined?func:bindCallback(func,thisArg,argCount)}if(func==null){return identity}if(type=="object"){return baseMatches(func)}return thisArg===undefined?property(func):baseMatchesProperty(func,thisArg)}function baseClone(value,isDeep,customizer,key,object,stackA,stackB){var result;if(customizer){result=object?customizer(value,key,object):customizer(value)}if(result!==undefined){return result}if(!isObject(value)){return value}var isArr=isArray(value);if(isArr){result=initCloneArray(value);if(!isDeep){return arrayCopy(value,result)}}else{var tag=objToString.call(value),isFunc=tag==funcTag;if(tag==objectTag||tag==argsTag||isFunc&&!object){result=initCloneObject(isFunc?{}:value);if(!isDeep){return baseAssign(result,value)}}else{return cloneableTags[tag]?initCloneByTag(value,tag,isDeep):object?value:{}}}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==value){return stackB[length]}}stackA.push(value);stackB.push(result);(isArr?arrayEach:baseForOwn)(value,function(subValue,key){result[key]=baseClone(subValue,isDeep,customizer,key,value,stackA,stackB)});return result}var baseCreate=function(){function Object(){}return function(prototype){if(isObject(prototype)){Object.prototype=prototype;var result=new Object;Object.prototype=null}return result||context.Object()}}();function baseDelay(func,wait,args){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return setTimeout(function(){func.apply(undefined,args)},wait)}function baseDifference(array,values){var length=array?array.length:0,result=[];if(!length){return result}var index=-1,indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,cache=isCommon&&values.length>=200?createCache(values):null,valuesLength=values.length;if(cache){indexOf=cacheIndexOf;isCommon=false;values=cache}outer:while(++index<length){var value=array[index];if(isCommon&&value===value){var valuesIndex=valuesLength;while(valuesIndex--){if(values[valuesIndex]===value){continue outer}}result.push(value)}else if(indexOf(values,value,0)<0){result.push(value)}}return result}var baseEach=createBaseEach(baseForOwn);var baseEachRight=createBaseEach(baseForOwnRight,true);function baseEvery(collection,predicate){var result=true;baseEach(collection,function(value,index,collection){result=!!predicate(value,index,collection);return result});return result}function baseFill(array,value,start,end){var length=array.length;start=start==null?0:+start||0;if(start<0){start=-start>length?0:length+start}end=end===undefined||end>length?length:+end||0;if(end<0){end+=length}length=start>end?0:end>>>0;start>>>=0;while(start<length){array[start++]=value}return array}function baseFilter(collection,predicate){var result=[];baseEach(collection,function(value,index,collection){if(predicate(value,index,collection)){result.push(value)}});return result}function baseFind(collection,predicate,eachFunc,retKey){var result;eachFunc(collection,function(value,key,collection){if(predicate(value,key,collection)){result=retKey?key:value;return false}});return result}function baseFlatten(array,isDeep,isStrict){var index=-1,length=array.length,resIndex=-1,result=[];while(++index<length){var value=array[index];if(isObjectLike(value)&&isLength(value.length)&&(isArray(value)||isArguments(value))){if(isDeep){value=baseFlatten(value,isDeep,isStrict)}var valIndex=-1,valLength=value.length;result.length+=valLength;while(++valIndex<valLength){result[++resIndex]=value[valIndex]}}else if(!isStrict){result[++resIndex]=value}}return result}var baseFor=createBaseFor();var baseForRight=createBaseFor(true);function baseForIn(object,iteratee){return baseFor(object,iteratee,keysIn)}function baseForOwn(object,iteratee){return baseFor(object,iteratee,keys)}function baseForOwnRight(object,iteratee){return baseForRight(object,iteratee,keys)}function baseFunctions(object,props){var index=-1,length=props.length,resIndex=-1,result=[];while(++index<length){var key=props[index];if(isFunction(object[key])){result[++resIndex]=key}}return result}function baseGet(object,path,pathKey){if(object==null){return}if(pathKey!==undefined&&pathKey in toObject(object)){path=[pathKey]}var index=-1,length=path.length;while(object!=null&&++index<length){var result=object=object[path[index]]}return result}function baseIsEqual(value,other,customizer,isLoose,stackA,stackB){if(value===other){return value!==0||1/value==1/other}var valType=typeof value,othType=typeof other;if(valType!="function"&&valType!="object"&&othType!="function"&&othType!="object"||value==null||other==null){return value!==value&&other!==other}return baseIsEqualDeep(value,other,baseIsEqual,customizer,isLoose,stackA,stackB)}function baseIsEqualDeep(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objIsArr=isArray(object),othIsArr=isArray(other),objTag=arrayTag,othTag=arrayTag;if(!objIsArr){objTag=objToString.call(object);if(objTag==argsTag){objTag=objectTag}else if(objTag!=objectTag){objIsArr=isTypedArray(object)}}if(!othIsArr){othTag=objToString.call(other);if(othTag==argsTag){othTag=objectTag}else if(othTag!=objectTag){othIsArr=isTypedArray(other)}}var objIsObj=objTag==objectTag,othIsObj=othTag==objectTag,isSameTag=objTag==othTag;if(isSameTag&&!(objIsArr||objIsObj)){return equalByTag(object,other,objTag)}if(!isLoose){var valWrapped=objIsObj&&hasOwnProperty.call(object,"__wrapped__"),othWrapped=othIsObj&&hasOwnProperty.call(other,"__wrapped__");if(valWrapped||othWrapped){return equalFunc(valWrapped?object.value():object,othWrapped?other.value():other,customizer,isLoose,stackA,stackB)}}if(!isSameTag){return false}stackA||(stackA=[]);stackB||(stackB=[]);var length=stackA.length;while(length--){if(stackA[length]==object){return stackB[length]==other}}stackA.push(object);stackB.push(other);var result=(objIsArr?equalArrays:equalObjects)(object,other,equalFunc,customizer,isLoose,stackA,stackB);stackA.pop();stackB.pop();return result}function baseIsMatch(object,props,values,strictCompareFlags,customizer){var index=-1,length=props.length,noCustomizer=!customizer;while(++index<length){if(noCustomizer&&strictCompareFlags[index]?values[index]!==object[props[index]]:!(props[index]in object)){return false}}index=-1;while(++index<length){var key=props[index],objValue=object[key],srcValue=values[index];if(noCustomizer&&strictCompareFlags[index]){var result=objValue!==undefined||key in object}else{result=customizer?customizer(objValue,srcValue,key):undefined;if(result===undefined){result=baseIsEqual(srcValue,objValue,customizer,true)}}if(!result){return false}}return true}function baseMap(collection,iteratee){var index=-1,length=getLength(collection),result=isLength(length)?Array(length):[];baseEach(collection,function(value,key,collection){result[++index]=iteratee(value,key,collection)});return result}function baseMatches(source){var props=keys(source),length=props.length;if(!length){return constant(true)}if(length==1){var key=props[0],value=source[key];if(isStrictComparable(value)){return function(object){if(object==null){return false}return object[key]===value&&(value!==undefined||key in toObject(object))}}}var values=Array(length),strictCompareFlags=Array(length);while(length--){value=source[props[length]];values[length]=value;strictCompareFlags[length]=isStrictComparable(value)}return function(object){return object!=null&&baseIsMatch(toObject(object),props,values,strictCompareFlags)}}function baseMatchesProperty(path,value){var isArr=isArray(path),isCommon=isKey(path)&&isStrictComparable(value),pathKey=path+"";path=toPath(path);return function(object){if(object==null){return false}var key=pathKey;object=toObject(object);if((isArr||!isCommon)&&!(key in object)){object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));if(object==null){return false}key=last(path);object=toObject(object)}return object[key]===value?value!==undefined||key in object:baseIsEqual(value,object[key],null,true)}}function baseMerge(object,source,customizer,stackA,stackB){if(!isObject(object)){return object}var isSrcArr=isLength(source.length)&&(isArray(source)||isTypedArray(source));if(!isSrcArr){var props=keys(source);push.apply(props,getSymbols(source))}arrayEach(props||source,function(srcValue,key){if(props){key=srcValue;srcValue=source[key]}if(isObjectLike(srcValue)){stackA||(stackA=[]);stackB||(stackB=[]);baseMergeDeep(object,source,key,baseMerge,customizer,stackA,stackB)}else{var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;if(isCommon){result=srcValue}if((isSrcArr||result!==undefined)&&(isCommon||(result===result?result!==value:value===value))){object[key]=result}}});return object}function baseMergeDeep(object,source,key,mergeFunc,customizer,stackA,stackB){var length=stackA.length,srcValue=source[key];while(length--){if(stackA[length]==srcValue){object[key]=stackB[length];return}}var value=object[key],result=customizer?customizer(value,srcValue,key,object,source):undefined,isCommon=result===undefined;if(isCommon){result=srcValue;if(isLength(srcValue.length)&&(isArray(srcValue)||isTypedArray(srcValue))){result=isArray(value)?value:getLength(value)?arrayCopy(value):[]}else if(isPlainObject(srcValue)||isArguments(srcValue)){result=isArguments(value)?toPlainObject(value):isPlainObject(value)?value:{}}else{isCommon=false}}stackA.push(srcValue);stackB.push(result);if(isCommon){object[key]=mergeFunc(result,srcValue,customizer,stackA,stackB)}else if(result===result?result!==value:value===value){object[key]=result}}function baseProperty(key){return function(object){return object==null?undefined:object[key]}}function basePropertyDeep(path){var pathKey=path+"";path=toPath(path);return function(object){return baseGet(object,path,pathKey)}}function basePullAt(array,indexes){var length=indexes.length;while(length--){var index=parseFloat(indexes[length]);if(index!=previous&&isIndex(index)){var previous=index;splice.call(array,index,1)}}return array}function baseRandom(min,max){return min+floor(nativeRandom()*(max-min+1))}function baseReduce(collection,iteratee,accumulator,initFromCollection,eachFunc){eachFunc(collection,function(value,index,collection){accumulator=initFromCollection?(initFromCollection=false,value):iteratee(accumulator,value,index,collection)});return accumulator}var baseSetData=!metaMap?identity:function(func,data){metaMap.set(func,data);return func};function baseSlice(array,start,end){var index=-1,length=array.length;start=start==null?0:+start||0;if(start<0){start=-start>length?0:length+start}end=end===undefined||end>length?length:+end||0;if(end<0){end+=length}length=start>end?0:end-start>>>0;start>>>=0;var result=Array(length);while(++index<length){result[index]=array[index+start]}return result}function baseSome(collection,predicate){var result;baseEach(collection,function(value,index,collection){result=predicate(value,index,collection);return!result});return!!result}function baseSortBy(array,comparer){var length=array.length;array.sort(comparer);while(length--){array[length]=array[length].value}return array}function baseSortByOrder(collection,iteratees,orders){var callback=getCallback(),index=-1;iteratees=arrayMap(iteratees,function(iteratee){return callback(iteratee)});var result=baseMap(collection,function(value){var criteria=arrayMap(iteratees,function(iteratee){return iteratee(value)});return{criteria:criteria,index:++index,value:value}});return baseSortBy(result,function(object,other){return compareMultiple(object,other,orders)})}function baseSum(collection,iteratee){var result=0;baseEach(collection,function(value,index,collection){result+=+iteratee(value,index,collection)||0});return result}function baseUniq(array,iteratee){var index=-1,indexOf=getIndexOf(),length=array.length,isCommon=indexOf==baseIndexOf,isLarge=isCommon&&length>=200,seen=isLarge?createCache():null,result=[];if(seen){indexOf=cacheIndexOf;isCommon=false}else{isLarge=false;seen=iteratee?[]:result}outer:while(++index<length){var value=array[index],computed=iteratee?iteratee(value,index,array):value;if(isCommon&&value===value){var seenIndex=seen.length;while(seenIndex--){if(seen[seenIndex]===computed){continue outer}}if(iteratee){seen.push(computed)}result.push(value)}else if(indexOf(seen,computed,0)<0){if(iteratee||isLarge){seen.push(computed)}result.push(value)}}return result}function baseValues(object,props){var index=-1,length=props.length,result=Array(length);while(++index<length){result[index]=object[props[index]]}return result}function baseWhile(array,predicate,isDrop,fromRight){var length=array.length,index=fromRight?length:-1;while((fromRight?index--:++index<length)&&predicate(array[index],index,array)){}return isDrop?baseSlice(array,fromRight?0:index,fromRight?index+1:length):baseSlice(array,fromRight?index+1:0,fromRight?length:index)}function baseWrapperValue(value,actions){var result=value;if(result instanceof LazyWrapper){result=result.value()}var index=-1,length=actions.length;while(++index<length){var args=[result],action=actions[index];push.apply(args,action.args);result=action.func.apply(action.thisArg,args)}return result}function binaryIndex(array,value,retHighest){var low=0,high=array?array.length:low;if(typeof value=="number"&&value===value&&high<=HALF_MAX_ARRAY_LENGTH){while(low<high){var mid=low+high>>>1,computed=array[mid];if(retHighest?computed<=value:computed<value){low=mid+1}else{high=mid}}return high}return binaryIndexBy(array,value,identity,retHighest)}function binaryIndexBy(array,value,iteratee,retHighest){value=iteratee(value);var low=0,high=array?array.length:0,valIsNaN=value!==value,valIsUndef=value===undefined;while(low<high){var mid=floor((low+high)/2),computed=iteratee(array[mid]),isReflexive=computed===computed;if(valIsNaN){var setLow=isReflexive||retHighest}else if(valIsUndef){setLow=isReflexive&&(retHighest||computed!==undefined)}else{setLow=retHighest?computed<=value:computed<value}if(setLow){low=mid+1}else{high=mid}}return nativeMin(high,MAX_ARRAY_INDEX)}function bindCallback(func,thisArg,argCount){if(typeof func!="function"){return identity}if(thisArg===undefined){return func}switch(argCount){case 1:return function(value){return func.call(thisArg,value)};case 3:return function(value,index,collection){return func.call(thisArg,value,index,collection)};case 4:return function(accumulator,value,index,collection){return func.call(thisArg,accumulator,value,index,collection)};case 5:return function(value,other,key,object,source){return func.call(thisArg,value,other,key,object,source)}}return function(){return func.apply(thisArg,arguments)}}function bufferClone(buffer){return bufferSlice.call(buffer,0)}if(!bufferSlice){bufferClone=!(ArrayBuffer&&Uint8Array)?constant(null):function(buffer){var byteLength=buffer.byteLength,floatLength=Float64Array?floor(byteLength/FLOAT64_BYTES_PER_ELEMENT):0,offset=floatLength*FLOAT64_BYTES_PER_ELEMENT,result=new ArrayBuffer(byteLength);if(floatLength){var view=new Float64Array(result,0,floatLength);view.set(new Float64Array(buffer,0,floatLength))}if(byteLength!=offset){view=new Uint8Array(result,offset);view.set(new Uint8Array(buffer,offset))}return result}}function composeArgs(args,partials,holders){var holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),leftIndex=-1,leftLength=partials.length,result=Array(argsLength+leftLength);while(++leftIndex<leftLength){result[leftIndex]=partials[leftIndex]}while(++argsIndex<holdersLength){result[holders[argsIndex]]=args[argsIndex]}while(argsLength--){result[leftIndex++]=args[argsIndex++]}return result}function composeArgsRight(args,partials,holders){var holdersIndex=-1,holdersLength=holders.length,argsIndex=-1,argsLength=nativeMax(args.length-holdersLength,0),rightIndex=-1,rightLength=partials.length,result=Array(argsLength+rightLength);while(++argsIndex<argsLength){result[argsIndex]=args[argsIndex]}var pad=argsIndex;while(++rightIndex<rightLength){result[pad+rightIndex]=partials[rightIndex]}while(++holdersIndex<holdersLength){result[pad+holders[holdersIndex]]=args[argsIndex++]}return result}function createAggregator(setter,initializer){return function(collection,iteratee,thisArg){var result=initializer?initializer():{};iteratee=getCallback(iteratee,thisArg,3);if(isArray(collection)){var index=-1,length=collection.length;while(++index<length){var value=collection[index];setter(result,value,iteratee(value,index,collection),collection)}}else{baseEach(collection,function(value,key,collection){setter(result,value,iteratee(value,key,collection),collection)})}return result}}function createAssigner(assigner){return restParam(function(object,sources){var index=-1,length=object==null?0:sources.length,customizer=length>2&&sources[length-2],guard=length>2&&sources[2],thisArg=length>1&&sources[length-1];if(typeof customizer=="function"){customizer=bindCallback(customizer,thisArg,5);length-=2}else{customizer=typeof thisArg=="function"?thisArg:null;length-=customizer?1:0}if(guard&&isIterateeCall(sources[0],sources[1],guard)){customizer=length<3?null:customizer;length=1}while(++index<length){var source=sources[index];if(source){assigner(object,source,customizer)}}return object})}function createBaseEach(eachFunc,fromRight){return function(collection,iteratee){var length=collection?getLength(collection):0;if(!isLength(length)){return eachFunc(collection,iteratee)}var index=fromRight?length:-1,iterable=toObject(collection);while(fromRight?index--:++index<length){if(iteratee(iterable[index],index,iterable)===false){break}}return collection}}function createBaseFor(fromRight){return function(object,iteratee,keysFunc){var iterable=toObject(object),props=keysFunc(object),length=props.length,index=fromRight?length:-1;while(fromRight?index--:++index<length){var key=props[index];if(iteratee(iterable[key],key,iterable)===false){break}}return object}}function createBindWrapper(func,thisArg){var Ctor=createCtorWrapper(func);function wrapper(){var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(thisArg,arguments)}return wrapper}var createCache=!(nativeCreate&&Set)?constant(null):function(values){return new SetCache(values)};function createCompounder(callback){return function(string){var index=-1,array=words(deburr(string)),length=array.length,result="";while(++index<length){result=callback(result,array[index],index)}return result}}function createCtorWrapper(Ctor){return function(){var thisBinding=baseCreate(Ctor.prototype),result=Ctor.apply(thisBinding,arguments);return isObject(result)?result:thisBinding}}function createCurry(flag){function curryFunc(func,arity,guard){if(guard&&isIterateeCall(func,arity,guard)){arity=null}var result=createWrapper(func,flag,null,null,null,null,null,arity);result.placeholder=curryFunc.placeholder;return result}return curryFunc}function createExtremum(arrayFunc,isMin){return function(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=null}var func=getCallback(),noIteratee=iteratee==null;if(!(func===baseCallback&&noIteratee)){noIteratee=false;iteratee=func(iteratee,thisArg,3)}if(noIteratee){var isArr=isArray(collection);if(!isArr&&isString(collection)){iteratee=charAtCallback}else{return arrayFunc(isArr?collection:toIterable(collection))}}return extremumBy(collection,iteratee,isMin)}}function createFind(eachFunc,fromRight){return function(collection,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);if(isArray(collection)){var index=baseFindIndex(collection,predicate,fromRight);return index>-1?collection[index]:undefined}return baseFind(collection,predicate,eachFunc)}}function createFindIndex(fromRight){return function(array,predicate,thisArg){if(!(array&&array.length)){return-1}predicate=getCallback(predicate,thisArg,3);return baseFindIndex(array,predicate,fromRight)}}function createFindKey(objectFunc){return function(object,predicate,thisArg){predicate=getCallback(predicate,thisArg,3);return baseFind(object,predicate,objectFunc,true)}}function createFlow(fromRight){return function(){var length=arguments.length;if(!length){return function(){return arguments[0]}}var wrapper,index=fromRight?length:-1,leftIndex=0,funcs=Array(length);while(fromRight?index--:++index<length){var func=funcs[leftIndex++]=arguments[index];if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var funcName=wrapper?"":getFuncName(func);wrapper=funcName=="wrapper"?new LodashWrapper([]):wrapper}index=wrapper?-1:length;while(++index<length){func=funcs[index];funcName=getFuncName(func);var data=funcName=="wrapper"?getData(func):null;if(data&&isLaziable(data[0])){wrapper=wrapper[getFuncName(data[0])].apply(wrapper,data[3])}else{wrapper=func.length==1&&isLaziable(func)?wrapper[funcName]():wrapper.thru(func)}}return function(){var args=arguments;if(wrapper&&args.length==1&&isArray(args[0])){return wrapper.plant(args[0]).value()}var index=0,result=funcs[index].apply(this,args);

while(++index<length){result=funcs[index].call(this,result)}return result}}}function createForEach(arrayFunc,eachFunc){return function(collection,iteratee,thisArg){return typeof iteratee=="function"&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee):eachFunc(collection,bindCallback(iteratee,thisArg,3))}}function createForIn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!="function"||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3)}return objectFunc(object,iteratee,keysIn)}}function createForOwn(objectFunc){return function(object,iteratee,thisArg){if(typeof iteratee!="function"||thisArg!==undefined){iteratee=bindCallback(iteratee,thisArg,3)}return objectFunc(object,iteratee)}}function createPadDir(fromRight){return function(string,length,chars){string=baseToString(string);return string&&(fromRight?string:"")+createPadding(string,length,chars)+(fromRight?"":string)}}function createPartial(flag){var partialFunc=restParam(function(func,partials){var holders=replaceHolders(partials,partialFunc.placeholder);return createWrapper(func,flag,null,partials,holders)});return partialFunc}function createReduce(arrayFunc,eachFunc){return function(collection,iteratee,accumulator,thisArg){var initFromArray=arguments.length<3;return typeof iteratee=="function"&&thisArg===undefined&&isArray(collection)?arrayFunc(collection,iteratee,accumulator,initFromArray):baseReduce(collection,getCallback(iteratee,thisArg,4),accumulator,initFromArray,eachFunc)}}function createHybridWrapper(func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity){var isAry=bitmask&ARY_FLAG,isBind=bitmask&BIND_FLAG,isBindKey=bitmask&BIND_KEY_FLAG,isCurry=bitmask&CURRY_FLAG,isCurryBound=bitmask&CURRY_BOUND_FLAG,isCurryRight=bitmask&CURRY_RIGHT_FLAG;var Ctor=!isBindKey&&createCtorWrapper(func),key=func;function wrapper(){var length=arguments.length,index=length,args=Array(length);while(index--){args[index]=arguments[index]}if(partials){args=composeArgs(args,partials,holders)}if(partialsRight){args=composeArgsRight(args,partialsRight,holdersRight)}if(isCurry||isCurryRight){var placeholder=wrapper.placeholder,argsHolders=replaceHolders(args,placeholder);length-=argsHolders.length;if(length<arity){var newArgPos=argPos?arrayCopy(argPos):null,newArity=nativeMax(arity-length,0),newsHolders=isCurry?argsHolders:null,newHoldersRight=isCurry?null:argsHolders,newPartials=isCurry?args:null,newPartialsRight=isCurry?null:args;bitmask|=isCurry?PARTIAL_FLAG:PARTIAL_RIGHT_FLAG;bitmask&=~(isCurry?PARTIAL_RIGHT_FLAG:PARTIAL_FLAG);if(!isCurryBound){bitmask&=~(BIND_FLAG|BIND_KEY_FLAG)}var newData=[func,bitmask,thisArg,newPartials,newsHolders,newPartialsRight,newHoldersRight,newArgPos,ary,newArity],result=createHybridWrapper.apply(undefined,newData);if(isLaziable(func)){setData(result,newData)}result.placeholder=placeholder;return result}}var thisBinding=isBind?thisArg:this;if(isBindKey){func=thisBinding[key]}if(argPos){args=reorder(args,argPos)}if(isAry&&ary<args.length){args.length=ary}var fn=this&&this!==root&&this instanceof wrapper?Ctor||createCtorWrapper(func):func;return fn.apply(thisBinding,args)}return wrapper}function createPadding(string,length,chars){var strLength=string.length;length=+length;if(strLength>=length||!nativeIsFinite(length)){return""}var padLength=length-strLength;chars=chars==null?" ":chars+"";return repeat(chars,ceil(padLength/chars.length)).slice(0,padLength)}function createPartialWrapper(func,bitmask,thisArg,partials){var isBind=bitmask&BIND_FLAG,Ctor=createCtorWrapper(func);function wrapper(){var argsIndex=-1,argsLength=arguments.length,leftIndex=-1,leftLength=partials.length,args=Array(argsLength+leftLength);while(++leftIndex<leftLength){args[leftIndex]=partials[leftIndex]}while(argsLength--){args[leftIndex++]=arguments[++argsIndex]}var fn=this&&this!==root&&this instanceof wrapper?Ctor:func;return fn.apply(isBind?thisArg:this,args)}return wrapper}function createSortedIndex(retHighest){return function(array,value,iteratee,thisArg){var func=getCallback(iteratee);return func===baseCallback&&iteratee==null?binaryIndex(array,value,retHighest):binaryIndexBy(array,value,func(iteratee,thisArg,1),retHighest)}}function createWrapper(func,bitmask,thisArg,partials,holders,argPos,ary,arity){var isBindKey=bitmask&BIND_KEY_FLAG;if(!isBindKey&&typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var length=partials?partials.length:0;if(!length){bitmask&=~(PARTIAL_FLAG|PARTIAL_RIGHT_FLAG);partials=holders=null}length-=holders?holders.length:0;if(bitmask&PARTIAL_RIGHT_FLAG){var partialsRight=partials,holdersRight=holders;partials=holders=null}var data=isBindKey?null:getData(func),newData=[func,bitmask,thisArg,partials,holders,partialsRight,holdersRight,argPos,ary,arity];if(data){mergeData(newData,data);bitmask=newData[1];arity=newData[9]}newData[9]=arity==null?isBindKey?0:func.length:nativeMax(arity-length,0)||0;if(bitmask==BIND_FLAG){var result=createBindWrapper(newData[0],newData[2])}else if((bitmask==PARTIAL_FLAG||bitmask==(BIND_FLAG|PARTIAL_FLAG))&&!newData[4].length){result=createPartialWrapper.apply(undefined,newData)}else{result=createHybridWrapper.apply(undefined,newData)}var setter=data?baseSetData:setData;return setter(result,newData)}function equalArrays(array,other,equalFunc,customizer,isLoose,stackA,stackB){var index=-1,arrLength=array.length,othLength=other.length,result=true;if(arrLength!=othLength&&!(isLoose&&othLength>arrLength)){return false}while(result&&++index<arrLength){var arrValue=array[index],othValue=other[index];result=undefined;if(customizer){result=isLoose?customizer(othValue,arrValue,index):customizer(arrValue,othValue,index)}if(result===undefined){if(isLoose){var othIndex=othLength;while(othIndex--){othValue=other[othIndex];result=arrValue&&arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB);if(result){break}}}else{result=arrValue&&arrValue===othValue||equalFunc(arrValue,othValue,customizer,isLoose,stackA,stackB)}}}return!!result}function equalByTag(object,other,tag){switch(tag){case boolTag:case dateTag:return+object==+other;case errorTag:return object.name==other.name&&object.message==other.message;case numberTag:return object!=+object?other!=+other:object==0?1/object==1/other:object==+other;case regexpTag:case stringTag:return object==other+""}return false}function equalObjects(object,other,equalFunc,customizer,isLoose,stackA,stackB){var objProps=keys(object),objLength=objProps.length,othProps=keys(other),othLength=othProps.length;if(objLength!=othLength&&!isLoose){return false}var skipCtor=isLoose,index=-1;while(++index<objLength){var key=objProps[index],result=isLoose?key in other:hasOwnProperty.call(other,key);if(result){var objValue=object[key],othValue=other[key];result=undefined;if(customizer){result=isLoose?customizer(othValue,objValue,key):customizer(objValue,othValue,key)}if(result===undefined){result=objValue&&objValue===othValue||equalFunc(objValue,othValue,customizer,isLoose,stackA,stackB)}}if(!result){return false}skipCtor||(skipCtor=key=="constructor")}if(!skipCtor){var objCtor=object.constructor,othCtor=other.constructor;if(objCtor!=othCtor&&("constructor"in object&&"constructor"in other)&&!(typeof objCtor=="function"&&objCtor instanceof objCtor&&typeof othCtor=="function"&&othCtor instanceof othCtor)){return false}}return true}function extremumBy(collection,iteratee,isMin){var exValue=isMin?POSITIVE_INFINITY:NEGATIVE_INFINITY,computed=exValue,result=computed;baseEach(collection,function(value,index,collection){var current=iteratee(value,index,collection);if((isMin?current<computed:current>computed)||current===exValue&&current===result){computed=current;result=value}});return result}function getCallback(func,thisArg,argCount){var result=lodash.callback||callback;result=result===callback?baseCallback:result;return argCount?result(func,thisArg,argCount):result}var getData=!metaMap?noop:function(func){return metaMap.get(func)};var getFuncName=function(){if(!support.funcNames){return constant("")}if(constant.name=="constant"){return baseProperty("name")}return function(func){var result=func.name,array=realNames[result],length=array?array.length:0;while(length--){var data=array[length],otherFunc=data.func;if(otherFunc==null||otherFunc==func){return data.name}}return result}}();function getIndexOf(collection,target,fromIndex){var result=lodash.indexOf||indexOf;result=result===indexOf?baseIndexOf:result;return collection?result(collection,target,fromIndex):result}var getLength=baseProperty("length");var getSymbols=!getOwnPropertySymbols?constant([]):function(object){return getOwnPropertySymbols(toObject(object))};function getView(start,end,transforms){var index=-1,length=transforms?transforms.length:0;while(++index<length){var data=transforms[index],size=data.size;switch(data.type){case"drop":start+=size;break;case"dropRight":end-=size;break;case"take":end=nativeMin(end,start+size);break;case"takeRight":start=nativeMax(start,end-size);break}}return{start:start,end:end}}function initCloneArray(array){var length=array.length,result=new array.constructor(length);if(length&&typeof array[0]=="string"&&hasOwnProperty.call(array,"index")){result.index=array.index;result.input=array.input}return result}function initCloneObject(object){var Ctor=object.constructor;if(!(typeof Ctor=="function"&&Ctor instanceof Ctor)){Ctor=Object}return new Ctor}function initCloneByTag(object,tag,isDeep){var Ctor=object.constructor;switch(tag){case arrayBufferTag:return bufferClone(object);case boolTag:case dateTag:return new Ctor(+object);case float32Tag:case float64Tag:case int8Tag:case int16Tag:case int32Tag:case uint8Tag:case uint8ClampedTag:case uint16Tag:case uint32Tag:var buffer=object.buffer;return new Ctor(isDeep?bufferClone(buffer):buffer,object.byteOffset,object.length);case numberTag:case stringTag:return new Ctor(object);case regexpTag:var result=new Ctor(object.source,reFlags.exec(object));result.lastIndex=object.lastIndex}return result}function invokePath(object,path,args){if(object!=null&&!isKey(path,object)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));path=last(path)}var func=object==null?object:object[path];return func==null?undefined:func.apply(object,args)}function isIndex(value,length){value=+value;length=length==null?MAX_SAFE_INTEGER:length;return value>-1&&value%1==0&&value<length}function isIterateeCall(value,index,object){if(!isObject(object)){return false}var type=typeof index;if(type=="number"){var length=getLength(object),prereq=isLength(length)&&isIndex(index,length)}else{prereq=type=="string"&&index in object}if(prereq){var other=object[index];return value===value?value===other:other!==other}return false}function isKey(value,object){var type=typeof value;if(type=="string"&&reIsPlainProp.test(value)||type=="number"){return true}if(isArray(value)){return false}var result=!reIsDeepProp.test(value);return result||object!=null&&value in toObject(object)}function isLaziable(func){var funcName=getFuncName(func);return!!funcName&&func===lodash[funcName]&&funcName in LazyWrapper.prototype}function isLength(value){return typeof value=="number"&&value>-1&&value%1==0&&value<=MAX_SAFE_INTEGER}function isStrictComparable(value){return value===value&&(value===0?1/value>0:!isObject(value))}function mergeData(data,source){var bitmask=data[1],srcBitmask=source[1],newBitmask=bitmask|srcBitmask,isCommon=newBitmask<ARY_FLAG;var isCombo=srcBitmask==ARY_FLAG&&bitmask==CURRY_FLAG||srcBitmask==ARY_FLAG&&bitmask==REARG_FLAG&&data[7].length<=source[8]||srcBitmask==(ARY_FLAG|REARG_FLAG)&&bitmask==CURRY_FLAG;if(!(isCommon||isCombo)){return data}if(srcBitmask&BIND_FLAG){data[2]=source[2];newBitmask|=bitmask&BIND_FLAG?0:CURRY_BOUND_FLAG}var value=source[3];if(value){var partials=data[3];data[3]=partials?composeArgs(partials,value,source[4]):arrayCopy(value);data[4]=partials?replaceHolders(data[3],PLACEHOLDER):arrayCopy(source[4])}value=source[5];if(value){partials=data[5];data[5]=partials?composeArgsRight(partials,value,source[6]):arrayCopy(value);data[6]=partials?replaceHolders(data[5],PLACEHOLDER):arrayCopy(source[6])}value=source[7];if(value){data[7]=arrayCopy(value)}if(srcBitmask&ARY_FLAG){data[8]=data[8]==null?source[8]:nativeMin(data[8],source[8])}if(data[9]==null){data[9]=source[9]}data[0]=source[0];data[1]=newBitmask;return data}function pickByArray(object,props){object=toObject(object);var index=-1,length=props.length,result={};while(++index<length){var key=props[index];if(key in object){result[key]=object[key]}}return result}function pickByCallback(object,predicate){var result={};baseForIn(object,function(value,key,object){if(predicate(value,key,object)){result[key]=value}});return result}function reorder(array,indexes){var arrLength=array.length,length=nativeMin(indexes.length,arrLength),oldArray=arrayCopy(array);while(length--){var index=indexes[length];array[length]=isIndex(index,arrLength)?oldArray[index]:undefined}return array}var setData=function(){var count=0,lastCalled=0;return function(key,value){var stamp=now(),remaining=HOT_SPAN-(stamp-lastCalled);lastCalled=stamp;if(remaining>0){if(++count>=HOT_COUNT){return key}}else{count=0}return baseSetData(key,value)}}();function shimIsPlainObject(value){var Ctor,support=lodash.support;if(!(isObjectLike(value)&&objToString.call(value)==objectTag)||!hasOwnProperty.call(value,"constructor")&&(Ctor=value.constructor,typeof Ctor=="function"&&!(Ctor instanceof Ctor))){return false}var result;baseForIn(value,function(subValue,key){result=key});return result===undefined||hasOwnProperty.call(value,result)}function shimKeys(object){var props=keysIn(object),propsLength=props.length,length=propsLength&&object.length,support=lodash.support;var allowIndexes=length&&isLength(length)&&(isArray(object)||support.nonEnumArgs&&isArguments(object));var index=-1,result=[];while(++index<propsLength){var key=props[index];if(allowIndexes&&isIndex(key,length)||hasOwnProperty.call(object,key)){result.push(key)}}return result}function toIterable(value){if(value==null){return[]}if(!isLength(getLength(value))){return values(value)}return isObject(value)?value:Object(value)}function toObject(value){return isObject(value)?value:Object(value)}function toPath(value){if(isArray(value)){return value}var result=[];baseToString(value).replace(rePropName,function(match,number,quote,string){result.push(quote?string.replace(reEscapeChar,"$1"):number||match)});return result}function wrapperClone(wrapper){return wrapper instanceof LazyWrapper?wrapper.clone():new LodashWrapper(wrapper.__wrapped__,wrapper.__chain__,arrayCopy(wrapper.__actions__))}function chunk(array,size,guard){if(guard?isIterateeCall(array,size,guard):size==null){size=1}else{size=nativeMax(+size||1,1)}var index=0,length=array?array.length:0,resIndex=-1,result=Array(ceil(length/size));while(index<length){result[++resIndex]=baseSlice(array,index,index+=size)}return result}function compact(array){var index=-1,length=array?array.length:0,resIndex=-1,result=[];while(++index<length){var value=array[index];if(value){result[++resIndex]=value}}return result}var difference=restParam(function(array,values){return isArray(array)||isArguments(array)?baseDifference(array,baseFlatten(values,false,true)):[]});function drop(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}return baseSlice(array,n<0?0:n)}function dropRight(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}n=length-(+n||0);return baseSlice(array,0,n<0?0:n)}function dropRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),true,true):[]}function dropWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),true):[]}function fill(array,value,start,end){var length=array?array.length:0;if(!length){return[]}if(start&&typeof start!="number"&&isIterateeCall(array,value,start)){start=0;end=length}return baseFill(array,value,start,end)}var findIndex=createFindIndex();var findLastIndex=createFindIndex(true);function first(array){return array?array[0]:undefined}function flatten(array,isDeep,guard){var length=array?array.length:0;if(guard&&isIterateeCall(array,isDeep,guard)){isDeep=false}return length?baseFlatten(array,isDeep):[]}function flattenDeep(array){var length=array?array.length:0;return length?baseFlatten(array,true):[]}function indexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1}if(typeof fromIndex=="number"){fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex}else if(fromIndex){var index=binaryIndex(array,value),other=array[index];if(value===value?value===other:other!==other){return index}return-1}return baseIndexOf(array,value,fromIndex||0)}function initial(array){return dropRight(array,1)}function intersection(){var args=[],argsIndex=-1,argsLength=arguments.length,caches=[],indexOf=getIndexOf(),isCommon=indexOf==baseIndexOf,result=[];while(++argsIndex<argsLength){var value=arguments[argsIndex];if(isArray(value)||isArguments(value)){args.push(value);caches.push(isCommon&&value.length>=120?createCache(argsIndex&&value):null)}}argsLength=args.length;if(argsLength<2){return result}var array=args[0],index=-1,length=array?array.length:0,seen=caches[0];outer:while(++index<length){value=array[index];if((seen?cacheIndexOf(seen,value):indexOf(result,value,0))<0){argsIndex=argsLength;while(--argsIndex){var cache=caches[argsIndex];if((cache?cacheIndexOf(cache,value):indexOf(args[argsIndex],value,0))<0){continue outer}}if(seen){seen.push(value)}result.push(value)}}return result}function last(array){var length=array?array.length:0;return length?array[length-1]:undefined}function lastIndexOf(array,value,fromIndex){var length=array?array.length:0;if(!length){return-1}var index=length;if(typeof fromIndex=="number"){index=(fromIndex<0?nativeMax(length+fromIndex,0):nativeMin(fromIndex||0,length-1))+1}else if(fromIndex){index=binaryIndex(array,value,true)-1;var other=array[index];if(value===value?value===other:other!==other){return index}return-1}if(value!==value){return indexOfNaN(array,index,true)}while(index--){if(array[index]===value){return index}}return-1}function pull(){var args=arguments,array=args[0];if(!(array&&array.length)){return array}var index=0,indexOf=getIndexOf(),length=args.length;while(++index<length){var fromIndex=0,value=args[index];while((fromIndex=indexOf(array,value,fromIndex))>-1){splice.call(array,fromIndex,1)}}return array}var pullAt=restParam(function(array,indexes){array||(array=[]);indexes=baseFlatten(indexes);var result=baseAt(array,indexes);basePullAt(array,indexes.sort(baseCompareAscending));return result});function remove(array,predicate,thisArg){var result=[];if(!(array&&array.length)){return result}var index=-1,indexes=[],length=array.length;predicate=getCallback(predicate,thisArg,3);while(++index<length){var value=array[index];if(predicate(value,index,array)){result.push(value);indexes.push(index)}}basePullAt(array,indexes);return result}function rest(array){return drop(array,1)}function slice(array,start,end){var length=array?array.length:0;if(!length){return[]}if(end&&typeof end!="number"&&isIterateeCall(array,start,end)){start=0;end=length}return baseSlice(array,start,end)}var sortedIndex=createSortedIndex();var sortedLastIndex=createSortedIndex(true);function take(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}return baseSlice(array,0,n<0?0:n)}function takeRight(array,n,guard){var length=array?array.length:0;if(!length){return[]}if(guard?isIterateeCall(array,n,guard):n==null){n=1}n=length-(+n||0);return baseSlice(array,n<0?0:n)}function takeRightWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3),false,true):[]}function takeWhile(array,predicate,thisArg){return array&&array.length?baseWhile(array,getCallback(predicate,thisArg,3)):[]}var union=restParam(function(arrays){return baseUniq(baseFlatten(arrays,false,true))});function uniq(array,isSorted,iteratee,thisArg){var length=array?array.length:0;if(!length){return[]}if(isSorted!=null&&typeof isSorted!="boolean"){thisArg=iteratee;iteratee=isIterateeCall(array,isSorted,thisArg)?null:isSorted;isSorted=false}var func=getCallback();if(!(func===baseCallback&&iteratee==null)){iteratee=func(iteratee,thisArg,3)}return isSorted&&getIndexOf()==baseIndexOf?sortedUniq(array,iteratee):baseUniq(array,iteratee)}function unzip(array){var index=-1,length=(array&&array.length&&arrayMax(arrayMap(array,getLength)))>>>0,result=Array(length);while(++index<length){result[index]=arrayMap(array,baseProperty(index))}return result}var without=restParam(function(array,values){return isArray(array)||isArguments(array)?baseDifference(array,values):[]});function xor(){var index=-1,length=arguments.length;while(++index<length){var array=arguments[index];if(isArray(array)||isArguments(array)){var result=result?baseDifference(result,array).concat(baseDifference(array,result)):array}}return result?baseUniq(result):[]}var zip=restParam(unzip);function zipObject(props,values){var index=-1,length=props?props.length:0,result={};if(length&&!values&&!isArray(props[0])){values=[]}while(++index<length){var key=props[index];if(values){result[key]=values[index]}else if(key){result[key[0]]=key[1]}}return result}function chain(value){var result=lodash(value);result.__chain__=true;return result}function tap(value,interceptor,thisArg){interceptor.call(thisArg,value);return value}function thru(value,interceptor,thisArg){return interceptor.call(thisArg,value)}function wrapperChain(){return chain(this)}function wrapperCommit(){return new LodashWrapper(this.value(),this.__chain__)}function wrapperPlant(value){var result,parent=this;while(parent instanceof baseLodash){var clone=wrapperClone(parent);if(result){previous.__wrapped__=clone}else{result=clone}var previous=clone;parent=parent.__wrapped__}previous.__wrapped__=value;return result}function wrapperReverse(){var value=this.__wrapped__;if(value instanceof LazyWrapper){if(this.__actions__.length){value=new LazyWrapper(this)}return new LodashWrapper(value.reverse(),this.__chain__)}return this.thru(function(value){return value.reverse()})}function wrapperToString(){return this.value()+""}function wrapperValue(){return baseWrapperValue(this.__wrapped__,this.__actions__)}var at=restParam(function(collection,props){var length=collection?getLength(collection):0;if(isLength(length)){collection=toIterable(collection)}return baseAt(collection,baseFlatten(props))});var countBy=createAggregator(function(result,value,key){hasOwnProperty.call(result,key)?++result[key]:result[key]=1});function every(collection,predicate,thisArg){var func=isArray(collection)?arrayEvery:baseEvery;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=null}if(typeof predicate!="function"||thisArg!==undefined){predicate=getCallback(predicate,thisArg,3)}return func(collection,predicate)}function filter(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,predicate)}var find=createFind(baseEach);var findLast=createFind(baseEachRight,true);function findWhere(collection,source){return find(collection,baseMatches(source))}var forEach=createForEach(arrayEach,baseEach);var forEachRight=createForEach(arrayEachRight,baseEachRight);var groupBy=createAggregator(function(result,value,key){if(hasOwnProperty.call(result,key)){result[key].push(value)}else{result[key]=[value]}});function includes(collection,target,fromIndex,guard){var length=collection?getLength(collection):0;if(!isLength(length)){collection=values(collection);length=collection.length}if(!length){return false}if(typeof fromIndex!="number"||guard&&isIterateeCall(target,fromIndex,guard)){fromIndex=0}else{fromIndex=fromIndex<0?nativeMax(length+fromIndex,0):fromIndex||0}return typeof collection=="string"||!isArray(collection)&&isString(collection)?fromIndex<length&&collection.indexOf(target,fromIndex)>-1:getIndexOf(collection,target,fromIndex)>-1}var indexBy=createAggregator(function(result,value,key){result[key]=value});var invoke=restParam(function(collection,path,args){var index=-1,isFunc=typeof path=="function",isProp=isKey(path),length=getLength(collection),result=isLength(length)?Array(length):[];baseEach(collection,function(value){var func=isFunc?path:isProp&&value!=null&&value[path];result[++index]=func?func.apply(value,args):invokePath(value,path,args)});return result});function map(collection,iteratee,thisArg){var func=isArray(collection)?arrayMap:baseMap;iteratee=getCallback(iteratee,thisArg,3);return func(collection,iteratee)}var partition=createAggregator(function(result,value,key){result[key?0:1].push(value)},function(){return[[],[]]});function pluck(collection,path){return map(collection,property(path))}var reduce=createReduce(arrayReduce,baseEach);var reduceRight=createReduce(arrayReduceRight,baseEachRight);function reject(collection,predicate,thisArg){var func=isArray(collection)?arrayFilter:baseFilter;predicate=getCallback(predicate,thisArg,3);return func(collection,function(value,index,collection){return!predicate(value,index,collection)})}function sample(collection,n,guard){if(guard?isIterateeCall(collection,n,guard):n==null){collection=toIterable(collection);var length=collection.length;return length>0?collection[baseRandom(0,length-1)]:undefined}var result=shuffle(collection);result.length=nativeMin(n<0?0:+n||0,result.length);return result}function shuffle(collection){collection=toIterable(collection);var index=-1,length=collection.length,result=Array(length);while(++index<length){var rand=baseRandom(0,index);if(index!=rand){result[index]=result[rand]}result[rand]=collection[index]}return result}function size(collection){var length=collection?getLength(collection):0;return isLength(length)?length:keys(collection).length}function some(collection,predicate,thisArg){var func=isArray(collection)?arraySome:baseSome;if(thisArg&&isIterateeCall(collection,predicate,thisArg)){predicate=null}if(typeof predicate!="function"||thisArg!==undefined){predicate=getCallback(predicate,thisArg,3)}return func(collection,predicate)}function sortBy(collection,iteratee,thisArg){if(collection==null){return[]}if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=null}var index=-1;iteratee=getCallback(iteratee,thisArg,3);var result=baseMap(collection,function(value,key,collection){return{criteria:iteratee(value,key,collection),index:++index,value:value}});return baseSortBy(result,compareAscending)}var sortByAll=restParam(function(collection,iteratees){if(collection==null){return[]}var guard=iteratees[2];if(guard&&isIterateeCall(iteratees[0],iteratees[1],guard)){iteratees.length=1}return baseSortByOrder(collection,baseFlatten(iteratees),[])});function sortByOrder(collection,iteratees,orders,guard){if(collection==null){return[]}if(guard&&isIterateeCall(iteratees,orders,guard)){orders=null}if(!isArray(iteratees)){iteratees=iteratees==null?[]:[iteratees]}if(!isArray(orders)){orders=orders==null?[]:[orders]}return baseSortByOrder(collection,iteratees,orders)}function where(collection,source){return filter(collection,baseMatches(source))}var now=nativeNow||function(){return(new Date).getTime()};function after(n,func){if(typeof func!="function"){if(typeof n=="function"){var temp=n;n=func;func=temp}else{throw new TypeError(FUNC_ERROR_TEXT)}}n=nativeIsFinite(n=+n)?n:0;return function(){if(--n<1){return func.apply(this,arguments)}}}function ary(func,n,guard){if(guard&&isIterateeCall(func,n,guard)){n=null}n=func&&n==null?func.length:nativeMax(+n||0,0);return createWrapper(func,ARY_FLAG,null,null,null,null,n)}function before(n,func){var result;if(typeof func!="function"){if(typeof n=="function"){var temp=n;n=func;func=temp}else{throw new TypeError(FUNC_ERROR_TEXT)}}return function(){if(--n>0){result=func.apply(this,arguments)}if(n<=1){func=null}return result}}var bind=restParam(function(func,thisArg,partials){var bitmask=BIND_FLAG;if(partials.length){var holders=replaceHolders(partials,bind.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(func,bitmask,thisArg,partials,holders)});var bindAll=restParam(function(object,methodNames){methodNames=methodNames.length?baseFlatten(methodNames):functions(object);var index=-1,length=methodNames.length;while(++index<length){var key=methodNames[index];object[key]=createWrapper(object[key],BIND_FLAG,object)}return object});var bindKey=restParam(function(object,key,partials){var bitmask=BIND_FLAG|BIND_KEY_FLAG;if(partials.length){var holders=replaceHolders(partials,bindKey.placeholder);bitmask|=PARTIAL_FLAG}return createWrapper(key,bitmask,object,partials,holders)});var curry=createCurry(CURRY_FLAG);var curryRight=createCurry(CURRY_RIGHT_FLAG);function debounce(func,wait,options){var args,maxTimeoutId,result,stamp,thisArg,timeoutId,trailingCall,lastCalled=0,maxWait=false,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}wait=wait<0?0:+wait||0;if(options===true){var leading=true;trailing=false}else if(isObject(options)){leading=options.leading;maxWait="maxWait"in options&&nativeMax(+options.maxWait||0,wait);trailing="trailing"in options?options.trailing:trailing}function cancel(){if(timeoutId){clearTimeout(timeoutId)}if(maxTimeoutId){clearTimeout(maxTimeoutId)}maxTimeoutId=timeoutId=trailingCall=undefined}function delayed(){var remaining=wait-(now()-stamp);if(remaining<=0||remaining>wait){if(maxTimeoutId){clearTimeout(maxTimeoutId)}var isCalled=trailingCall;maxTimeoutId=timeoutId=trailingCall=undefined;if(isCalled){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}}else{timeoutId=setTimeout(delayed,remaining)}}function maxDelayed(){if(timeoutId){clearTimeout(timeoutId)}maxTimeoutId=timeoutId=trailingCall=undefined;if(trailing||maxWait!==wait){lastCalled=now();result=func.apply(thisArg,args);if(!timeoutId&&!maxTimeoutId){args=thisArg=null}}}function debounced(){args=arguments;stamp=now();thisArg=this;trailingCall=trailing&&(timeoutId||!leading);if(maxWait===false){var leadingCall=leading&&!timeoutId}else{if(!maxTimeoutId&&!leading){lastCalled=stamp}var remaining=maxWait-(stamp-lastCalled),isCalled=remaining<=0||remaining>maxWait;if(isCalled){if(maxTimeoutId){maxTimeoutId=clearTimeout(maxTimeoutId)}lastCalled=stamp;result=func.apply(thisArg,args)}else if(!maxTimeoutId){maxTimeoutId=setTimeout(maxDelayed,remaining)}}if(isCalled&&timeoutId){timeoutId=clearTimeout(timeoutId)}else if(!timeoutId&&wait!==maxWait){timeoutId=setTimeout(delayed,wait)}if(leadingCall){isCalled=true;result=func.apply(thisArg,args)}if(isCalled&&!timeoutId&&!maxTimeoutId){args=thisArg=null}return result}debounced.cancel=cancel;return debounced}var defer=restParam(function(func,args){return baseDelay(func,1,args)});var delay=restParam(function(func,wait,args){return baseDelay(func,wait,args)});var flow=createFlow();var flowRight=createFlow(true);function memoize(func,resolver){if(typeof func!="function"||resolver&&typeof resolver!="function"){throw new TypeError(FUNC_ERROR_TEXT)}var memoized=function(){var args=arguments,cache=memoized.cache,key=resolver?resolver.apply(this,args):args[0];if(cache.has(key)){return cache.get(key)}var result=func.apply(this,args);cache.set(key,result);return result};memoized.cache=new memoize.Cache;return memoized}function negate(predicate){if(typeof predicate!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(){return!predicate.apply(this,arguments)}}function once(func){return before(2,func)}var partial=createPartial(PARTIAL_FLAG);var partialRight=createPartial(PARTIAL_RIGHT_FLAG);var rearg=restParam(function(func,indexes){return createWrapper(func,REARG_FLAG,null,null,null,baseFlatten(indexes))});function restParam(func,start){
if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}start=nativeMax(start===undefined?func.length-1:+start||0,0);return function(){var args=arguments,index=-1,length=nativeMax(args.length-start,0),rest=Array(length);while(++index<length){rest[index]=args[start+index]}switch(start){case 0:return func.call(this,rest);case 1:return func.call(this,args[0],rest);case 2:return func.call(this,args[0],args[1],rest)}var otherArgs=Array(start+1);index=-1;while(++index<start){otherArgs[index]=args[index]}otherArgs[start]=rest;return func.apply(this,otherArgs)}}function spread(func){if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}return function(array){return func.apply(this,array)}}function throttle(func,wait,options){var leading=true,trailing=true;if(typeof func!="function"){throw new TypeError(FUNC_ERROR_TEXT)}if(options===false){leading=false}else if(isObject(options)){leading="leading"in options?!!options.leading:leading;trailing="trailing"in options?!!options.trailing:trailing}debounceOptions.leading=leading;debounceOptions.maxWait=+wait;debounceOptions.trailing=trailing;return debounce(func,wait,debounceOptions)}function wrap(value,wrapper){wrapper=wrapper==null?identity:wrapper;return createWrapper(wrapper,PARTIAL_FLAG,null,[value],[])}function clone(value,isDeep,customizer,thisArg){if(isDeep&&typeof isDeep!="boolean"&&isIterateeCall(value,isDeep,customizer)){isDeep=false}else if(typeof isDeep=="function"){thisArg=customizer;customizer=isDeep;isDeep=false}customizer=typeof customizer=="function"&&bindCallback(customizer,thisArg,1);return baseClone(value,isDeep,customizer)}function cloneDeep(value,customizer,thisArg){customizer=typeof customizer=="function"&&bindCallback(customizer,thisArg,1);return baseClone(value,true,customizer)}function isArguments(value){var length=isObjectLike(value)?value.length:undefined;return isLength(length)&&objToString.call(value)==argsTag}var isArray=nativeIsArray||function(value){return isObjectLike(value)&&isLength(value.length)&&objToString.call(value)==arrayTag};function isBoolean(value){return value===true||value===false||isObjectLike(value)&&objToString.call(value)==boolTag}function isDate(value){return isObjectLike(value)&&objToString.call(value)==dateTag}function isElement(value){return!!value&&value.nodeType===1&&isObjectLike(value)&&objToString.call(value).indexOf("Element")>-1}if(!support.dom){isElement=function(value){return!!value&&value.nodeType===1&&isObjectLike(value)&&!isPlainObject(value)}}function isEmpty(value){if(value==null){return true}var length=getLength(value);if(isLength(length)&&(isArray(value)||isString(value)||isArguments(value)||isObjectLike(value)&&isFunction(value.splice))){return!length}return!keys(value).length}function isEqual(value,other,customizer,thisArg){customizer=typeof customizer=="function"&&bindCallback(customizer,thisArg,3);if(!customizer&&isStrictComparable(value)&&isStrictComparable(other)){return value===other}var result=customizer?customizer(value,other):undefined;return result===undefined?baseIsEqual(value,other,customizer):!!result}function isError(value){return isObjectLike(value)&&typeof value.message=="string"&&objToString.call(value)==errorTag}var isFinite=nativeNumIsFinite||function(value){return typeof value=="number"&&nativeIsFinite(value)};var isFunction=!(baseIsFunction(/x/)||Uint8Array&&!baseIsFunction(Uint8Array))?baseIsFunction:function(value){return objToString.call(value)==funcTag};function isObject(value){var type=typeof value;return type=="function"||!!value&&type=="object"}function isMatch(object,source,customizer,thisArg){var props=keys(source),length=props.length;if(!length){return true}if(object==null){return false}customizer=typeof customizer=="function"&&bindCallback(customizer,thisArg,3);object=toObject(object);if(!customizer&&length==1){var key=props[0],value=source[key];if(isStrictComparable(value)){return value===object[key]&&(value!==undefined||key in object)}}var values=Array(length),strictCompareFlags=Array(length);while(length--){value=values[length]=source[props[length]];strictCompareFlags[length]=isStrictComparable(value)}return baseIsMatch(object,props,values,strictCompareFlags,customizer)}function isNaN(value){return isNumber(value)&&value!=+value}function isNative(value){if(value==null){return false}if(objToString.call(value)==funcTag){return reIsNative.test(fnToString.call(value))}return isObjectLike(value)&&reIsHostCtor.test(value)}function isNull(value){return value===null}function isNumber(value){return typeof value=="number"||isObjectLike(value)&&objToString.call(value)==numberTag}var isPlainObject=!getPrototypeOf?shimIsPlainObject:function(value){if(!(value&&objToString.call(value)==objectTag)){return false}var valueOf=value.valueOf,objProto=isNative(valueOf)&&(objProto=getPrototypeOf(valueOf))&&getPrototypeOf(objProto);return objProto?value==objProto||getPrototypeOf(value)==objProto:shimIsPlainObject(value)};function isRegExp(value){return isObjectLike(value)&&objToString.call(value)==regexpTag||false}function isString(value){return typeof value=="string"||isObjectLike(value)&&objToString.call(value)==stringTag}function isTypedArray(value){return isObjectLike(value)&&isLength(value.length)&&!!typedArrayTags[objToString.call(value)]}function isUndefined(value){return value===undefined}function toArray(value){var length=value?getLength(value):0;if(!isLength(length)){return values(value)}if(!length){return[]}return arrayCopy(value)}function toPlainObject(value){return baseCopy(value,keysIn(value))}var assign=createAssigner(function(object,source,customizer){return customizer?assignWith(object,source,customizer):baseAssign(object,source)});function create(prototype,properties,guard){var result=baseCreate(prototype);if(guard&&isIterateeCall(prototype,properties,guard)){properties=null}return properties?baseAssign(result,properties):result}var defaults=restParam(function(args){var object=args[0];if(object==null){return object}args.push(assignDefaults);return assign.apply(undefined,args)});var findKey=createFindKey(baseForOwn);var findLastKey=createFindKey(baseForOwnRight);var forIn=createForIn(baseFor);var forInRight=createForIn(baseForRight);var forOwn=createForOwn(baseForOwn);var forOwnRight=createForOwn(baseForOwnRight);function functions(object){return baseFunctions(object,keysIn(object))}function get(object,path,defaultValue){var result=object==null?undefined:baseGet(object,toPath(path),path+"");return result===undefined?defaultValue:result}function has(object,path){if(object==null){return false}var result=hasOwnProperty.call(object,path);if(!result&&!isKey(path)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));path=last(path);result=object!=null&&hasOwnProperty.call(object,path)}return result}function invert(object,multiValue,guard){if(guard&&isIterateeCall(object,multiValue,guard)){multiValue=null}var index=-1,props=keys(object),length=props.length,result={};while(++index<length){var key=props[index],value=object[key];if(multiValue){if(hasOwnProperty.call(result,value)){result[value].push(key)}else{result[value]=[key]}}else{result[value]=key}}return result}var keys=!nativeKeys?shimKeys:function(object){if(object){var Ctor=object.constructor,length=object.length}if(typeof Ctor=="function"&&Ctor.prototype===object||typeof object!="function"&&isLength(length)){return shimKeys(object)}return isObject(object)?nativeKeys(object):[]};function keysIn(object){if(object==null){return[]}if(!isObject(object)){object=Object(object)}var length=object.length;length=length&&isLength(length)&&(isArray(object)||support.nonEnumArgs&&isArguments(object))&&length||0;var Ctor=object.constructor,index=-1,isProto=typeof Ctor=="function"&&Ctor.prototype===object,result=Array(length),skipIndexes=length>0;while(++index<length){result[index]=index+""}for(var key in object){if(!(skipIndexes&&isIndex(key,length))&&!(key=="constructor"&&(isProto||!hasOwnProperty.call(object,key)))){result.push(key)}}return result}function mapValues(object,iteratee,thisArg){var result={};iteratee=getCallback(iteratee,thisArg,3);baseForOwn(object,function(value,key,object){result[key]=iteratee(value,key,object)});return result}var merge=createAssigner(baseMerge);var omit=restParam(function(object,props){if(object==null){return{}}if(typeof props[0]!="function"){var props=arrayMap(baseFlatten(props),String);return pickByArray(object,baseDifference(keysIn(object),props))}var predicate=bindCallback(props[0],props[1],3);return pickByCallback(object,function(value,key,object){return!predicate(value,key,object)})});function pairs(object){var index=-1,props=keys(object),length=props.length,result=Array(length);while(++index<length){var key=props[index];result[index]=[key,object[key]]}return result}var pick=restParam(function(object,props){if(object==null){return{}}return typeof props[0]=="function"?pickByCallback(object,bindCallback(props[0],props[1],3)):pickByArray(object,baseFlatten(props))});function result(object,path,defaultValue){var result=object==null?undefined:object[path];if(result===undefined){if(object!=null&&!isKey(path,object)){path=toPath(path);object=path.length==1?object:baseGet(object,baseSlice(path,0,-1));result=object==null?undefined:object[last(path)]}result=result===undefined?defaultValue:result}return isFunction(result)?result.call(object):result}function set(object,path,value){if(object==null){return object}var pathKey=path+"";path=object[pathKey]!=null||isKey(path,object)?[pathKey]:toPath(path);var index=-1,length=path.length,endIndex=length-1,nested=object;while(nested!=null&&++index<length){var key=path[index];if(isObject(nested)){if(index==endIndex){nested[key]=value}else if(nested[key]==null){nested[key]=isIndex(path[index+1])?[]:{}}}nested=nested[key]}return object}function transform(object,iteratee,accumulator,thisArg){var isArr=isArray(object)||isTypedArray(object);iteratee=getCallback(iteratee,thisArg,4);if(accumulator==null){if(isArr||isObject(object)){var Ctor=object.constructor;if(isArr){accumulator=isArray(object)?new Ctor:[]}else{accumulator=baseCreate(isFunction(Ctor)&&Ctor.prototype)}}else{accumulator={}}}(isArr?arrayEach:baseForOwn)(object,function(value,index,object){return iteratee(accumulator,value,index,object)});return accumulator}function values(object){return baseValues(object,keys(object))}function valuesIn(object){return baseValues(object,keysIn(object))}function inRange(value,start,end){start=+start||0;if(typeof end==="undefined"){end=start;start=0}else{end=+end||0}return value>=nativeMin(start,end)&&value<nativeMax(start,end)}function random(min,max,floating){if(floating&&isIterateeCall(min,max,floating)){max=floating=null}var noMin=min==null,noMax=max==null;if(floating==null){if(noMax&&typeof min=="boolean"){floating=min;min=1}else if(typeof max=="boolean"){floating=max;noMax=true}}if(noMin&&noMax){max=1;noMax=false}min=+min||0;if(noMax){max=min;min=0}else{max=+max||0}if(floating||min%1||max%1){var rand=nativeRandom();return nativeMin(min+rand*(max-min+parseFloat("1e-"+((rand+"").length-1))),max)}return baseRandom(min,max)}var camelCase=createCompounder(function(result,word,index){word=word.toLowerCase();return result+(index?word.charAt(0).toUpperCase()+word.slice(1):word)});function capitalize(string){string=baseToString(string);return string&&string.charAt(0).toUpperCase()+string.slice(1)}function deburr(string){string=baseToString(string);return string&&string.replace(reLatin1,deburrLetter).replace(reComboMark,"")}function endsWith(string,target,position){string=baseToString(string);target=target+"";var length=string.length;position=position===undefined?length:nativeMin(position<0?0:+position||0,length);position-=target.length;return position>=0&&string.indexOf(target,position)==position}function escape(string){string=baseToString(string);return string&&reHasUnescapedHtml.test(string)?string.replace(reUnescapedHtml,escapeHtmlChar):string}function escapeRegExp(string){string=baseToString(string);return string&&reHasRegExpChars.test(string)?string.replace(reRegExpChars,"\\$&"):string}var kebabCase=createCompounder(function(result,word,index){return result+(index?"-":"")+word.toLowerCase()});function pad(string,length,chars){string=baseToString(string);length=+length;var strLength=string.length;if(strLength>=length||!nativeIsFinite(length)){return string}var mid=(length-strLength)/2,leftLength=floor(mid),rightLength=ceil(mid);chars=createPadding("",rightLength,chars);return chars.slice(0,leftLength)+string+chars}var padLeft=createPadDir();var padRight=createPadDir(true);function parseInt(string,radix,guard){if(guard&&isIterateeCall(string,radix,guard)){radix=0}return nativeParseInt(string,radix)}if(nativeParseInt(whitespace+"08")!=8){parseInt=function(string,radix,guard){if(guard?isIterateeCall(string,radix,guard):radix==null){radix=0}else if(radix){radix=+radix}string=trim(string);return nativeParseInt(string,radix||(reHasHexPrefix.test(string)?16:10))}}function repeat(string,n){var result="";string=baseToString(string);n=+n;if(n<1||!string||!nativeIsFinite(n)){return result}do{if(n%2){result+=string}n=floor(n/2);string+=string}while(n);return result}var snakeCase=createCompounder(function(result,word,index){return result+(index?"_":"")+word.toLowerCase()});var startCase=createCompounder(function(result,word,index){return result+(index?" ":"")+(word.charAt(0).toUpperCase()+word.slice(1))});function startsWith(string,target,position){string=baseToString(string);position=position==null?0:nativeMin(position<0?0:+position||0,string.length);return string.lastIndexOf(target,position)==position}function template(string,options,otherOptions){var settings=lodash.templateSettings;if(otherOptions&&isIterateeCall(string,options,otherOptions)){options=otherOptions=null}string=baseToString(string);options=assignWith(baseAssign({},otherOptions||options),settings,assignOwnDefaults);var imports=assignWith(baseAssign({},options.imports),settings.imports,assignOwnDefaults),importsKeys=keys(imports),importsValues=baseValues(imports,importsKeys);var isEscaping,isEvaluating,index=0,interpolate=options.interpolate||reNoMatch,source="__p += '";var reDelimiters=RegExp((options.escape||reNoMatch).source+"|"+interpolate.source+"|"+(interpolate===reInterpolate?reEsTemplate:reNoMatch).source+"|"+(options.evaluate||reNoMatch).source+"|$","g");var sourceURL="//# sourceURL="+("sourceURL"in options?options.sourceURL:"lodash.templateSources["+ ++templateCounter+"]")+"\n";string.replace(reDelimiters,function(match,escapeValue,interpolateValue,esTemplateValue,evaluateValue,offset){interpolateValue||(interpolateValue=esTemplateValue);source+=string.slice(index,offset).replace(reUnescapedString,escapeStringChar);if(escapeValue){isEscaping=true;source+="' +\n__e("+escapeValue+") +\n'"}if(evaluateValue){isEvaluating=true;source+="';\n"+evaluateValue+";\n__p += '"}if(interpolateValue){source+="' +\n((__t = ("+interpolateValue+")) == null ? '' : __t) +\n'"}index=offset+match.length;return match});source+="';\n";var variable=options.variable;if(!variable){source="with (obj) {\n"+source+"\n}\n"}source=(isEvaluating?source.replace(reEmptyStringLeading,""):source).replace(reEmptyStringMiddle,"$1").replace(reEmptyStringTrailing,"$1;");source="function("+(variable||"obj")+") {\n"+(variable?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(isEscaping?", __e = _.escape":"")+(isEvaluating?", __j = Array.prototype.join;\n"+"function print() { __p += __j.call(arguments, '') }\n":";\n")+source+"return __p\n}";var result=attempt(function(){return Function(importsKeys,sourceURL+"return "+source).apply(undefined,importsValues)});result.source=source;if(isError(result)){throw result}return result}function trim(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string),trimmedRightIndex(string)+1)}chars=chars+"";return string.slice(charsLeftIndex(string,chars),charsRightIndex(string,chars)+1)}function trimLeft(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(trimmedLeftIndex(string))}return string.slice(charsLeftIndex(string,chars+""))}function trimRight(string,chars,guard){var value=string;string=baseToString(string);if(!string){return string}if(guard?isIterateeCall(value,chars,guard):chars==null){return string.slice(0,trimmedRightIndex(string)+1)}return string.slice(0,charsRightIndex(string,chars+"")+1)}function trunc(string,options,guard){if(guard&&isIterateeCall(string,options,guard)){options=null}var length=DEFAULT_TRUNC_LENGTH,omission=DEFAULT_TRUNC_OMISSION;if(options!=null){if(isObject(options)){var separator="separator"in options?options.separator:separator;length="length"in options?+options.length||0:length;omission="omission"in options?baseToString(options.omission):omission}else{length=+options||0}}string=baseToString(string);if(length>=string.length){return string}var end=length-omission.length;if(end<1){return omission}var result=string.slice(0,end);if(separator==null){return result+omission}if(isRegExp(separator)){if(string.slice(end).search(separator)){var match,newEnd,substring=string.slice(0,end);if(!separator.global){separator=RegExp(separator.source,(reFlags.exec(separator)||"")+"g")}separator.lastIndex=0;while(match=separator.exec(substring)){newEnd=match.index}result=result.slice(0,newEnd==null?end:newEnd)}}else if(string.indexOf(separator,end)!=end){var index=result.lastIndexOf(separator);if(index>-1){result=result.slice(0,index)}}return result+omission}function unescape(string){string=baseToString(string);return string&&reHasEscapedHtml.test(string)?string.replace(reEscapedHtml,unescapeHtmlChar):string}function words(string,pattern,guard){if(guard&&isIterateeCall(string,pattern,guard)){pattern=null}string=baseToString(string);return string.match(pattern||reWords)||[]}var attempt=restParam(function(func,args){try{return func.apply(undefined,args)}catch(e){return isError(e)?e:new Error(e)}});function callback(func,thisArg,guard){if(guard&&isIterateeCall(func,thisArg,guard)){thisArg=null}return baseCallback(func,thisArg)}function constant(value){return function(){return value}}function identity(value){return value}function matches(source){return baseMatches(baseClone(source,true))}function matchesProperty(path,value){return baseMatchesProperty(path,baseClone(value,true))}var method=restParam(function(path,args){return function(object){return invokePath(object,path,args)}});var methodOf=restParam(function(object,args){return function(path){return invokePath(object,path,args)}});function mixin(object,source,options){if(options==null){var isObj=isObject(source),props=isObj&&keys(source),methodNames=props&&props.length&&baseFunctions(source,props);if(!(methodNames?methodNames.length:isObj)){methodNames=false;options=source;source=object;object=this}}if(!methodNames){methodNames=baseFunctions(source,keys(source))}var chain=true,index=-1,isFunc=isFunction(object),length=methodNames.length;if(options===false){chain=false}else if(isObject(options)&&"chain"in options){chain=options.chain}while(++index<length){var methodName=methodNames[index],func=source[methodName];object[methodName]=func;if(isFunc){object.prototype[methodName]=function(func){return function(){var chainAll=this.__chain__;if(chain||chainAll){var result=object(this.__wrapped__),actions=result.__actions__=arrayCopy(this.__actions__);actions.push({func:func,args:arguments,thisArg:object});result.__chain__=chainAll;return result}var args=[this.value()];push.apply(args,arguments);return func.apply(object,args)}}(func)}}return object}function noConflict(){context._=oldDash;return this}function noop(){}function property(path){return isKey(path)?baseProperty(path):basePropertyDeep(path)}function propertyOf(object){return function(path){return baseGet(object,toPath(path),path+"")}}function range(start,end,step){if(step&&isIterateeCall(start,end,step)){end=step=null}start=+start||0;step=step==null?1:+step||0;if(end==null){end=start;start=0}else{end=+end||0}var index=-1,length=nativeMax(ceil((end-start)/(step||1)),0),result=Array(length);while(++index<length){result[index]=start;start+=step}return result}function times(n,iteratee,thisArg){n=floor(n);if(n<1||!nativeIsFinite(n)){return[]}var index=-1,result=Array(nativeMin(n,MAX_ARRAY_LENGTH));iteratee=bindCallback(iteratee,thisArg,1);while(++index<n){if(index<MAX_ARRAY_LENGTH){result[index]=iteratee(index)}else{iteratee(index)}}return result}function uniqueId(prefix){var id=++idCounter;return baseToString(prefix)+id}function add(augend,addend){return(+augend||0)+(+addend||0)}var max=createExtremum(arrayMax);var min=createExtremum(arrayMin,true);function sum(collection,iteratee,thisArg){if(thisArg&&isIterateeCall(collection,iteratee,thisArg)){iteratee=null}var func=getCallback(),noIteratee=iteratee==null;if(!(func===baseCallback&&noIteratee)){noIteratee=false;iteratee=func(iteratee,thisArg,3)}return noIteratee?arraySum(isArray(collection)?collection:toIterable(collection)):baseSum(collection,iteratee)}lodash.prototype=baseLodash.prototype;LodashWrapper.prototype=baseCreate(baseLodash.prototype);LodashWrapper.prototype.constructor=LodashWrapper;LazyWrapper.prototype=baseCreate(baseLodash.prototype);LazyWrapper.prototype.constructor=LazyWrapper;MapCache.prototype["delete"]=mapDelete;MapCache.prototype.get=mapGet;MapCache.prototype.has=mapHas;MapCache.prototype.set=mapSet;SetCache.prototype.push=cachePush;memoize.Cache=MapCache;lodash.after=after;lodash.ary=ary;lodash.assign=assign;lodash.at=at;lodash.before=before;lodash.bind=bind;lodash.bindAll=bindAll;lodash.bindKey=bindKey;lodash.callback=callback;lodash.chain=chain;lodash.chunk=chunk;lodash.compact=compact;lodash.constant=constant;lodash.countBy=countBy;lodash.create=create;lodash.curry=curry;lodash.curryRight=curryRight;lodash.debounce=debounce;lodash.defaults=defaults;lodash.defer=defer;lodash.delay=delay;lodash.difference=difference;lodash.drop=drop;lodash.dropRight=dropRight;lodash.dropRightWhile=dropRightWhile;lodash.dropWhile=dropWhile;lodash.fill=fill;lodash.filter=filter;lodash.flatten=flatten;lodash.flattenDeep=flattenDeep;lodash.flow=flow;lodash.flowRight=flowRight;lodash.forEach=forEach;lodash.forEachRight=forEachRight;lodash.forIn=forIn;lodash.forInRight=forInRight;lodash.forOwn=forOwn;lodash.forOwnRight=forOwnRight;lodash.functions=functions;lodash.groupBy=groupBy;lodash.indexBy=indexBy;lodash.initial=initial;lodash.intersection=intersection;lodash.invert=invert;lodash.invoke=invoke;lodash.keys=keys;lodash.keysIn=keysIn;lodash.map=map;lodash.mapValues=mapValues;lodash.matches=matches;lodash.matchesProperty=matchesProperty;lodash.memoize=memoize;lodash.merge=merge;lodash.method=method;lodash.methodOf=methodOf;lodash.mixin=mixin;lodash.negate=negate;lodash.omit=omit;lodash.once=once;lodash.pairs=pairs;lodash.partial=partial;lodash.partialRight=partialRight;lodash.partition=partition;lodash.pick=pick;lodash.pluck=pluck;lodash.property=property;lodash.propertyOf=propertyOf;lodash.pull=pull;lodash.pullAt=pullAt;lodash.range=range;lodash.rearg=rearg;lodash.reject=reject;lodash.remove=remove;lodash.rest=rest;lodash.restParam=restParam;lodash.set=set;lodash.shuffle=shuffle;lodash.slice=slice;lodash.sortBy=sortBy;lodash.sortByAll=sortByAll;lodash.sortByOrder=sortByOrder;lodash.spread=spread;lodash.take=take;lodash.takeRight=takeRight;lodash.takeRightWhile=takeRightWhile;lodash.takeWhile=takeWhile;lodash.tap=tap;lodash.throttle=throttle;lodash.thru=thru;lodash.times=times;lodash.toArray=toArray;lodash.toPlainObject=toPlainObject;lodash.transform=transform;lodash.union=union;lodash.uniq=uniq;lodash.unzip=unzip;lodash.values=values;lodash.valuesIn=valuesIn;lodash.where=where;lodash.without=without;lodash.wrap=wrap;lodash.xor=xor;lodash.zip=zip;lodash.zipObject=zipObject;lodash.backflow=flowRight;lodash.collect=map;lodash.compose=flowRight;lodash.each=forEach;lodash.eachRight=forEachRight;lodash.extend=assign;lodash.iteratee=callback;lodash.methods=functions;lodash.object=zipObject;lodash.select=filter;lodash.tail=rest;lodash.unique=uniq;mixin(lodash,lodash);lodash.add=add;lodash.attempt=attempt;lodash.camelCase=camelCase;lodash.capitalize=capitalize;lodash.clone=clone;lodash.cloneDeep=cloneDeep;lodash.deburr=deburr;lodash.endsWith=endsWith;lodash.escape=escape;lodash.escapeRegExp=escapeRegExp;lodash.every=every;lodash.find=find;lodash.findIndex=findIndex;lodash.findKey=findKey;lodash.findLast=findLast;lodash.findLastIndex=findLastIndex;lodash.findLastKey=findLastKey;lodash.findWhere=findWhere;lodash.first=first;lodash.get=get;lodash.has=has;lodash.identity=identity;lodash.includes=includes;lodash.indexOf=indexOf;lodash.inRange=inRange;lodash.isArguments=isArguments;lodash.isArray=isArray;lodash.isBoolean=isBoolean;lodash.isDate=isDate;lodash.isElement=isElement;lodash.isEmpty=isEmpty;lodash.isEqual=isEqual;lodash.isError=isError;lodash.isFinite=isFinite;lodash.isFunction=isFunction;lodash.isMatch=isMatch;lodash.isNaN=isNaN;lodash.isNative=isNative;lodash.isNull=isNull;lodash.isNumber=isNumber;lodash.isObject=isObject;lodash.isPlainObject=isPlainObject;lodash.isRegExp=isRegExp;lodash.isString=isString;lodash.isTypedArray=isTypedArray;lodash.isUndefined=isUndefined;lodash.kebabCase=kebabCase;lodash.last=last;lodash.lastIndexOf=lastIndexOf;lodash.max=max;lodash.min=min;lodash.noConflict=noConflict;lodash.noop=noop;lodash.now=now;lodash.pad=pad;lodash.padLeft=padLeft;lodash.padRight=padRight;lodash.parseInt=parseInt;lodash.random=random;lodash.reduce=reduce;lodash.reduceRight=reduceRight;lodash.repeat=repeat;lodash.result=result;lodash.runInContext=runInContext;lodash.size=size;lodash.snakeCase=snakeCase;lodash.some=some;lodash.sortedIndex=sortedIndex;lodash.sortedLastIndex=sortedLastIndex;lodash.startCase=startCase;lodash.startsWith=startsWith;lodash.sum=sum;lodash.template=template;lodash.trim=trim;lodash.trimLeft=trimLeft;lodash.trimRight=trimRight;lodash.trunc=trunc;lodash.unescape=unescape;lodash.uniqueId=uniqueId;lodash.words=words;lodash.all=every;lodash.any=some;lodash.contains=includes;lodash.detect=find;lodash.foldl=reduce;lodash.foldr=reduceRight;lodash.head=first;lodash.include=includes;lodash.inject=reduce;mixin(lodash,function(){var source={};baseForOwn(lodash,function(func,methodName){if(!lodash.prototype[methodName]){source[methodName]=func}});return source}(),false);lodash.sample=sample;lodash.prototype.sample=function(n){if(!this.__chain__&&n==null){return sample(this.value())}return this.thru(function(value){return sample(value,n)})};lodash.VERSION=VERSION;arrayEach(["bind","bindKey","curry","curryRight","partial","partialRight"],function(methodName){lodash[methodName].placeholder=lodash});arrayEach(["dropWhile","filter","map","takeWhile"],function(methodName,type){var isFilter=type!=LAZY_MAP_FLAG,isDropWhile=type==LAZY_DROP_WHILE_FLAG;LazyWrapper.prototype[methodName]=function(iteratee,thisArg){var filtered=this.__filtered__,result=filtered&&isDropWhile?new LazyWrapper(this):this.clone(),iteratees=result.__iteratees__||(result.__iteratees__=[]);iteratees.push({done:false,count:0,index:0,iteratee:getCallback(iteratee,thisArg,1),limit:-1,type:type});result.__filtered__=filtered||isFilter;return result}});arrayEach(["drop","take"],function(methodName,index){var whileName=methodName+"While";LazyWrapper.prototype[methodName]=function(n){var filtered=this.__filtered__,result=filtered&&!index?this.dropWhile():this.clone();n=n==null?1:nativeMax(floor(n)||0,0);if(filtered){if(index){result.__takeCount__=nativeMin(result.__takeCount__,n)}else{last(result.__iteratees__).limit=n}}else{var views=result.__views__||(result.__views__=[]);views.push({size:n,type:methodName+(result.__dir__<0?"Right":"")})}return result};LazyWrapper.prototype[methodName+"Right"]=function(n){return this.reverse()[methodName](n).reverse()};LazyWrapper.prototype[methodName+"RightWhile"]=function(predicate,thisArg){return this.reverse()[whileName](predicate,thisArg).reverse()}});arrayEach(["first","last"],function(methodName,index){var takeName="take"+(index?"Right":"");LazyWrapper.prototype[methodName]=function(){return this[takeName](1).value()[0]}});arrayEach(["initial","rest"],function(methodName,index){var dropName="drop"+(index?"":"Right");LazyWrapper.prototype[methodName]=function(){return this[dropName](1)}});arrayEach(["pluck","where"],function(methodName,index){var operationName=index?"filter":"map",createCallback=index?baseMatches:property;LazyWrapper.prototype[methodName]=function(value){return this[operationName](createCallback(value))}});LazyWrapper.prototype.compact=function(){return this.filter(identity)};LazyWrapper.prototype.reject=function(predicate,thisArg){predicate=getCallback(predicate,thisArg,1);return this.filter(function(value){return!predicate(value)})};LazyWrapper.prototype.slice=function(start,end){start=start==null?0:+start||0;var result=start<0?this.takeRight(-start):this.drop(start);if(end!==undefined){end=+end||0;result=end<0?result.dropRight(-end):result.take(end-start)}return result};LazyWrapper.prototype.toArray=function(){return this.drop(0)};baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(!lodashFunc){return}var checkIteratee=/^(?:filter|map|reject)|While$/.test(methodName),retUnwrapped=/^(?:first|last)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments,length=args.length,chainAll=this.__chain__,value=this.__wrapped__,isHybrid=!!this.__actions__.length,isLazy=value instanceof LazyWrapper,iteratee=args[0],useLazy=isLazy||isArray(value);if(useLazy&&checkIteratee&&typeof iteratee=="function"&&iteratee.length!=1){isLazy=useLazy=false}var onlyLazy=isLazy&&!isHybrid;if(retUnwrapped&&!chainAll){return onlyLazy?func.call(value):lodashFunc.call(lodash,this.value())}var interceptor=function(value){var otherArgs=[value];push.apply(otherArgs,args);return lodashFunc.apply(lodash,otherArgs)};if(useLazy){var wrapper=onlyLazy?value:new LazyWrapper(this),result=func.apply(wrapper,args);if(!retUnwrapped&&(isHybrid||result.__actions__)){var actions=result.__actions__||(result.__actions__=[]);actions.push({func:thru,args:[interceptor],thisArg:lodash})}return new LodashWrapper(result,chainAll)}return this.thru(interceptor)}});arrayEach(["concat","join","pop","push","replace","shift","sort","splice","split","unshift"],function(methodName){var func=(/^(?:replace|split)$/.test(methodName)?stringProto:arrayProto)[methodName],chainName=/^(?:push|sort|unshift)$/.test(methodName)?"tap":"thru",retUnwrapped=/^(?:join|pop|replace|shift)$/.test(methodName);lodash.prototype[methodName]=function(){var args=arguments;if(retUnwrapped&&!this.__chain__){return func.apply(this.value(),args)}return this[chainName](function(value){return func.apply(value,args)})}});baseForOwn(LazyWrapper.prototype,function(func,methodName){var lodashFunc=lodash[methodName];if(lodashFunc){var key=lodashFunc.name,names=realNames[key]||(realNames[key]=[]);names.push({name:methodName,func:lodashFunc})}});realNames[createHybridWrapper(null,BIND_KEY_FLAG).name]=[{name:"wrapper",func:null}];LazyWrapper.prototype.clone=lazyClone;LazyWrapper.prototype.reverse=lazyReverse;LazyWrapper.prototype.value=lazyValue;lodash.prototype.chain=wrapperChain;lodash.prototype.commit=wrapperCommit;lodash.prototype.plant=wrapperPlant;lodash.prototype.reverse=wrapperReverse;lodash.prototype.toString=wrapperToString;lodash.prototype.run=lodash.prototype.toJSON=lodash.prototype.valueOf=lodash.prototype.value=wrapperValue;lodash.prototype.collect=lodash.prototype.map;lodash.prototype.head=lodash.prototype.first;lodash.prototype.select=lodash.prototype.filter;lodash.prototype.tail=lodash.prototype.rest;return lodash}var _=runInContext();if(typeof define=="function"&&typeof define.amd=="object"&&define.amd){root._=_;define(function(){return _})}else if(freeExports&&freeModule){
if(moduleExports){(freeModule.exports=_)._=_}else{freeExports._=_}}else{root._=_}}).call(this)}).call(this,typeof global!=="undefined"?global:typeof self!=="undefined"?self:typeof window!=="undefined"?window:{})},{}],14:[function(require,module,exports){"use strict";var twoProduct=require("two-product");var robustSum=require("robust-sum");var robustDiff=require("robust-subtract");var robustScale=require("robust-scale");var NUM_EXPAND=6;function cofactor(m,c){var result=new Array(m.length-1);for(var i=1;i<m.length;++i){var r=result[i-1]=new Array(m.length-1);for(var j=0,k=0;j<m.length;++j){if(j===c){continue}r[k++]=m[i][j]}}return result}function matrix(n){var result=new Array(n);for(var i=0;i<n;++i){result[i]=new Array(n);for(var j=0;j<n;++j){result[i][j]=["m",j,"[",n-i-2,"]"].join("")}}return result}function generateSum(expr){if(expr.length===1){return expr[0]}else if(expr.length===2){return["sum(",expr[0],",",expr[1],")"].join("")}else{var m=expr.length>>1;return["sum(",generateSum(expr.slice(0,m)),",",generateSum(expr.slice(m)),")"].join("")}}function makeProduct(a,b){if(a.charAt(0)==="m"){if(b.charAt(0)==="w"){var toks=a.split("[");return["w",b.substr(1),"m",toks[0].substr(1)].join("")}else{return["prod(",a,",",b,")"].join("")}}else{return makeProduct(b,a)}}function sign(s){if(s&1!==0){return"-"}return""}function determinant(m){if(m.length===2){return[["diff(",makeProduct(m[0][0],m[1][1]),",",makeProduct(m[1][0],m[0][1]),")"].join("")]}else{var expr=[];for(var i=0;i<m.length;++i){expr.push(["scale(",generateSum(determinant(cofactor(m,i))),",",sign(i),m[0][i],")"].join(""))}return expr}}function makeSquare(d,n){var terms=[];for(var i=0;i<n-2;++i){terms.push(["prod(m",d,"[",i,"],m",d,"[",i,"])"].join(""))}return generateSum(terms)}function orientation(n){var pos=[];var neg=[];var m=matrix(n);for(var i=0;i<n;++i){m[0][i]="1";m[n-1][i]="w"+i}for(var i=0;i<n;++i){if((i&1)===0){pos.push.apply(pos,determinant(cofactor(m,i)))}else{neg.push.apply(neg,determinant(cofactor(m,i)))}}var posExpr=generateSum(pos);var negExpr=generateSum(neg);var funcName="exactInSphere"+n;var funcArgs=[];for(var i=0;i<n;++i){funcArgs.push("m"+i)}var code=["function ",funcName,"(",funcArgs.join(),"){"];for(var i=0;i<n;++i){code.push("var w",i,"=",makeSquare(i,n),";");for(var j=0;j<n;++j){if(j!==i){code.push("var w",i,"m",j,"=scale(w",i,",m",j,"[0]);")}}}code.push("var p=",posExpr,",n=",negExpr,",d=diff(p,n);return d[d.length-1];}return ",funcName);var proc=new Function("sum","diff","prod","scale",code.join(""));return proc(robustSum,robustDiff,twoProduct,robustScale)}function inSphere0(){return 0}function inSphere1(){return 0}function inSphere2(){return 0}var CACHED=[inSphere0,inSphere1,inSphere2];function slowInSphere(args){var proc=CACHED[args.length];if(!proc){proc=CACHED[args.length]=orientation(args.length)}return proc.apply(undefined,args)}function generateInSphereTest(){while(CACHED.length<=NUM_EXPAND){CACHED.push(orientation(CACHED.length))}var args=[];var procArgs=["slow"];for(var i=0;i<=NUM_EXPAND;++i){args.push("a"+i);procArgs.push("o"+i)}var code=["function testInSphere(",args.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(var i=2;i<=NUM_EXPAND;++i){code.push("case ",i,":return o",i,"(",args.slice(0,i).join(),");")}code.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return testInSphere");procArgs.push(code.join(""));var proc=Function.apply(undefined,procArgs);module.exports=proc.apply(undefined,[slowInSphere].concat(CACHED));for(var i=0;i<=NUM_EXPAND;++i){module.exports[i]=CACHED[i]}}generateInSphereTest()},{"robust-scale":16,"robust-subtract":17,"robust-sum":18,"two-product":19}],15:[function(require,module,exports){"use strict";var twoProduct=require("two-product");var robustSum=require("robust-sum");var robustScale=require("robust-scale");var robustSubtract=require("robust-subtract");var NUM_EXPAND=5;var EPSILON=1.1102230246251565e-16;var ERRBOUND3=(3+16*EPSILON)*EPSILON;var ERRBOUND4=(7+56*EPSILON)*EPSILON;function cofactor(m,c){var result=new Array(m.length-1);for(var i=1;i<m.length;++i){var r=result[i-1]=new Array(m.length-1);for(var j=0,k=0;j<m.length;++j){if(j===c){continue}r[k++]=m[i][j]}}return result}function matrix(n){var result=new Array(n);for(var i=0;i<n;++i){result[i]=new Array(n);for(var j=0;j<n;++j){result[i][j]=["m",j,"[",n-i-1,"]"].join("")}}return result}function sign(n){if(n&1){return"-"}return""}function generateSum(expr){if(expr.length===1){return expr[0]}else if(expr.length===2){return["sum(",expr[0],",",expr[1],")"].join("")}else{var m=expr.length>>1;return["sum(",generateSum(expr.slice(0,m)),",",generateSum(expr.slice(m)),")"].join("")}}function determinant(m){if(m.length===2){return[["sum(prod(",m[0][0],",",m[1][1],"),prod(-",m[0][1],",",m[1][0],"))"].join("")]}else{var expr=[];for(var i=0;i<m.length;++i){expr.push(["scale(",generateSum(determinant(cofactor(m,i))),",",sign(i),m[0][i],")"].join(""))}return expr}}function orientation(n){var pos=[];var neg=[];var m=matrix(n);var args=[];for(var i=0;i<n;++i){if((i&1)===0){pos.push.apply(pos,determinant(cofactor(m,i)))}else{neg.push.apply(neg,determinant(cofactor(m,i)))}args.push("m"+i)}var posExpr=generateSum(pos);var negExpr=generateSum(neg);var funcName="orientation"+n+"Exact";var code=["function ",funcName,"(",args.join(),"){var p=",posExpr,",n=",negExpr,",d=sub(p,n);return d[d.length-1];};return ",funcName].join("");var proc=new Function("sum","prod","scale","sub",code);return proc(robustSum,twoProduct,robustScale,robustSubtract)}var orientation3Exact=orientation(3);var orientation4Exact=orientation(4);var CACHED=[function orientation0(){return 0},function orientation1(){return 0},function orientation2(a,b){return b[0]-a[0]},function orientation3(a,b,c){var l=(a[1]-c[1])*(b[0]-c[0]);var r=(a[0]-c[0])*(b[1]-c[1]);var det=l-r;var s;if(l>0){if(r<=0){return det}else{s=l+r}}else if(l<0){if(r>=0){return det}else{s=-(l+r)}}else{return det}var tol=ERRBOUND3*s;if(det>=tol||det<=-tol){return det}return orientation3Exact(a,b,c)},function orientation4(a,b,c,d){var adx=a[0]-d[0];var bdx=b[0]-d[0];var cdx=c[0]-d[0];var ady=a[1]-d[1];var bdy=b[1]-d[1];var cdy=c[1]-d[1];var adz=a[2]-d[2];var bdz=b[2]-d[2];var cdz=c[2]-d[2];var bdxcdy=bdx*cdy;var cdxbdy=cdx*bdy;var cdxady=cdx*ady;var adxcdy=adx*cdy;var adxbdy=adx*bdy;var bdxady=bdx*ady;var det=adz*(bdxcdy-cdxbdy)+bdz*(cdxady-adxcdy)+cdz*(adxbdy-bdxady);var permanent=(Math.abs(bdxcdy)+Math.abs(cdxbdy))*Math.abs(adz)+(Math.abs(cdxady)+Math.abs(adxcdy))*Math.abs(bdz)+(Math.abs(adxbdy)+Math.abs(bdxady))*Math.abs(cdz);var tol=ERRBOUND4*permanent;if(det>tol||-det>tol){return det}return orientation4Exact(a,b,c,d)}];function slowOrient(args){var proc=CACHED[args.length];if(!proc){proc=CACHED[args.length]=orientation(args.length)}return proc.apply(undefined,args)}function generateOrientationProc(){while(CACHED.length<=NUM_EXPAND){CACHED.push(orientation(CACHED.length))}var args=[];var procArgs=["slow"];for(var i=0;i<=NUM_EXPAND;++i){args.push("a"+i);procArgs.push("o"+i)}var code=["function getOrientation(",args.join(),"){switch(arguments.length){case 0:case 1:return 0;"];for(var i=2;i<=NUM_EXPAND;++i){code.push("case ",i,":return o",i,"(",args.slice(0,i).join(),");")}code.push("}var s=new Array(arguments.length);for(var i=0;i<arguments.length;++i){s[i]=arguments[i]};return slow(s);}return getOrientation");procArgs.push(code.join(""));var proc=Function.apply(undefined,procArgs);module.exports=proc.apply(undefined,[slowOrient].concat(CACHED));for(var i=0;i<=NUM_EXPAND;++i){module.exports[i]=CACHED[i]}}generateOrientationProc()},{"robust-scale":16,"robust-subtract":17,"robust-sum":18,"two-product":19}],16:[function(require,module,exports){"use strict";var twoProduct=require("two-product");var twoSum=require("two-sum");module.exports=scaleLinearExpansion;function scaleLinearExpansion(e,scale){var n=e.length;if(n===1){var ts=twoProduct(e[0],scale);if(ts[0]){return ts}return[ts[1]]}var g=new Array(2*n);var q=[.1,.1];var t=[.1,.1];var count=0;twoProduct(e[0],scale,q);if(q[0]){g[count++]=q[0]}for(var i=1;i<n;++i){twoProduct(e[i],scale,t);var pq=q[1];twoSum(pq,t[0],q);if(q[0]){g[count++]=q[0]}var a=t[1];var b=q[1];var x=a+b;var bv=x-a;var y=b-bv;q[1]=x;if(y){g[count++]=y}}if(q[1]){g[count++]=q[1]}if(count===0){g[count++]=0}g.length=count;return g}},{"two-product":19,"two-sum":20}],17:[function(require,module,exports){"use strict";module.exports=robustSubtract;function scalarScalar(a,b){var x=a+b;var bv=x-a;var av=x-bv;var br=b-bv;var ar=a-av;var y=ar+br;if(y){return[y,x]}return[x]}function robustSubtract(e,f){var ne=e.length|0;var nf=f.length|0;if(ne===1&&nf===1){return scalarScalar(e[0],-f[0])}var n=ne+nf;var g=new Array(n);var count=0;var eptr=0;var fptr=0;var abs=Math.abs;var ei=e[eptr];var ea=abs(ei);var fi=-f[fptr];var fa=abs(fi);var a,b;if(ea<fa){b=ei;eptr+=1;if(eptr<ne){ei=e[eptr];ea=abs(ei)}}else{b=fi;fptr+=1;if(fptr<nf){fi=-f[fptr];fa=abs(fi)}}if(eptr<ne&&ea<fa||fptr>=nf){a=ei;eptr+=1;if(eptr<ne){ei=e[eptr];ea=abs(ei)}}else{a=fi;fptr+=1;if(fptr<nf){fi=-f[fptr];fa=abs(fi)}}var x=a+b;var bv=x-a;var y=b-bv;var q0=y;var q1=x;var _x,_bv,_av,_br,_ar;while(eptr<ne&&fptr<nf){if(ea<fa){a=ei;eptr+=1;if(eptr<ne){ei=e[eptr];ea=abs(ei)}}else{a=fi;fptr+=1;if(fptr<nf){fi=-f[fptr];fa=abs(fi)}}b=q0;x=a+b;bv=x-a;y=b-bv;if(y){g[count++]=y}_x=q1+x;_bv=_x-q1;_av=_x-_bv;_br=x-_bv;_ar=q1-_av;q0=_ar+_br;q1=_x}while(eptr<ne){a=ei;b=q0;x=a+b;bv=x-a;y=b-bv;if(y){g[count++]=y}_x=q1+x;_bv=_x-q1;_av=_x-_bv;_br=x-_bv;_ar=q1-_av;q0=_ar+_br;q1=_x;eptr+=1;if(eptr<ne){ei=e[eptr]}}while(fptr<nf){a=fi;b=q0;x=a+b;bv=x-a;y=b-bv;if(y){g[count++]=y}_x=q1+x;_bv=_x-q1;_av=_x-_bv;_br=x-_bv;_ar=q1-_av;q0=_ar+_br;q1=_x;fptr+=1;if(fptr<nf){fi=-f[fptr]}}if(q0){g[count++]=q0}if(q1){g[count++]=q1}if(!count){g[count++]=0}g.length=count;return g}},{}],18:[function(require,module,exports){"use strict";module.exports=linearExpansionSum;function scalarScalar(a,b){var x=a+b;var bv=x-a;var av=x-bv;var br=b-bv;var ar=a-av;var y=ar+br;if(y){return[y,x]}return[x]}function linearExpansionSum(e,f){var ne=e.length|0;var nf=f.length|0;if(ne===1&&nf===1){return scalarScalar(e[0],f[0])}var n=ne+nf;var g=new Array(n);var count=0;var eptr=0;var fptr=0;var abs=Math.abs;var ei=e[eptr];var ea=abs(ei);var fi=f[fptr];var fa=abs(fi);var a,b;if(ea<fa){b=ei;eptr+=1;if(eptr<ne){ei=e[eptr];ea=abs(ei)}}else{b=fi;fptr+=1;if(fptr<nf){fi=f[fptr];fa=abs(fi)}}if(eptr<ne&&ea<fa||fptr>=nf){a=ei;eptr+=1;if(eptr<ne){ei=e[eptr];ea=abs(ei)}}else{a=fi;fptr+=1;if(fptr<nf){fi=f[fptr];fa=abs(fi)}}var x=a+b;var bv=x-a;var y=b-bv;var q0=y;var q1=x;var _x,_bv,_av,_br,_ar;while(eptr<ne&&fptr<nf){if(ea<fa){a=ei;eptr+=1;if(eptr<ne){ei=e[eptr];ea=abs(ei)}}else{a=fi;fptr+=1;if(fptr<nf){fi=f[fptr];fa=abs(fi)}}b=q0;x=a+b;bv=x-a;y=b-bv;if(y){g[count++]=y}_x=q1+x;_bv=_x-q1;_av=_x-_bv;_br=x-_bv;_ar=q1-_av;q0=_ar+_br;q1=_x}while(eptr<ne){a=ei;b=q0;x=a+b;bv=x-a;y=b-bv;if(y){g[count++]=y}_x=q1+x;_bv=_x-q1;_av=_x-_bv;_br=x-_bv;_ar=q1-_av;q0=_ar+_br;q1=_x;eptr+=1;if(eptr<ne){ei=e[eptr]}}while(fptr<nf){a=fi;b=q0;x=a+b;bv=x-a;y=b-bv;if(y){g[count++]=y}_x=q1+x;_bv=_x-q1;_av=_x-_bv;_br=x-_bv;_ar=q1-_av;q0=_ar+_br;q1=_x;fptr+=1;if(fptr<nf){fi=f[fptr]}}if(q0){g[count++]=q0}if(q1){g[count++]=q1}if(!count){g[count++]=0}g.length=count;return g}},{}],19:[function(require,module,exports){"use strict";module.exports=twoProduct;var SPLITTER=+(Math.pow(2,27)+1);function twoProduct(a,b,result){var x=a*b;var c=SPLITTER*a;var abig=c-a;var ahi=c-abig;var alo=a-ahi;var d=SPLITTER*b;var bbig=d-b;var bhi=d-bbig;var blo=b-bhi;var err1=x-ahi*bhi;var err2=err1-alo*bhi;var err3=err2-ahi*blo;var y=alo*blo-err3;if(result){result[0]=y;result[1]=x;return result}return[y,x]}},{}],20:[function(require,module,exports){"use strict";module.exports=fastTwoSum;function fastTwoSum(a,b,result){var x=a+b;var bv=x-a;var av=x-bv;var br=b-bv;var ar=a-av;if(result){result[0]=ar+br;result[1]=x;return result}return[ar+br,x]}},{}]},{},[4])(4)});